(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{100:function(e,t,a){"use strict";a.r(t);t.default={WebkitTapHighlightColor:"rgba(0,0,0,0)",WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",cursor:"pointer"}},115:function(e,t,a){},155:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},172:function(e,t,a){},177:function(e,t,a){var n=a(225);function o(){n.update(),n.getAll().length&&window.requestAnimationFrame(o)}function i(e,t){t=t||{};var a=e.scrollTop,i=Math.min(Math.max(200,a/2),350);a>200&&(i=300),e.style.webkitOverflowScrolling="auto",e.style.overflow="hidden";var r=new n.Tween({pos:a}).to({pos:0},i).easing(n.Easing.Quadratic.Out).onUpdate(function(){e.scrollTop=this.pos,t.onUpdate&&t.onUpdate()}).onComplete(function(){e.style.webkitOverflowScrolling="touch",e.style.overflow="scroll",t.onComplete&&t.onComplete()}).start();return o(),r}t.scrollToTop=i,(t.Mixins={}).ScrollContainerToTop={componentDidMount:function(){window.addEventListener("statusTap",this.scrollContainerToTop)},componentWillUnmount:function(){window.removeEventListener("statusTap",this.scrollContainerToTop),this._scrollContainerAnimation&&this._scrollContainerAnimation.stop()},scrollContainerToTop:function(){var e=this;this.refs.scrollContainer&&(this._scrollContainerAnimation=i(this.refs.scrollContainer,{onComplete:function(){delete e._scrollContainerAnimation}}))}}},178:function(e){e.exports=["alert","alert-circled","android-add","android-add-circle","android-alarm-clock","android-alert","android-apps","android-archive","android-arrow-back","android-arrow-down","android-arrow-dropdown","android-arrow-dropdown-circle","android-arrow-dropleft","android-arrow-dropleft-circle","android-arrow-dropright","android-arrow-dropright-circle","android-arrow-dropup","android-arrow-dropup-circle","android-arrow-forward","android-arrow-up","android-attach","android-bar","android-bicycle","android-boat","android-bookmark","android-bulb","android-bus","android-calendar","android-call","android-camera","android-cancel","android-car","android-cart","android-chat","android-checkbox","android-checkbox-blank","android-checkbox-outline","android-checkbox-outline-blank","android-checkmark-circle","android-clipboard","android-close","android-cloud","android-cloud-circle","android-cloud-done","android-cloud-outline","android-color-palette","android-compass","android-contact","android-contacts","android-contract","android-create","android-delete","android-desktop","android-document","android-done","android-done-all","android-download","android-drafts","android-exit","android-expand","android-favorite","android-favorite-outline","android-film","android-folder","android-folder-open","android-funnel","android-globe","android-hand","android-hangout","android-happy","android-home","android-image","android-laptop","android-list","android-locate","android-lock","android-mail","android-map","android-menu","android-microphone","android-microphone-off","android-more-horizontal","android-more-vertical","android-navigate","android-notifications","android-notifications-none","android-notifications-off","android-open","android-options","android-people","android-person","android-person-add","android-phone-landscape","android-phone-portrait","android-pin","android-plane","android-playstore","android-print","android-radio-button-off","android-radio-button-on","android-refresh","android-remove","android-remove-circle","android-restaurant","android-sad","android-search","android-send","android-settings","android-share","android-share-alt","android-star","android-star-half","android-star-outline","android-stopwatch","android-subway","android-sunny","android-sync","android-textsms","android-time","android-train","android-unlock","android-upload","android-volume-down","android-volume-mute","android-volume-off","android-volume-up","android-walk","android-warning","android-watch","android-wifi","aperture","archive","arrow-down-a","arrow-down-b","arrow-down-c","arrow-expand","arrow-graph-down-left","arrow-graph-down-right","arrow-graph-up-left","arrow-graph-up-right","arrow-left-a","arrow-left-b","arrow-left-c","arrow-move","arrow-resize","arrow-return-left","arrow-return-right","arrow-right-a","arrow-right-b","arrow-right-c","arrow-shrink","arrow-swap","arrow-up-a","arrow-up-b","arrow-up-c","asterisk","at","backspace","backspace-outline","bag","battery-charging","battery-empty","battery-full","battery-half","battery-low","beaker","beer","bluetooth","bonfire","bookmark","bowtie","briefcase","bug","calculator","calendar","camera","card","cash","chatbox","chatbox-working","chatboxes","chatbubble","chatbubble-working","chatbubbles","checkmark","checkmark-circled","checkmark-round","chevron-down","chevron-left","chevron-right","chevron-up","clipboard","clock","close","close-circled","close-round","closed-captioning","cloud","code","code-download","code-working","coffee","compass","compose","connection-bars","contrast","crop","cube","disc","document","document-text","drag","earth","easel","edit","egg","eject","email","email-unread","erlenmeyer-flask","erlenmeyer-flask-bubbles","eye","eye-disabled","female","filing","film-marker","fireball","flag","flame","flash","flash-off","folder","fork","fork-repo","forward","funnel","gear-a","gear-b","grid","hammer","happy","happy-outline","headphone","heart","heart-broken","help","help-buoy","help-circled","home","icecream","image","images","information","information-circled","ionic","ios-alarm","ios-alarm-outline","ios-albums","ios-albums-outline","ios-americanfootball","ios-americanfootball-outline","ios-analytics","ios-analytics-outline","ios-arrow-back","ios-arrow-down","ios-arrow-forward","ios-arrow-left","ios-arrow-right","ios-arrow-thin-down","ios-arrow-thin-left","ios-arrow-thin-right","ios-arrow-thin-up","ios-arrow-up","ios-at","ios-at-outline","ios-barcode","ios-barcode-outline","ios-baseball","ios-baseball-outline","ios-basketball","ios-basketball-outline","ios-bell","ios-bell-outline","ios-body","ios-body-outline","ios-bolt","ios-bolt-outline","ios-book","ios-book-outline","ios-bookmarks","ios-bookmarks-outline","ios-box","ios-box-outline","ios-briefcase","ios-briefcase-outline","ios-browsers","ios-browsers-outline","ios-calculator","ios-calculator-outline","ios-calendar","ios-calendar-outline","ios-camera","ios-camera-outline","ios-cart","ios-cart-outline","ios-chatboxes","ios-chatboxes-outline","ios-chatbubble","ios-chatbubble-outline","ios-checkmark","ios-checkmark-empty","ios-checkmark-outline","ios-circle-filled","ios-circle-outline","ios-clock","ios-clock-outline","ios-close","ios-close-empty","ios-close-outline","ios-cloud","ios-cloud-download","ios-cloud-download-outline","ios-cloud-outline","ios-cloud-upload","ios-cloud-upload-outline","ios-cloudy","ios-cloudy-night","ios-cloudy-night-outline","ios-cloudy-outline","ios-cog","ios-cog-outline","ios-color-filter","ios-color-filter-outline","ios-color-wand","ios-color-wand-outline","ios-compose","ios-compose-outline","ios-contact","ios-contact-outline","ios-copy","ios-copy-outline","ios-crop","ios-crop-strong","ios-download","ios-download-outline","ios-drag","ios-email","ios-email-outline","ios-eye","ios-eye-outline","ios-fastforward","ios-fastforward-outline","ios-filing","ios-filing-outline","ios-film","ios-film-outline","ios-flag","ios-flag-outline","ios-flame","ios-flame-outline","ios-flask","ios-flask-outline","ios-flower","ios-flower-outline","ios-folder","ios-folder-outline","ios-football","ios-football-outline","ios-game-controller-a","ios-game-controller-a-outline","ios-game-controller-b","ios-game-controller-b-outline","ios-gear","ios-gear-outline","ios-glasses","ios-glasses-outline","ios-grid-view","ios-grid-view-outline","ios-heart","ios-heart-outline","ios-help","ios-help-empty","ios-help-outline","ios-home","ios-home-outline","ios-infinite","ios-infinite-outline","ios-information","ios-information-empty","ios-information-outline","ios-ionic-outline","ios-keypad","ios-keypad-outline","ios-lightbulb","ios-lightbulb-outline","ios-list","ios-list-outline","ios-location","ios-location-outline","ios-locked","ios-locked-outline","ios-loop","ios-loop-strong","ios-medical","ios-medical-outline","ios-medkit","ios-medkit-outline","ios-mic","ios-mic-off","ios-mic-outline","ios-minus","ios-minus-empty","ios-minus-outline","ios-monitor","ios-monitor-outline","ios-moon","ios-moon-outline","ios-more","ios-more-outline","ios-musical-note","ios-musical-notes","ios-navigate","ios-navigate-outline","ios-nutrition","ios-nutrition-outline","ios-paper","ios-paper-outline","ios-paperplane","ios-paperplane-outline","ios-partlysunny","ios-partlysunny-outline","ios-pause","ios-pause-outline","ios-paw","ios-paw-outline","ios-people","ios-people-outline","ios-person","ios-person-outline","ios-personadd","ios-personadd-outline","ios-photos","ios-photos-outline","ios-pie","ios-pie-outline","ios-pint","ios-pint-outline","ios-play","ios-play-outline","ios-plus","ios-plus-empty","ios-plus-outline","ios-pricetag","ios-pricetag-outline","ios-pricetags","ios-pricetags-outline","ios-printer","ios-printer-outline","ios-pulse","ios-pulse-strong","ios-rainy","ios-rainy-outline","ios-recording","ios-recording-outline","ios-redo","ios-redo-outline","ios-refresh","ios-refresh-empty","ios-refresh-outline","ios-reload","ios-reverse-camera","ios-reverse-camera-outline","ios-rewind","ios-rewind-outline","ios-rose","ios-rose-outline","ios-search","ios-search-strong","ios-settings","ios-settings-strong","ios-shuffle","ios-shuffle-strong","ios-skipbackward","ios-skipbackward-outline","ios-skipforward","ios-skipforward-outline","ios-snowy","ios-speedometer","ios-speedometer-outline","ios-star","ios-star-half","ios-star-outline","ios-stopwatch","ios-stopwatch-outline","ios-sunny","ios-sunny-outline","ios-telephone","ios-telephone-outline","ios-tennisball","ios-tennisball-outline","ios-thunderstorm","ios-thunderstorm-outline","ios-time","ios-time-outline","ios-timer","ios-timer-outline","ios-toggle","ios-toggle-outline","ios-trash","ios-trash-outline","ios-undo","ios-undo-outline","ios-unlocked","ios-unlocked-outline","ios-upload","ios-upload-outline","ios-videocam","ios-videocam-outline","ios-volume-high","ios-volume-low","ios-wineglass","ios-wineglass-outline","ios-world","ios-world-outline","ipad","iphone","ipod","jet","key","knife","laptop","leaf","levels","lightbulb","link","load-a","load-b","load-c","load-d","location","lock-combination","locked","log-in","log-out","loop","magnet","male","man","map","medkit","merge","mic-a","mic-b","mic-c","minus","minus-circled","minus-round","model-s","monitor","more","mouse","music-note","navicon","navicon-round","navigate","network","no-smoking","nuclear","outlet","paintbrush","paintbucket","paper-airplane","paperclip","pause","person","person-add","person-stalker","pie-graph","pin","pinpoint","pizza","plane","planet","play","playstation","plus","plus-circled","plus-round","podium","pound","power","pricetag","pricetags","printer","pull-request","qr-scanner","quote","radio-waves","record","refresh","reply","reply-all","ribbon-a","ribbon-b","sad","sad-outline","scissors","search","settings","share","shuffle","skip-backward","skip-forward","social-android","social-android-outline","social-angular","social-angular-outline","social-apple","social-apple-outline","social-bitcoin","social-bitcoin-outline","social-buffer","social-buffer-outline","social-chrome","social-chrome-outline","social-codepen","social-codepen-outline","social-css3","social-css3-outline","social-designernews","social-designernews-outline","social-dribbble","social-dribbble-outline","social-dropbox","social-dropbox-outline","social-euro","social-euro-outline","social-facebook","social-facebook-outline","social-foursquare","social-foursquare-outline","social-freebsd-devil","social-github","social-github-outline","social-google","social-google-outline","social-googleplus","social-googleplus-outline","social-hackernews","social-hackernews-outline","social-html5","social-html5-outline","social-instagram","social-instagram-outline","social-javascript","social-javascript-outline","social-linkedin","social-linkedin-outline","social-markdown","social-nodejs","social-octocat","social-pinterest","social-pinterest-outline","social-python","social-reddit","social-reddit-outline","social-rss","social-rss-outline","social-sass","social-skype","social-skype-outline","social-snapchat","social-snapchat-outline","social-tumblr","social-tumblr-outline","social-tux","social-twitch","social-twitch-outline","social-twitter","social-twitter-outline","social-usd","social-usd-outline","social-vimeo","social-vimeo-outline","social-whatsapp","social-whatsapp-outline","social-windows","social-windows-outline","social-wordpress","social-wordpress-outline","social-yahoo","social-yahoo-outline","social-yen","social-yen-outline","social-youtube","social-youtube-outline","soup-can","soup-can-outline","speakerphone","speedometer","spoon","star","stats-bars","steam","stop","thermometer","thumbsdown","thumbsup","toggle","toggle-filled","transgender","trash-a","trash-b","trophy","tshirt","tshirt-outline","umbrella","university","unlocked","upload","usb","videocamera","volume-high","volume-low","volume-medium","volume-mute","wand","waterdrop","wifi","wineglass","woman","wrench","xbox:before"]},179:function(e){e.exports={results:[{gender:"female",name:{title:"Mrs",first:"Ella",last:"Garza"},location:{street:{number:2977,name:"James St"},city:"Queanbeyan",state:"South Australia",country:"Australia",postcode:3738,coordinates:{latitude:"-14.0303",longitude:"83.1175"},timezone:{offset:"+7:00",description:"Bangkok, Hanoi, Jakarta"}},email:"ella.garza@example.com",login:{uuid:"445c46b9-962d-4318-9521-a67a52c812ad",username:"bigmouse441",password:"bigtime",salt:"Bj3ogFYu",md5:"0c7fcf64d3e3b678ff0831a116aae5dc",sha1:"19b3f01a5cb69ef5b8b1855866bbeb08287f3bdf",sha256:"2005ea271e592510ab9958656d4f8c46520e6d0320bba867fb02ed80192a8341"},dob:{date:"1971-07-31T09:16:36.100Z",age:49},registered:{date:"2014-03-29T06:27:56.538Z",age:6},phone:"01-7501-6882",cell:"0443-178-621",id:{name:"TFN",value:"178878196"},picture:{large:"https://randomuser.me/api/portraits/women/33.jpg",medium:"https://randomuser.me/api/portraits/med/women/33.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/women/33.jpg"},nat:"AU"},{gender:"female",name:{title:"Miss",first:"Tiffany",last:"Daniels"},location:{street:{number:6332,name:"Saddle Dr"},city:"Adelaide",state:"South Australia",country:"Australia",postcode:4849,coordinates:{latitude:"71.6515",longitude:"-86.7679"},timezone:{offset:"+9:00",description:"Tokyo, Seoul, Osaka, Sapporo, Yakutsk"}},email:"tiffany.daniels@example.com",login:{uuid:"652cda31-1cdd-4bd1-b955-fe32eab09add",username:"purplekoala533",password:"hawaiian",salt:"ZZDTW7PF",md5:"60cea3ef0a8dba049280f7f863f67f76",sha1:"bd161ebd894f589090efe3efc52d122d27aff4b1",sha256:"70c0c95ab4f162dff321274d1a36cc3d09a5cb75860de06bdd9f6b5b2fa631b3"},dob:{date:"1966-05-10T02:47:44.008Z",age:54},registered:{date:"2010-04-16T12:59:19.921Z",age:10},phone:"09-8976-9580",cell:"0412-439-911",id:{name:"TFN",value:"355508982"},picture:{large:"https://randomuser.me/api/portraits/women/9.jpg",medium:"https://randomuser.me/api/portraits/med/women/9.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/women/9.jpg"},nat:"AU"},{gender:"male",name:{title:"Mr",first:"Donald",last:"Alexander"},location:{street:{number:3358,name:"Poplar Dr"},city:"Port Macquarie",state:"Northern Territory",country:"Australia",postcode:7898,coordinates:{latitude:"-4.2876",longitude:"87.0270"},timezone:{offset:"+9:30",description:"Adelaide, Darwin"}},email:"donald.alexander@example.com",login:{uuid:"cfa86977-671f-4dec-ae8c-02475ff12588",username:"angrymeercat830",password:"4545",salt:"yBoY2PFF",md5:"f1e6a4dafb5556f37494efd41a5171ee",sha1:"f6e5c79165f60b34f70f046cf96ddc60ccc42e2b",sha256:"e508b844b7b045eaffadaa6d3ccc1f501efda8610eac302cd0cd5b124095a4f8"},dob:{date:"1974-01-05T05:38:45.437Z",age:46},registered:{date:"2016-06-11T03:28:11.974Z",age:4},phone:"08-3625-1879",cell:"0476-914-017",id:{name:"TFN",value:"583374023"},picture:{large:"https://randomuser.me/api/portraits/men/37.jpg",medium:"https://randomuser.me/api/portraits/med/men/37.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/men/37.jpg"},nat:"AU"},{gender:"male",name:{title:"Mr",first:"Levi",last:"Hudson"},location:{street:{number:4545,name:"Plum St"},city:"Albany",state:"Northern Territory",country:"Australia",postcode:6392,coordinates:{latitude:"5.6824",longitude:"-153.0236"},timezone:{offset:"-12:00",description:"Eniwetok, Kwajalein"}},email:"levi.hudson@example.com",login:{uuid:"ded47b14-0e5a-4a40-a73d-da88009c8c5e",username:"beautifulsnake588",password:"method",salt:"hSvFREGJ",md5:"1f005af4678ce97d91e1ce1ee40612e1",sha1:"06b6e1c7c5bf736997565a8ab36c122001d945a2",sha256:"c9e9b4346cfa0d3f04de698ecd1df28073c04f290855716e240111e7ba7595f6"},dob:{date:"1992-12-17T10:51:38.241Z",age:28},registered:{date:"2007-06-15T12:30:08.022Z",age:13},phone:"03-5242-0616",cell:"0450-309-211",id:{name:"TFN",value:"726061062"},picture:{large:"https://randomuser.me/api/portraits/men/42.jpg",medium:"https://randomuser.me/api/portraits/med/men/42.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/men/42.jpg"},nat:"AU"},{gender:"female",name:{title:"Mrs",first:"Abigail",last:"Patterson"},location:{street:{number:106,name:"Hamilton Ave"},city:"Orange",state:"Victoria",country:"Australia",postcode:4663,coordinates:{latitude:"-25.7218",longitude:"36.2920"},timezone:{offset:"-5:00",description:"Eastern Time (US & Canada), Bogota, Lima"}},email:"abigail.patterson@example.com",login:{uuid:"482cbeba-f261-42b9-945b-7034cf6a707a",username:"crazycat943",password:"3000gt",salt:"y4kjSCKZ",md5:"789f7fc6dd7a132215212687f306397b",sha1:"739c314129b382ba5801bab82c463f1656fbc59c",sha256:"8bf95f248010bf2289c1692e44d01ad1f30eadb0e49fd2f8d2eebfd2d025a1ac"},dob:{date:"1960-08-23T03:34:54.735Z",age:60},registered:{date:"2005-04-05T18:04:55.771Z",age:15},phone:"05-4923-6614",cell:"0432-946-251",id:{name:"TFN",value:"157138693"},picture:{large:"https://randomuser.me/api/portraits/women/71.jpg",medium:"https://randomuser.me/api/portraits/med/women/71.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/women/71.jpg"},nat:"AU"},{gender:"male",name:{title:"Mr",first:"Jerome",last:"Fowler"},location:{street:{number:458,name:"Paddock Way"},city:"Townsville",state:"South Australia",country:"Australia",postcode:7181,coordinates:{latitude:"-84.4179",longitude:"-82.4731"},timezone:{offset:"+5:00",description:"Ekaterinburg, Islamabad, Karachi, Tashkent"}},email:"jerome.fowler@example.com",login:{uuid:"31b58b78-991d-48e4-a593-73092a8050f3",username:"lazyleopard853",password:"homepage-",salt:"hBisojBA",md5:"98adb3dcae56e6520e9eda10de369900",sha1:"9670dc7a822adea938f5a994fc9278c0f8dcaa8b",sha256:"a15082dbc075b248cd277e8448d33c56e2bf2712dcb39e1a08eb1e2fc513b481"},dob:{date:"1990-10-02T22:08:08.754Z",age:30},registered:{date:"2014-08-11T17:26:06.868Z",age:6},phone:"05-0409-3900",cell:"0477-587-572",id:{name:"TFN",value:"699475327"},picture:{large:"https://randomuser.me/api/portraits/men/18.jpg",medium:"https://randomuser.me/api/portraits/med/men/18.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/men/18.jpg"},nat:"AU"},{gender:"male",name:{title:"Mr",first:"Glen",last:"Reed"},location:{street:{number:5899,name:"Lakeview St"},city:"Maitland",state:"Western Australia",country:"Australia",postcode:9506,coordinates:{latitude:"-66.5500",longitude:"-130.2632"},timezone:{offset:"-9:00",description:"Alaska"}},email:"glen.reed@example.com",login:{uuid:"b3a09109-4afa-40a6-805a-cf6e22b79d04",username:"ticklishrabbit770",password:"dayton",salt:"UKwtHcQn",md5:"15610285636e6ad0e9e8bb457a429269",sha1:"87f038a70433afa62d7cd084ebd6813e5bb5188e",sha256:"9c4da1e9492087581fcfdc185fe88e4cf8112d6664e3e9a680cc891597d91f90"},dob:{date:"1977-09-23T20:34:37.755Z",age:43},registered:{date:"2009-10-15T10:01:06.293Z",age:11},phone:"05-2422-4815",cell:"0448-879-961",id:{name:"TFN",value:"977910200"},picture:{large:"https://randomuser.me/api/portraits/men/98.jpg",medium:"https://randomuser.me/api/portraits/med/men/98.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/men/98.jpg"},nat:"AU"},{gender:"female",name:{title:"Ms",first:"Loretta",last:"Mason"},location:{street:{number:3400,name:"Plum St"},city:"Nowra",state:"Northern Territory",country:"Australia",postcode:8809,coordinates:{latitude:"-67.8085",longitude:"157.4604"},timezone:{offset:"+8:00",description:"Beijing, Perth, Singapore, Hong Kong"}},email:"loretta.mason@example.com",login:{uuid:"42b96f44-9a26-454e-b939-329b26ebf57e",username:"browntiger764",password:"tail",salt:"lQXg2HXK",md5:"79ae28ec74df7c4e12203899feb28a84",sha1:"ba8c41a7bd805ac60b426e2aa642721f5182fe42",sha256:"784c2b1cc392fe7f49011ff9ed0535756652c1b462ade027c3d806ffeb4450b1"},dob:{date:"1986-08-25T09:35:31.300Z",age:34},registered:{date:"2006-03-03T07:01:28.586Z",age:14},phone:"02-8152-0609",cell:"0402-559-326",id:{name:"TFN",value:"487436253"},picture:{large:"https://randomuser.me/api/portraits/women/71.jpg",medium:"https://randomuser.me/api/portraits/med/women/71.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/women/71.jpg"},nat:"AU"},{gender:"female",name:{title:"Miss",first:"Anne",last:"Torres"},location:{street:{number:6353,name:"Elgin St"},city:"Shepparton",state:"Tasmania",country:"Australia",postcode:8889,coordinates:{latitude:"-48.0961",longitude:"-2.7378"},timezone:{offset:"-3:30",description:"Newfoundland"}},email:"anne.torres@example.com",login:{uuid:"4a09d9b1-7243-4276-b88d-db38071e4f11",username:"blackfrog262",password:"overkill",salt:"OIafsYVF",md5:"6d16b06665d9326ba7f41bd2ff971b96",sha1:"8cae0c1da6146bd7ced4e9f8b6c7608a29c62cd6",sha256:"0b044b56a1cf8d9572113df1bc3183611b45b5b0f1f0dde05c0bcd0fc659353e"},dob:{date:"1949-07-30T12:20:50.284Z",age:71},registered:{date:"2002-08-07T13:33:04.954Z",age:18},phone:"02-9442-3367",cell:"0420-832-809",id:{name:"TFN",value:"685829913"},picture:{large:"https://randomuser.me/api/portraits/women/57.jpg",medium:"https://randomuser.me/api/portraits/med/women/57.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/women/57.jpg"},nat:"AU"},{gender:"male",name:{title:"Mr",first:"Lance",last:"Hansen"},location:{street:{number:3183,name:"Forest Ln"},city:"Darwin",state:"Queensland",country:"Australia",postcode:8511,coordinates:{latitude:"39.9487",longitude:"84.2049"},timezone:{offset:"+4:30",description:"Kabul"}},email:"lance.hansen@example.com",login:{uuid:"9ec9b39f-f6c9-454c-b866-b1979f0b9558",username:"lazyduck989",password:"1120",salt:"CTbJQZ3q",md5:"12ceed676a954e65b080a1f042d9e5a1",sha1:"d6302813b299c8b6ef2e9ea9114a11134c7625b1",sha256:"3459193ba0fa98adf4b1bb8c9b7b865a07666f435c8b693f5bcf245ba1207e53"},dob:{date:"1983-08-01T13:32:53.674Z",age:37},registered:{date:"2012-01-09T17:34:55.529Z",age:8},phone:"01-2643-3720",cell:"0416-336-636",id:{name:"TFN",value:"326417263"},picture:{large:"https://randomuser.me/api/portraits/men/9.jpg",medium:"https://randomuser.me/api/portraits/med/men/9.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/men/9.jpg"},nat:"AU"},{gender:"female",name:{title:"Ms",first:"Kelly",last:"Andrews"},location:{street:{number:5467,name:"E North St"},city:"Coffs Harbour",state:"Australian Capital Territory",country:"Australia",postcode:5769,coordinates:{latitude:"-82.3089",longitude:"66.7911"},timezone:{offset:"-3:30",description:"Newfoundland"}},email:"kelly.andrews@example.com",login:{uuid:"34dcb96f-8374-446e-b87c-ebeea1ebce20",username:"heavybutterfly458",password:"again",salt:"vLEY6gVj",md5:"530ed25e9ca4c612f16639dc3aa0ccbb",sha1:"d0bce553c22363b0cf77131156f9abbff82686ca",sha256:"e058c1ecda370dd0826aed1c8254e4775a41abd27c0bd5703004fb720acfd61b"},dob:{date:"1995-12-05T12:50:59.424Z",age:25},registered:{date:"2018-02-22T06:55:10.611Z",age:2},phone:"01-4141-0722",cell:"0469-356-785",id:{name:"TFN",value:"118976015"},picture:{large:"https://randomuser.me/api/portraits/women/30.jpg",medium:"https://randomuser.me/api/portraits/med/women/30.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/women/30.jpg"},nat:"AU"},{gender:"male",name:{title:"Mr",first:"Nelson",last:"Martinez"},location:{street:{number:9138,name:"Wheeler Ridge Dr"},city:"Geraldton",state:"Australian Capital Territory",country:"Australia",postcode:6423,coordinates:{latitude:"-37.7344",longitude:"-159.9617"},timezone:{offset:"-6:00",description:"Central Time (US & Canada), Mexico City"}},email:"nelson.martinez@example.com",login:{uuid:"1fd898cd-5a95-4f3b-81d8-c9e3ebc3b4d2",username:"organicbird958",password:"hhhh",salt:"SNjU2hVT",md5:"adb24cca78300ee3aa0da6ba9da45302",sha1:"d6c6a5b4843db75a3db6e7823791cf6966ebf347",sha256:"9dd4250691f265112418fd3ea6825befdcff533df4f514c8cc7be690a52fad0c"},dob:{date:"1973-10-26T13:41:44.822Z",age:47},registered:{date:"2014-07-22T17:11:11.383Z",age:6},phone:"06-9898-0383",cell:"0473-545-718",id:{name:"TFN",value:"579217782"},picture:{large:"https://randomuser.me/api/portraits/men/41.jpg",medium:"https://randomuser.me/api/portraits/med/men/41.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/men/41.jpg"},nat:"AU"},{gender:"female",name:{title:"Mrs",first:"Bertha",last:"Young"},location:{street:{number:9493,name:"Harrison Ct"},city:"Tamworth",state:"Queensland",country:"Australia",postcode:7640,coordinates:{latitude:"16.8700",longitude:"-95.1265"},timezone:{offset:"-3:00",description:"Brazil, Buenos Aires, Georgetown"}},email:"bertha.young@example.com",login:{uuid:"090f0389-f649-47db-a593-95eed0e25a4b",username:"blueduck569",password:"millie",salt:"oRKkVbIq",md5:"a4cd35a78e2e4d7ac4be384b860e89b9",sha1:"27ca5c215f47bf69fd2fae4dee29a19731edc488",sha256:"966571c5a3096a651c5170e480907f60fe1e136613a5a2be011aafbcf42fe7e7"},dob:{date:"1994-09-24T04:42:39.836Z",age:26},registered:{date:"2006-02-15T10:08:00.060Z",age:14},phone:"03-3134-1059",cell:"0494-435-316",id:{name:"TFN",value:"886839861"},picture:{large:"https://randomuser.me/api/portraits/women/13.jpg",medium:"https://randomuser.me/api/portraits/med/women/13.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/women/13.jpg"},nat:"AU"},{gender:"female",name:{title:"Miss",first:"Leah",last:"Gregory"},location:{street:{number:9702,name:"Fairview St"},city:"Perth",state:"Victoria",country:"Australia",postcode:5476,coordinates:{latitude:"43.3632",longitude:"-135.2527"},timezone:{offset:"+1:00",description:"Brussels, Copenhagen, Madrid, Paris"}},email:"leah.gregory@example.com",login:{uuid:"a8014cc8-a252-4109-8f77-455ab40d64d1",username:"ticklishpeacock234",password:"wearing",salt:"0WFD47fz",md5:"6ed971b610bff1bf95575b80ae881865",sha1:"c28abbf877cb014f8440398e0d13fb2cee59cff5",sha256:"15311fc41198c47e0193835d6258f62d1399e7bfa889ddfadab95b58bf9b0d64"},dob:{date:"1971-10-26T18:17:03.270Z",age:49},registered:{date:"2014-08-03T13:58:18.187Z",age:6},phone:"08-3045-4107",cell:"0483-178-823",id:{name:"TFN",value:"581998311"},picture:{large:"https://randomuser.me/api/portraits/women/79.jpg",medium:"https://randomuser.me/api/portraits/med/women/79.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/women/79.jpg"},nat:"AU"},{gender:"male",name:{title:"Mr",first:"Erik",last:"Mason"},location:{street:{number:6487,name:"Hogan St"},city:"Launceston",state:"Australian Capital Territory",country:"Australia",postcode:6989,coordinates:{latitude:"77.9153",longitude:"56.6760"},timezone:{offset:"-10:00",description:"Hawaii"}},email:"erik.mason@example.com",login:{uuid:"d8c3ef25-e609-45a5-857e-7b09bdd4073f",username:"heavyfrog561",password:"deadspin",salt:"5HI9b0kM",md5:"87a48f2209ad4b202267aa09d656d127",sha1:"578dd1ace3831ea7723b0061bc370187c75c3768",sha256:"affe1012d4156be6dce05db20ed446d84186f80b36a7b8ceba36a40490034160"},dob:{date:"1974-09-14T03:42:34.725Z",age:46},registered:{date:"2004-12-10T13:24:09.663Z",age:16},phone:"00-5246-3575",cell:"0476-002-177",id:{name:"TFN",value:"315071614"},picture:{large:"https://randomuser.me/api/portraits/men/68.jpg",medium:"https://randomuser.me/api/portraits/med/men/68.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/men/68.jpg"},nat:"AU"},{gender:"female",name:{title:"Ms",first:"Linda",last:"Kelly"},location:{street:{number:5764,name:"Green Rd"},city:"Ballarat",state:"Victoria",country:"Australia",postcode:8189,coordinates:{latitude:"39.5382",longitude:"21.5322"},timezone:{offset:"-3:30",description:"Newfoundland"}},email:"linda.kelly@example.com",login:{uuid:"1239645c-303a-4659-b595-3972b4b6d5f8",username:"organicwolf774",password:"pass1234",salt:"hWo5a65v",md5:"c10e709dee90c3b8527efe890bcdd0fc",sha1:"0f17c1b1d75870e19cd4b2da9fb2959af17be600",sha256:"381e981940067a6a9126ebb260af1b4e3bbeb9e081bf9631a4f469bc1a0815f5"},dob:{date:"1980-03-13T01:33:12.185Z",age:40},registered:{date:"2002-09-03T09:46:35.705Z",age:18},phone:"00-4483-5042",cell:"0499-877-947",id:{name:"TFN",value:"158345344"},picture:{large:"https://randomuser.me/api/portraits/women/53.jpg",medium:"https://randomuser.me/api/portraits/med/women/53.jpg",thumbnail:"https://randomuser.me/api/portraits/thumb/women/53.jpg"},nat:"AU"}],info:{seed:"1226d1ce4a2bb0df",results:16,page:1,version:"1.3"}}},191:function(e,t,a){e.exports=a(505)},226:function(e,t,a){},237:function(e,t,a){},393:function(e,t,a){},497:function(e,t,a){},498:function(e,t,a){},500:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){},503:function(e,t,a){},504:function(e,t,a){},505:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),i=a(24),r=a.n(i),s=a(41),l=a(20),c=a(19),u=a.n(c),d="user",m={me:null};function p(e){return function(t){var a=weui.loading("\u52a0\u8f7d\u4e2d...");return u.a.get("/me").then(function(n){var o=n.data;a.hide(),e&&e(o),t({type:d+"/setState",payload:{me:o.body}})}).catch(function(t){a.hide(),e&&e({error:t})})}}var h="order",f={items:[],item:null,order_id:null,showDetail:!1,order_no:null,loadingDetail:!0,firstLoading:!0};function v(e,t){return function(a){return a({type:h+"/setState",payload:{item:null,loadingDetail:!0}}),u.a.get("/order/"+e).then(function(e){var n=e.data;t&&t(n.body),a({type:h+"/setState",payload:{item:n.body,loadingDetail:!1}})}).catch(function(e){a({type:h+"/setState",payload:{item:null,loadingDetail:!1}}),weui.topTips(e),t&&t({error:e})})}}var g="instance",b={items:[],item:null,loading:!1,error:null,showVipLines:!1,selectedVipType:null,showVipLinesActionSheet:!1,timestamp:null,showAddService:!1,firstLoading:!0};function y(e,t){return function(a){E();var n=weui.loading("\u5220\u9664\u4e2d...",{showMask:!0});return u.a.delete("/compute/instance/".concat(e),null).then(function(e){e.data;n.hide(),t&&t()}).catch(function(e){n.hide(),t&&t()})}}function _(e,t){console.log("saveInstanceServices",e.id);var a=e.services,n=weui.loading("\u4fdd\u5b58\u4e2d...");return function(o){return u.a.put("/compute/instance/services/".concat(e.id),{services:a}).then(function(e){var a=e.data;n.hide(),t&&t(a)}).catch(function(e){n.hide(),weui.topTips(e),t&&t({error:e})})}}function w(e,t){return console.log("getInstance",e),function(a){return u.a.get("/compute/instance/".concat(e),{timeout:25e3}).then(function(n){var o=n.data;t?t(o):(console.log("res",e,o.body.ip,o.body.status),"OK"===o.body.status||"RUNNING"===o.body.status?a(k()):setTimeout(function(){a(w(e))},1400))}).catch(function(t){setTimeout(function(){a(w(e))},1400)})}}function E(){window.__time_id_fetch_instance&&clearInterval(window.__time_id_fetch_instance)}function k(){return function(e){return u.a.get("/compute/instances").then(function(t){var a=t.data;e({type:g+"/setState",payload:{items:a.body.rows,firstLoading:!1}}),E(),a.body,window.__time_id_fetch_instance=setInterval(function(){a.body},3e3)}).catch(function(t){e({type:g+"/setState",payload:{firstLoading:!1}})})}}window.globalObject.delays={};var S=a(99),T="payment",C={items:[]};function O(e,t){var a=e.payment_type,n=e.payment_id;return function(e){return u.a.get("/payment/"+a+"/check/".concat(n)).then(function(e){var a=e.data;t(a)}).catch(function(e){t({error:e})})}}var j="line",I={items:[]};var N="content",R={items:[],item:null,firstLoading:!0,loadingDetail:!0};var L={loading:!0,access_token:null,constant:null};var A="shadowsocks",P={current_connect_status:null,current_connect_id:window.localStorage.getItem("current_connect_id"),alertbar:{visible:!1,type:"",text:""}};var D="route",x={page:{},breadcrumb_actions:[],index:!0,page_close_id:null,pages_history:[],go_1:!1,page_id:"index"};var M="eth",B={payment:null};var F=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d+"/setState":return Object(l.a)({},e,t.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/setState":case"app/logged":return Object(l.a)({},e,t.payload);default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h+"/setState":return Object(l.a)({},e,t.payload);default:return e}},instance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"instance/setState":return Object(l.a)({},e,t.payload);default:return e}},payment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T+"/setState":return Object(l.a)({},e,t.payload);default:return e}},route:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,a=e.keys;switch(t.type){case D+"/setState":return Object(l.a)({},e,t.payload);case D+"/init":return Object(l.a)({},e,{page:{}});case D+"/hideBreadcrumb_actions":return Object(l.a)({},e,{breadcrumb_actions:[]});case D+"/showBreadcrumb_actions":return Object(l.a)({},e,{breadcrumb_actions:t.payload});case D+"/onClosePage":return Object(l.a)({},e,t.payload);case D+"/hidePage":var n=a.pop();console.log("hidePage",n,a);var o={};return o[n]={visible:!1,id:n},Object(l.a)({},e,{page:Object(l.a)({},e.page,o),page_close_id:null,index:!0,keys:a});case D+"/showPage":var i=t.payload.id,r={};return console.log("showPage",a,i),r[i]=Object(l.a)({visible:!0,id:i},t.payload),Object(l.a)({},e,{page:Object(l.a)({},e.page,r),page_close_id:null,index:!1,keys:a});default:return e}},line:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j+"/setState":return Object(l.a)({},e,t.payload);default:return e}},shadowsocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A+"/setState":return Object(l.a)({},e,t.payload);default:return e}},eth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M+"/setState":return Object(l.a)({},e,t.payload);default:return e}},content:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N+"/setState":return Object(l.a)({},e,t.payload);default:return e}}}),V=a(174),G=a(21),U=a(176),H=a.n(U);function z(e){return e<10?"0"+e:e}function q(e){var t=new Date;return t.setTime(e),t.getFullYear()+"\u5e74"+z(t.getMonth()+1)+"\u6708"+z(t.getDate())+"\u65e5 "+z(t.getHours())+":"+z(t.getMinutes())}function W(e,t,a){var n="",o=t,i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];e&&(o=Math.round(Math.random()*(a-t))+t);for(var r=0;r<o;r++){n+=i[Math.round(Math.random()*(i.length-1))]}return n}function J(e){return H()(e,!0)}function Y(){var e=localStorage.getItem("access_token");return u.a.defaults.headers.common.Authorization=e||void 0,e}function Q(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function Z(e){localStorage.setItem("access_token",e),u.a.defaults.headers.common.Authorization=e}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#login";if(localStorage.removeItem("access_token"),u.a.defaults.headers.common.Authorization=null,!(window.location.href.indexOf("?redirect=")>0))if(window.current_app)try{window.current_app.viewManagers.main.context.app.transitionTo("main:login",{transition:"show-from-right"})}catch(a){console.error(a),window.location.href="".concat(e)}else{var t="".concat(e,"?redirect=")+encodeURIComponent(window.location.href.replace("#login",""));console.log(t),window.location.href=t,window.login_reload&&window.location.reload()}}function X(e,t){var a=[],n={};for(var o in e){var i=e[o].split("-"),r="".concat(i[0],"-").concat(i[1]);n[i[0]]||(n[i[0]]={}),!n[i[0]][i[1]]&&t[r]&&(n[i[0]][i[1]]=[]),t[r]&&n[i[0]][i[1]].push(i[2])}for(var s in Object.keys(n)){var l=Object.keys(n)[s],c={},u=[];for(var d in Object.keys(n[l])){var m=Object.keys(n[l])[d],p={};p.value=m;var h="".concat(l,"-").concat(m);t[h]&&(p.label=t[h],p.children=n[l][m].map(function(e){return{value:e,label:e}}),u.push(p))}u.length>0&&(c.value=l,c.label=t[l],c.children=u,a.push(c))}return a}function $(e){var t=e.split("-");return window.globalObject.constant.zone_names[t[0]+"-"+t[1]]+"-"+t[2]}function ee(e,t){var a=document.createElement("a");a.setAttribute("href",e),t&&a.setAttribute("target",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}var te=function(e,t,a){var n;function o(){var o,i;a.userAgent.match(/ipad|iphone/i)?((o=t.createRange()).selectNodeContents(n),(i=e.getSelection()).removeAllRanges(),i.addRange(o),n.setSelectionRange(0,999999)):n.select()}return{copy:function(e){!function(e){(n=t.createElement("textArea")).value=e,t.body.appendChild(n)}(e),o(),t.execCommand("copy"),t.body.removeChild(n)}}}(window,document,navigator);function ae(){var e=navigator.userAgent.toLowerCase();return/(iphone|ipad|ipod|ios)/i.test(e)?"ios":/(macintosh|mac os x)/i.test(e)?"mac":/(windows|win32)/i.test(e)?"windows":/(android)/i.test(e)?"android":/(cordova)/i.test(e)?"cordova":"web"}var ne=function(e){var t=window.globalObject.constant.y_deng.title;document.title=(e?e+" - ":"")+t};var oe=localStorage.getItem("check_token_sec_gap"),ie=!1,re=function(){u.a.defaults.timeout=15e3,u.a.interceptors.request.use(function(e){var t=e.url;if(!1===ie&&0===t.indexOf("/")&&0!==t.indexOf("/auth")&&0!==t.indexOf("/token")){var a=localStorage.getItem("last_request"),n=(new Date).getTime();oe=oe?parseInt(oe):7200,n-a>1e3*oe&&(ie=!0,u.a.post("/token/refresh").then(function(e){if(e){var t=e.data,a=t.body;if(200===t.code){var o=a.access_token,i=a.check_token_sec_gap;localStorage.setItem("access_token",o),localStorage.setItem("last_request",n),i||(i=oe),localStorage.setItem("check_token_sec_gap",i)}}}).catch(function(e){ie=!1}))}var o=window.globalObject.base_api_url;return t&&0===t.indexOf("http")?e.url="".concat(t):e.url="".concat(o).concat(t),window.globalObject.constant.y_deng&&e.url.indexOf(window.globalObject.constant.y_deng.local_server)>=0&&(e.headers.common={}),e},function(e){return console.error("request",e),Promise.reject(e)}),u.a.interceptors.response.use(function(e){return e.data&&e.data.code&&403===e.data.code?Promise.reject(Error("\u6ca1\u6709\u6743\u9650")):e},function(e){if(console.error("response",e.message),!(e.message.indexOf("401")>0||e.response&&401===e.response.status))return Promise.reject(e);localStorage.removeItem("access_token"),K()})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=a(3),le=a(5),ce=a(4),ue=a(2),de=a(6),me=["line","instance","order","plan","account"],pe=a(177),he=a.n(pe),fe=a(17),ve=a.n(fe),ge=a(7),be=a.n(ge);be.a.number,be.a.number,be.a.number,be.a.number,be.a.bool,be.a.bool,be.a.func,be.a.func,be.a.func,be.a.func,be.a.func,be.a.func,be.a.func,be.a.func,be.a.func;var ye=a(100);function _e(e){return e?{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY}:{}}var we=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ce.a)(t).call(this,e))).displayName="Tappable",a.state={isActive:!1,touchActive:!1,pinchActive:!1},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentWillUnmount",value:function(){this.cleanupScrollDetection(),this.cancelPressDetection(),this.clearActiveTimeout()}},{key:"processEvent",value:function(e){this.props.preventDefault&&e.preventDefault(),this.props.stopPropagation&&e.stopPropagation()}},{key:"onTouchStart",value:function(e){var t=this;this.props.onTouchStart&&!1===this.props.onTouchStart(e)||(this.processEvent(e),window._blockMouseEvents=!0,1===e.touches.length?(this._initialTouch=this._lastTouch=_e(e.touches[0]),this.initScrollDetection(),this.initPressDetection(e,this.endTouch),this._activeTimeout=setTimeout(function(){t.makeActive()},this.props.active_delay)):this.onPinchStart&&(this.props.onPinchStart||this.props.onPinchMove||this.props.onPinchEnd)&&2===e.touches.length&&this.onPinchStart(e))}},{key:"makeActive",value:function(){this.clearActiveTimeout(),this.setState({isActive:!0})}},{key:"clearActiveTimeout",value:function(){clearTimeout(this._activeTimeout),this._activeTimeout=!1}},{key:"initScrollDetection",value:function(){this._scrollPos={top:0,left:0},this._scrollParents=[],this._scrollParentPos=[];for(var e=r.a.findDOMNode(this);e;)(e.scrollHeight>e.offsetHeight||e.scrollWidth>e.offsetWidth)&&(this._scrollParents.push(e),this._scrollParentPos.push(e.scrollTop+e.scrollLeft),this._scrollPos.top+=e.scrollTop,this._scrollPos.left+=e.scrollLeft),e=e.parentNode}},{key:"calculateMovement",value:function(e){return{x:Math.abs(e.clientX-this._initialTouch.clientX),y:Math.abs(e.clientY-this._initialTouch.clientY)}}},{key:"detectScroll",value:function(){for(var e={top:0,left:0},t=0;t<this._scrollParents.length;t++)e.top+=this._scrollParents[t].scrollTop,e.left+=this._scrollParents[t].scrollLeft;return!(e.top===this._scrollPos.top&&e.left===this._scrollPos.left)}},{key:"cleanupScrollDetection",value:function(){this._scrollParents=void 0,this._scrollPos=void 0}},{key:"initPressDetection",value:function(e,t){this.props.onPress&&(this._pressTimeout=setTimeout(function(){this.props.onPress(e),t()}.bind(this),this.props.pressDelay))}},{key:"cancelPressDetection",value:function(){clearTimeout(this._pressTimeout)}},{key:"onTouchMove",value:function(e){if(this._initialTouch){if(this.processEvent(e),this.detectScroll())return this.endTouch(e);this.props.onTouchMove&&this.props.onTouchMove(e),this._lastTouch=_e(e.touches[0]);var t=this.calculateMovement(this._lastTouch);(t.x>this.props.pressMoveThreshold||t.y>this.props.pressMoveThreshold)&&this.cancelPressDetection(),t.x>this.props.moveThreshold||t.y>this.props.moveThreshold?this.state.isActive?this.setState({isActive:!1}):this._activeTimeout&&this.clearActiveTimeout():this.state.isActive||this._activeTimeout||this.setState({isActive:!0})}else this._initialPinch&&2===e.touches.length&&this.onPinchMove&&(this.onPinchMove(e),e.preventDefault())}},{key:"onTouchEnd",value:function(e){var t=this;if(this._initialTouch){var a;this.processEvent(e);var n=this.calculateMovement(this._lastTouch);n.x<=this.props.moveThreshold&&n.y<=this.props.moveThreshold&&this.props.onTap&&(e.preventDefault(),a=function(){var a=t._scrollParents.map(function(e){return e.scrollTop+e.scrollLeft});t._scrollParentPos.some(function(e,t){return e!==a[t]})||t.props.onTap(e)}),this.endTouch(e,a)}else this.onPinchEnd&&this._initialPinch&&e.touches.length+e.changedTouches.length===2&&(this.onPinchEnd(e),e.preventDefault())}},{key:"endTouch",value:function(e,t){this.cancelPressDetection(),this.clearActiveTimeout(),e&&this.props.onTouchEnd&&this.props.onTouchEnd(e),this._initialTouch=null,this._lastTouch=null,t&&t(),this.state.isActive&&this.setState({isActive:!1})}},{key:"onMouseDown",value:function(e){window._blockMouseEvents?window._blockMouseEvents=!1:this.props.onMouseDown&&!1===this.props.onMouseDown(e)||(this.processEvent(e),this.initPressDetection(e,this.endMouseEvent),this._mouseDown=!0,this.setState({isActive:!0}))}},{key:"onMouseMove",value:function(e){!window._blockMouseEvents&&this._mouseDown&&(this.processEvent(e),this.props.onMouseMove&&this.props.onMouseMove(e))}},{key:"onMouseUp",value:function(e){!window._blockMouseEvents&&this._mouseDown&&(this.processEvent(e),this.props.onMouseUp&&this.props.onMouseUp(e),this.props.onTap&&this.props.onTap(e),this.endMouseEvent())}},{key:"onMouseOut",value:function(e){!window._blockMouseEvents&&this._mouseDown&&(this.processEvent(e),this.props.onMouseOut&&this.props.onMouseOut(e),this.endMouseEvent())}},{key:"endMouseEvent",value:function(){this.cancelPressDetection(),this._mouseDown=!1,this.setState({isActive:!1})}},{key:"cancelTap",value:function(){this.endTouch(),this._mouseDown=!1}},{key:"handlers",value:function(){return{onTouchStart:this.onTouchStart.bind(this),onTouchMove:this.onTouchMove.bind(this),onTouchEnd:this.onTouchEnd.bind(this),onMouseDown:this.onMouseDown.bind(this),onMouseUp:this.onMouseUp.bind(this),onMouseMove:this.onMouseMove.bind(this),onMouseOut:this.onMouseOut.bind(this)}}},{key:"render",value:function(){var e=this.props,t=e.class_base+(this.state.isActive?"-active":"-inactive");e.className&&(t+=" "+e.className),e.classes&&(t+=" "+(this.state.isActive?e.classes.active:e.classes.inactive));var a={};Object.assign(a,ye,e.style);var n=Object.assign({},e,{style:a,className:t,disabled:e.disabled,handlers:this.handlers},this.handlers());return delete n.onTap,delete n.onPress,delete n.onPinchStart,delete n.onPinchMove,delete n.onPinchEnd,delete n.moveThreshold,delete n.pressDelay,delete n.pressMoveThreshold,delete n.preventDefault,delete n.stopPropagation,delete n.component,delete n.handlers,e.component?o.a.createElement(e.component,n,e.children):null}}]),t}(n.Component);we.defaultProps=Object(l.a)({component:"span",class_base:"Tappable"},{active_delay:0,moveThreshold:100,pressDelay:1e3,pressMoveThreshold:5});var Ee=we,ke=Ee,Se=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"transitionTo",value:function(e,t){this.context.app.transitionTo(e,t)}},{key:"doTransition",value:function(){var e=Object.assign({viewProps:this.props.viewProps,transition:this.props.transition},this.props.options);console.info("Link to ",this.props.to,", using transition ",this.props.transition,", with props ",this.props.viewProps),this.transitionTo(this.props.to,e)}},{key:"render",value:function(){var e=ve()(this.props,"children","options","transition","viewProps");return o.a.createElement(ke,Object.assign({onTap:this.doTransition.bind(this)},e),this.props.children)}}]),t}(n.Component);Se.contextTypes={app:be.a.object};var Te=Se,Ce=a(11),Oe=a.n(Ce),je=(a(226),a(17)),Ie=a(11),Ne=a(24);var Re=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){this.props.scrollable&&this.props.scrollable.mount&&this.props.scrollable.mount(this)}},{key:"componentWillUnmount",value:function(){this.props.scrollable&&this.props.scrollable.unmount&&this.props.scrollable.unmount(this)}},{key:"render",value:function(){var e=this.props.direction;e||function(e){var t=!1;return o.a.Children.forEach(e,function(e){t||e&&e.type.shouldFillVerticalSpace&&(t=!!e.type.shouldFillVerticalSpace)}),t}(this.props.children)&&(e="column");var t=this.props.fill;("column"===e||this.props.scrollable)&&(t=!0);var a=this.props.align;"column"===e&&"top"===a&&(a="start"),"column"===e&&"bottom"===a&&(a="end"),"row"===e&&"left"===a&&(a="start"),"row"===e&&"right"===a&&(a="end");var n=Ie(this.props.className,{"Container--fill":t,"Container--direction-column":"column"===e,"Container--direction-row":"row"===e,"Container--align-center":"center"===a,"Container--align-start":"start"===a,"Container--align-end":"end"===a,"Container--justify-center":"center"===this.props.justify,"Container--justify-start":"start"===this.props.justify,"Container--justify-end":"end"===this.props.justify,"Container--justified":!0===this.props.justify,"Container--scrollable":this.props.scrollable}),i=je(this.props,"className","direction","fill","justify","scrollable");return o.a.createElement("div",Object.assign({className:n},i),this.props.children)}}]),t}(n.Component);Re.initScrollable=function(e){var t;e||(e={});var a={reset:function(){t={left:e.left||0,top:e.top||0}},getPos:function(){return{left:t.left,top:t.top}},mount:function(e){var a=Ne.findDOMNode(e);a.scrollLeft=t.left,a.scrollTop=t.top},unmount:function(e){var a=Ne.findDOMNode(e);t.left=a.scrollLeft,t.top=a.scrollTop}};return a.reset(),a};var Le=Re,Ae=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return o.a.createElement(Le,{fill:!0,className:"View ErrorView"},this.props.children)}}]),t}(n.Component),Pe=a(28),De=a.n(Pe);function xe(e){var t={};return o.a.Children.forEach(e,function(e){t[e.props.name]=e}),t}var Me=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=ve()(this.props,"children");return o.a.createElement("div",e,this.props.children)}}]),t}(n.Component);Me.shouldFillVerticalSpace=!0;var Be=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ce.a)(t).call(this,e))).state={views:xe(a.props.children),currentView:a.props.defaultView,options:{}},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){this.context.app.viewManagers[this.props.name]=this}},{key:"componentWillUnmount",value:function(){delete this.context.app.viewManagers[this.props.name]}},{key:"componentWillReceiveProps",value:function(e){this.setState({views:xe(e.children)}),e.name!==this.props.name&&(this.context.app.viewManagers[e.name]=this,delete this.context.app.viewManagers[this.props.name]),e.currentView&&e.currentView!==this.state.currentView&&this.transitionTo(e.currentView,{viewProps:e.viewProps})}},{key:"transitionTo",value:function(e,t){var a=this;"string"===typeof t&&(t={transition:t}),t||(t={}),this.activeTransitionOptions=t,this.context.app.viewManagerInTransition=this,this.props.onViewChange&&this.props.onViewChange(e),this.setState({currentView:e,options:t},function(){delete a.activeTransitionOptions,delete a.context.app.viewManagerInTransition})}},{key:"renderViewContainer",value:function(){var e=this.state.currentView;if(!e)return o.a.createElement(Ae,null,o.a.createElement("span",{className:"ErrorView__heading"},"ViewManager: ",this.props.name),o.a.createElement("span",{className:"ErrorView__text"},"Error: There is no current View."));var t=this.state.views[e];if(!t||!t.props.component)return o.a.createElement(Ae,null,o.a.createElement("span",{className:"ErrorView__heading"},'ViewManager: "',this.props.name,'"'),o.a.createElement("span",{className:"ErrorView__text"},'The View "',e,'" is invalid.'));var a=this.state.options||{},n=Oe()("View View--"+e,t.props.className),i=t.props.component,r=ve()(t.props,"component","className");Object.assign(r,a.viewProps,a.params,{dispatch:this.props.dispatch});var s=o.a.createElement(i,r);if(this.__lastRenderedView!==e){if(s.type.navigationBar&&s.type.getNavigation){var l=this.context.app,c=a.transition;l.viewManagerInTransition&&(c=l.viewManagerInTransition.activeTransitionOptions.transition),setTimeout(function(){l.navigationBars[s.type.navigationBar]&&l.navigationBars[s.type.navigationBar].updateWithTransition(s.type.getNavigation(r,l),c)},0)}this.__lastRenderedView=e}return o.a.createElement(Me,{className:n,key:e},s)}},{key:"render",value:function(){var e=Oe()("ViewManager",this.props.className),t=this.renderViewContainer(this.state.currentView,{viewProps:this.state.currentViewProps}),a="view-transition-instant",n=10,i=60;return this.state.options.transition&&(a="view-transition-"+this.state.options.transition,"fade"===this.state.options.transition?(n=10,i=340):(n="instant"===this.state.options.transition?50:500,i="instant"===this.state.options.transition?50:500)),o.a.createElement(De.a,{transitionName:a,transitionEnterTimeout:n,transitionLeaveTimeout:i,className:e,component:"div"},t)}}]),t}(n.Component);Be.contextTypes={app:be.a.object},Be.defaultProps={name:"__default"},Be.shouldFillVerticalSpace=!0;var Fe=Object(G.b)()(Be),Ve=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return this.props.component}}]),t}(o.a.Component),Ge=(be.a.object,a(100)),Ue=Ee,He=(Ge.default,{"reveal-from-right":-1,"show-from-left":-1,"show-from-right":1,"reveal-from-left":1}),ze={direction:0,fade:!1,leftArrow:!1,leftButtonDisabled:!1,leftIcon:"",leftLabel:"",leftAction:null,rightArrow:!1,rightButtonDisabled:!1,rightIcon:"",rightLabel:"",rightAction:null,title:""};function qe(e){var t=Object.assign({},ze);return e&&Object.assign(t,e),delete t.name,t}var We=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ce.a)(t).call(this,e))).state=qe(a.props),a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){this.props.name&&(this.context.app.navigationBars[this.props.name]=this)}},{key:"componentWillUnmount",value:function(){this.props.name&&delete this.context.app.navigationBars[this.props.name]}},{key:"componentWillReceiveProps",value:function(e){this.setState(qe(e)),e.name!==this.props.name&&(e.name&&(this.context.app.navigationBars[e.name]=this),this.props.name&&delete this.context.app.navigationBars[this.props.name])}},{key:"update",value:function(e){e=qe(e),this.setState(qe(e))}},{key:"updateWithTransition",value:function(e,t){(e=qe(e)).direction=He[t]||0,"fade"!==t&&"fade-contract"!==t&&"fade-expand"!==t||(e.fade=!0),this.setState(e)}},{key:"renderLeftButton",value:function(){var e=Oe()("NavigationBarLeftButton",{"has-arrow":this.state.leftArrow});return o.a.createElement(Ue,{onTap:this.state.leftAction,className:e,disabled:this.state.leftButtonDisabled,component:"button"},this.renderLeftArrow(),this.renderLeftLabel())}},{key:"renderLeftArrow",value:function(){var e="NavigationBarTransition-Instant";(this.state.fade||this.state.direction)&&(e="NavigationBarTransition-Fade");var t="NavigationBarTransition-Instant"===e?50:500,a=this.state.leftArrow?o.a.createElement("div",{className:"NavigationBarLeftArrow"}):null;return o.a.createElement(De.a,{transitionName:e,transitionEnterTimeout:t,transitionLeaveTimeout:t},a)}},{key:"renderLeftLabel",value:function(){var e="NavigationBarTransition-Instant";this.state.fade?e="NavigationBarTransition-Fade":this.state.direction>0?e="NavigationBarTransition-Forwards":this.state.direction<0&&(e="NavigationBarTransition-Backwards");var t="NavigationBarTransition-Instant"===e?50:500;return o.a.createElement(De.a,{transitionName:e,transitionEnterTimeout:t,transitionLeaveTimeout:t},o.a.createElement("div",{key:Date.now(),className:"NavigationBarLeftLabel"},this.state.leftLabel))}},{key:"renderTitle",value:function(){var e=this.state.title?o.a.createElement("div",{key:Date.now(),className:"NavigationBarTitle"},this.state.title):null,t="NavigationBarTransition-Instant";this.state.fade?t="NavigationBarTransition-Fade":this.state.direction>0?t="NavigationBarTransition-Forwards":this.state.direction<0&&(t="NavigationBarTransition-Backwards");var a="NavigationBarTransition-Instant"===t?50:500;return o.a.createElement(De.a,{transitionName:t,transitionEnterTimeout:a,transitionLeaveTimeout:a},e)}},{key:"renderRightButton",value:function(){var e="NavigationBarTransition-Instant";(this.state.fade||this.state.direction)&&(e="NavigationBarTransition-Fade");var t="NavigationBarTransition-Instant"===e?50:500,a=this.state.rightIcon||this.state.rightLabel?o.a.createElement(Ue,{key:Date.now(),onTap:this.state.rightAction,className:"NavigationBarRightButton",disabled:this.state.rightButtonDisabled,component:"button"},this.renderRightLabel(),this.renderRightIcon()):null;return o.a.createElement(De.a,{transitionName:e,transitionEnterTimeout:t,transitionLeaveTimeout:t},a)}},{key:"renderRightIcon",value:function(){if(!this.state.rightIcon)return null;var e=Oe()("NavigationBarRightIcon",this.state.rightIcon);return o.a.createElement("div",{className:e})}},{key:"renderRightLabel",value:function(){return this.state.rightLabel?o.a.createElement("div",{key:Date.now(),className:"NavigationBarRightLabel"},this.state.rightLabel):null}},{key:"render",value:function(){return o.a.createElement("div",{className:Oe()("NavigationBar",this.props.className)},this.renderLeftButton(),this.renderTitle(),this.renderRightButton())}}]),t}(n.Component);We.contextTypes={app:be.a.object};var Je=We,Ye=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="Alertbar",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Alertbar","Alertbar--"+this.props.type,{"Alertbar--animated":this.props.animated,"Alertbar--pulse":this.props.pulse},this.props.className),t=this.props.pulse?o.a.createElement("div",{className:"Alertbar__inner"},this.props.children):this.props.children,a=this.props.visible?o.a.createElement("div",{className:e},t):null;return this.props.animated?o.a.createElement(De.a,{transitionName:"Alertbar",transitionEnterTimeout:300,transitionLeaveTimeout:300,component:"div"},a):o.a.createElement("div",{className:e},t)}}]),t}(n.Component);Ye.defaultProps={type:"default"};var Qe=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="Button",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Button","Button--"+this.props.type,this.props.className),t=ve()(this.props,"type");return o.a.createElement(ke,Object.assign({},t,{className:e,component:"button"}))}}]),t}(n.Component);Qe.defaultProps={type:"default"};var Ze=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="ButtonGroup",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("ButtonGroup",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),Ke={weekdaysMin:["S","M","T","W","T","F","S"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],formatYearMonth:function(e,t){return e+" - "+(t+1)}};function Xe(e){var t=e.date||new Date,a=t.getFullYear(),n=t.getMonth();return{mode:"day",year:a,month:n,day:t.getDate(),displayYear:a,displayMonth:n,displayYearRangeStart:10*Math.floor(a/10)}}var $e=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ce.a)(t).call(this,e))).displayName="DatePicker",a.state=Xe(e),a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Xe(e))}},{key:"selectDay",value:function(e,t,a){this.setState({year:e,month:t,day:a}),this.props.onChange&&this.props.onChange(new Date(e,t,a))}},{key:"selectMonth",value:function(e){this.setState({displayMonth:e,mode:"day"})}},{key:"selectYear",value:function(e){this.setState({displayYear:e,displayYearRangeStart:10*Math.floor(e/10),mode:"month"})}},{key:"handlerTopBarTitleClick",value:function(){"day"===this.state.mode?this.setState({mode:"month"}):this.setState({mode:"day"})}},{key:"handleLeftArrowClick",value:function(){switch(this.state.mode){case"day":this.goPreviousMonth();break;case"month":case"year":this.goPreviousYearRange()}}},{key:"handleRightArrowClick",value:function(){switch(this.state.mode){case"day":this.goNextMonth();break;case"month":case"year":this.goNextYearRange()}}},{key:"goPreviousMonth",value:function(){0===this.state.displayMonth?this.setState({displayMonth:11,displayYear:this.state.displayYear-1}):this.setState({displayMonth:this.state.displayMonth-1})}},{key:"goNextMonth",value:function(){11===this.state.displayMonth?this.setState({displayMonth:0,displayYear:this.state.displayYear+1}):this.setState({displayMonth:this.state.displayMonth+1})}},{key:"goPreviousYear",value:function(){this.setState({displayYear:this.state.displayYear-1})}},{key:"goNextYear",value:function(){this.setState({displayYear:this.state.displayYear+1})}},{key:"goPreviousYearRange",value:function(){this.setState({displayYearRangeStart:this.state.displayYearRangeStart-10})}},{key:"goNextYearRange",value:function(){this.setState({displayYearRangeStart:this.state.displayYearRangeStart+10})}},{key:"renderWeeknames",value:function(){return Ke.weekdaysMin.map(function(e,t){return o.a.createElement("span",{key:e+t,className:"week-name"},e)})}},{key:"renderDays",value:function(){var e,t,a,n=this.state.displayYear,i=this.state.displayMonth,r=new Date,s=new Date(n,i+1,0).getDate(),l=new Date(n,i,0).getDate(),c=new Date(n,i,1).getDay(),u=[];for(e=0;e<c;e++){var d=l-(c-1-e);a=n,-1===(t=i-1)&&(t=11,a-=1),u.push(o.a.createElement(ke,{key:"p"+e,onTap:this.selectDay.bind(this,a,t,d),className:"day in-previous-month"},d))}var m=n===r.getFullYear()&&i===r.getMonth(),p=n===this.state.year&&i===this.state.month;for(e=1;e<=s;e++){var h=Oe()({day:!0,"is-today":m&&e===r.getDate(),"is-current":p&&e===this.state.day});u.push(o.a.createElement(ke,{key:e,onTap:this.selectDay.bind(this,n,i,e),className:h},e))}var f=c+s;for(e=1;e<=42-f;e++)a=n,12===(t=i+1)&&(t=0,a+=1),u.push(o.a.createElement(ke,{key:"n"+e,onTap:this.selectDay.bind(this,a,t,e),className:"day in-next-month"},e));return u}},{key:"renderMonths",value:function(){var e=this;return Ke.months.map(function(t,a){return o.a.createElement(ke,{key:t+a,className:Oe()("month-name",{"is-current":a===e.state.displayMonth}),onTap:e.selectMonth.bind(e,a)},t)})}},{key:"renderYears",value:function(){for(var e=[],t=this.state.displayYearRangeStart-1;t<this.state.displayYearRangeStart+11;t++)e.push(o.a.createElement(ke,{key:t,className:Oe()("year",{"is-current":t===this.state.displayYear}),onTap:this.selectYear.bind(this,t)},t));return e}},{key:"render",value:function(){var e="";switch(this.state.mode){case"day":e=Ke.formatYearMonth(this.state.displayYear,this.state.displayMonth);break;case"month":e="".concat(this.state.displayYearRangeStart," - ").concat(this.state.displayYearRangeStart+9)}return o.a.createElement("div",{className:Oe()("date-picker","mode-"+this.state.mode)},o.a.createElement("div",{className:"top-bar"},o.a.createElement(ke,{className:"left-arrow",onTap:this.handleLeftArrowClick.bind(this)}),o.a.createElement(ke,{className:"right-arrow",onTap:this.handleRightArrowClick.bind(this)}),o.a.createElement(ke,{className:"top-bar-title",onTap:this.handlerTopBarTitleClick.bind(this)},e)),"day"===this.state.mode&&[o.a.createElement("div",{key:"weeknames",className:"week-names-container"},this.renderWeeknames()),o.a.createElement("div",{key:"days",className:"days-container"},this.renderDays())],"month"===this.state.mode&&[o.a.createElement("div",{key:"years",className:"years-container"},this.renderYears()),o.a.createElement("div",{key:"months",className:"month-names-container"},this.renderMonths())])}}]),t}(n.Component);$e.defaultProps={date:new Date};var et=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="Popup",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"renderBackdrop",value:function(){return this.props.visible?o.a.createElement("div",{className:"Popup-backdrop"}):null}},{key:"renderDialog",value:function(){if(!this.props.visible)return null;var e=Oe()("Popup-dialog",this.props.className);return o.a.createElement("div",{className:e},this.props.children)}},{key:"render",value:function(){return o.a.createElement("div",{className:"Popup"},o.a.createElement(De.a,{transitionName:"Popup-dialog",transitionEnterTimeout:300,transitionLeaveTimeout:300,component:"div"},this.renderDialog()),o.a.createElement(De.a,{transitionName:"Popup-background",transitionEnterTimeout:300,transitionLeaveTimeout:300,component:"div"},this.renderBackdrop()))}}]),t}(n.Component);et.defaultProps={transition:"none"};var tt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="DatePickerPopup",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("DatePicker",this.props.className),t=ve()(this.props,"className","visible");return o.a.createElement(et,{className:e,visible:this.props.visible},o.a.createElement($e,t))}}]),t}(n.Component),at=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="FieldControl",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("FieldControl",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),nt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="FieldLabel",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("FieldLabel",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),ot=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="Group",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Group",{"Group--has-gutter-top":this.props.hastopgutter},this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),it=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="GroupBody",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Group__body",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),rt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="GroupFooter",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Group__footer",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),st=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="GroupHeader",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Group__header",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),lt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="GroupInner",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Group__inner",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),ct=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="Item",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Item",{"Item--has-disclosure-arrow":this.props.showDisclosureArrow},this.props.className),t=ve()(this.props,"children","className","showDisclosureArrow");return t.className=e,o.a.createElement(this.props.component,t,this.props.children)}}]),t}(n.Component);ct.defaultProps={component:"div"};var ut=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="ItemContent",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Item__content",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),dt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="ItemInner",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Item__inner",this.props.className);return o.a.createElement("div",Object.assign({className:e},this.props))}}]),t}(n.Component),mt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="ItemMedia",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()({Item__media:!0,"Item__media--icon":this.props.icon,"Item__media--avatar":this.props.avatar||this.props.avatarInitials,"Item__media--thumbnail":this.props.thumbnail},this.props.className),t=this.props.icon?o.a.createElement("div",{className:"Item__media__icon "+this.props.icon}):null,a=this.props.avatar||this.props.avatarInitials?o.a.createElement("div",{className:"Item__media__avatar"},this.props.avatar?o.a.createElement("img",{src:this.props.avatar}):this.props.avatarInitials):null,n=this.props.thumbnail?o.a.createElement("div",{className:"Item__media__thumbnail"},o.a.createElement("img",{src:this.props.thumbnail})):null;return o.a.createElement("div",{className:e},t,a,n)}}]),t}(n.Component),pt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="ItemNote",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Item__note","Item__note--"+this.props.type,this.props.className),t=this.props.label?o.a.createElement("div",{className:"Item__note__label"},this.props.label):null,a=this.props.icon?o.a.createElement("div",{className:"Item__note__icon "+this.props.icon}):null;return o.a.createElement("div",{className:e},t,a)}}]),t}(n.Component);pt.defaultProps={type:"default"};var ht=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="ItemSubTitle",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Item__subtitle",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),ft=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="ItemTitle",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Item__title",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),vt={email:!0,password:!0,search:!0,tel:!0,text:!0,url:!0},gt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="LabelInput",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.moveCursorToEnd()}},{key:"moveCursorToEnd",value:function(){var e=this.refs.focusTarget.getDOMNode(),t=e.value.length;vt.hasOwnProperty(e.type)&&(e.focus(),e.setSelectionRange(t,t))}},{key:"render",value:function(){var e=ve()(this.props,"alignTop","children","first","readOnly"),t=this.props.readOnly?o.a.createElement("div",{className:"field u-selectable"},this.props.value):o.a.createElement("input",Object.assign({ref:"focusTarget",className:"field",type:"text"},e));return o.a.createElement(ct,{alignTop:this.props.alignTop,selectable:this.props.disabled,className:this.props.className,component:"label"},o.a.createElement(dt,null,o.a.createElement(ke,{onTap:this.moveCursorToEnd,className:"FieldLabel"},this.props.label),o.a.createElement(at,null,t,this.props.children)))}}]),t}(n.Component),bt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="LabelSelect",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"renderOptions",value:function(){return this.props.options.map(function(e){return o.a.createElement("option",{key:"option-"+e.value,value:e.value},e.label)})}},{key:"render",value:function(){return o.a.createElement(ct,{className:this.props.className,component:"label"},o.a.createElement(dt,null,o.a.createElement(nt,null,this.props.label),o.a.createElement(at,null,o.a.createElement("select",{disabled:this.props.disabled,value:this.props.value,onChange:this.props.onChange,className:"select-field"},this.renderOptions()),o.a.createElement("div",{className:"select-field-indicator"},o.a.createElement("div",{className:"select-field-indicator-arrow"})))))}}]),t}(n.Component);bt.defaultProps={className:""};var yt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="LabelTextarea",a.defaultProps={rows:3},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()(this.props.className,"list-item","field-item","align-top",{"is-first":this.props.first,"u-selectable":this.props.disabled}),t=ve()(this.props,"children","className","disabled","first","label","readOnly"),a=this.props.readOnly?o.a.createElement("div",{className:"field u-selectable"},this.props.value):o.a.createElement("textarea",Object.assign({},t,{className:"field"}));return o.a.createElement("div",{className:e},o.a.createElement("label",{className:"item-inner"},o.a.createElement("div",{className:"field-label"},this.props.label),o.a.createElement("div",{className:"field-control"},a,this.props.children)))}}]),t}(n.Component),_t=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="LabelValue",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return o.a.createElement(ct,{alignTop:this.props.alignTop,className:this.props.className,component:"label"},o.a.createElement(dt,null,o.a.createElement("div",{className:"FieldLabel"},this.props.label),o.a.createElement(at,null,o.a.createElement("div",{className:Oe()("field",this.props.value?"u-selectable":"field-placeholder")},this.props.value||this.props.placeholder))))}}]),t}(n.Component),wt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="ListHeader",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("list-header",{sticky:this.props.sticky},this.props.className),t=ve()(this.props,"sticky");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),Et=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="PopupIcon",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("PopupIcon",{"is-spinning":this.props.spinning},this.props.name,this.props.type);return o.a.createElement("div",{className:e})}}]),t}(n.Component),kt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="RadioList",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"onChange",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.options.map(function(t,a){var n=Oe()("item-icon primary",t.icon),i=t.value===e.props.value?o.a.createElement(pt,{type:"primary",icon:"ion-checkmark"}):null,r=t.icon?o.a.createElement("div",{className:"item-media"},o.a.createElement("span",{className:n})):null;function s(){e.onChange(t.value)}return o.a.createElement(ke,{key:"option-"+a,onTap:s},o.a.createElement(ct,{key:"option-"+a,onTap:s},r,o.a.createElement(dt,null,o.a.createElement(ft,null,t.label),i)))});return o.a.createElement("div",null,t)}}]),t}(n.Component),St=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ce.a)(t).call(this,e))).displayName="SearchField",a.state={isFocused:!1},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"handleClear",value:function(){this.refs.input.focus(),this.props.onClear()}},{key:"handleCancel",value:function(){this.refs.input.blur(),this.props.onCancel()}},{key:"handleChange",value:function(e){this.props.onChange(e.target.value)}},{key:"handleBlur",value:function(e){this.setState({isFocused:!1})}},{key:"handleFocus",value:function(e){this.setState({isFocused:!0})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.refs.input;t.blur(),this.props.onSubmit(t.value)}},{key:"renderClear",value:function(){if(this.props.hideOnBlur){if(!this.props.value.length||!this.state.isFocused)return}else if(!this.props.value.length)return;return o.a.createElement(ke,{className:"SearchField__icon SearchField__icon--clear",onTap:this.handleClear.bind(this)})}},{key:"renderCancel",value:function(){var e;e=this.props.hideOnBlur?this.state.isFocused:this.state.isFocused||this.props.value;var t=Oe()("SearchField__cancel",{"is-visible":e});return o.a.createElement(ke,{className:t,onTap:this.handleCancel.bind(this)},this.props.cancelText)}},{key:"render",value:function(){var e=Oe()("SearchField","SearchField--"+this.props.type,{"is-focused":this.state.isFocused,"has-value":this.props.value},this.props.className);return o.a.createElement("form",{onSubmit:this.handleSubmit.bind(this),className:e},o.a.createElement("label",{className:"SearchField__field"},o.a.createElement("div",{className:"SearchField__placeholder"},o.a.createElement("span",{className:"SearchField__icon SearchField__icon--search"}),this.props.value.length?null:this.props.placeholder),o.a.createElement("input",{type:"search",ref:"input",value:this.props.value,onChange:this.handleChange.bind(this),onFocus:this.handleFocus.bind(this),onBlur:this.handleBlur.bind(this),className:"SearchField__input"}),this.renderClear()),this.renderCancel())}}]),t}(n.Component);St.defaultProps={type:"default",value:"",cancelText:"Cancel",hideOnBlur:!1};var Tt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="SegmentedControl",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"onChange",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=Oe()("SegmentedControl","SegmentedControl--"+this.props.type,{"SegmentedControl--inline":this.props.isInline,"SegmentedControl--has-gutter":this.props.hasGutter,"SegmentedControl--equal-widths":this.props.equalWidthSegments},this.props.className),t=this,a=this.props.options.map(function(e){var a=Oe()("SegmentedControl__item",{"is-selected":e.value===t.props.value});return o.a.createElement(ke,{key:"option-"+e.value,onTap:function(){t.onChange(e.value)},className:a},e.label)});return o.a.createElement("div",{className:e},a)}}]),t}(n.Component);Tt.defaultProps={type:"primary"};var Ct=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="Switch",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Switch","Switch--"+this.props.type,{"is-disabled":this.props.disabled,"is-on":this.props.on});return o.a.createElement(ke,{onTap:this.props.onTap,className:e,component:"label"},o.a.createElement("div",{className:"Switch__track"},o.a.createElement("div",{className:"Switch__handle"})))}}]),t}(n.Component);Ct.defaultProps={type:"default"};var Ot=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Tabs-Navigator",this.props.className),t=ve()(this.props,"className");return o.a.createElement("div",Object.assign({className:e},t))}}]),t}(n.Component),jt=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=Oe()("Tabs-Tab",{"is-selected":this.props.selected}),t=ve()(this.props,"selected");return o.a.createElement(ke,Object.assign({className:e},t))}}]),t}(n.Component),It={Label:function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return o.a.createElement("div",Object.assign({className:"Tabs-Label"},this.props))}}]),t}(n.Component),Tab:jt,Navigator:Ot},Nt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="Input",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=ve()(this.props,"children","className");return o.a.createElement(ct,{selectable:this.props.disabled,className:this.props.className,component:"label"},o.a.createElement(dt,null,o.a.createElement(ut,{component:"label"},o.a.createElement("textarea",Object.assign({className:"field",rows:3},e))),this.props.children))}}]),t}(n.Component),Rt={email:!0,password:!0,search:!0,tel:!0,text:!0,url:!0},Lt=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).displayName="Input",a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.moveCursorToEnd()}},{key:"moveCursorToEnd",value:function(){var e=this.refs.focusTarget.getDOMNode(),t=e.value.length;Rt.hasOwnProperty(e.type)&&(e.focus(),e.setSelectionRange(t,t))}},{key:"render",value:function(){var e=ve()(this.props,"children","className");return o.a.createElement(ct,{className:this.props.className,selectable:this.props.disabled,component:"label"},o.a.createElement(dt,null,o.a.createElement(ut,{component:"label"},o.a.createElement("input",Object.assign({ref:"focusTarget",className:"field",type:"text"},e))),this.props.children))}}]),t}(n.Component),At=Te,Pt={NavigationBar:Je,Group:ot,GroupBody:it,GroupFooter:rt,GroupHeader:st,GroupInner:lt,Item:ct,ItemInner:dt,ItemContent:ut,ItemMedia:mt,ItemNote:pt,ItemTitle:ft,ItemSubTitle:ht,Tabs:It,Alertbar:Ye,Button:Qe,ButtonGroup:Ze,DatePicker:$e,DatePickerPopup:tt,FieldControl:at,FieldLabel:nt,LabelInput:gt,LabelSelect:bt,LabelTextarea:yt,LabelValue:_t,ListHeader:wt,Popup:et,PopupIcon:Et,RadioList:kt,Textarea:Nt,SearchField:St,SegmentedControl:Tt,Switch:Ct,Input:Lt},Dt=(he.a,Fe),xt=Ve,Mt=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return o.a.createElement(Le,{scrollable:!0},o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Demo"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(At,{to:"main:rtc",transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"WebRtc"))),o.a.createElement(At,{to:"main:list-simple",transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Simple List"))),o.a.createElement(At,{to:"main:recyclerlistview",transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"RecyclerListView"))),o.a.createElement(At,{to:"main:buttons",transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Buttons"))),o.a.createElement(At,{to:"main:chat",transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Chat"))),o.a.createElement(At,{to:"main:form",transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Form"))),o.a.createElement(At,{to:"main:icons",transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Icons"))),o.a.createElement(At,{to:"main:control",transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Control"))),o.a.createElement(At,{to:"main:transitions",transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Transition"))))),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Lists"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(At,{onTap:function(){weui.drawer([{label:"VIP",onClick:function(){console.log("onclick")}},{label:"\u8ba2\u5355",onClick:function(){console.log("onclick")}},{label:"\u6211\u7684",onClick:function(){console.log("onclick")}},{label:"\u9000\u51fa",onClick:function(){console.log("onclick")}}],{title:"",className:"custom-classname",onClose:function(){console.log("\u5173\u95ed")}})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"drawer"))),o.a.createElement(At,{onTap:function(){weui.alert("content",function(){console.log("yes")},{title:"\u81ea\u5b9a\u4e49\u6807\u9898"})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Alert"))),o.a.createElement(At,{onTap:function(){weui.prompt("\u8bf7\u8f93\u5165",function(e){console.log("ok",e),alert(e)},{input:!0,title:"\u81ea\u5b9a\u4e49\u6807\u9898"})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"prompt"))),o.a.createElement(At,{onTap:function(){weui.confirm("\u81ea\u5b9a\u4e49\u6807\u9898\u7684confirm",function(){console.log("yes")},function(){console.log("no")},{title:"\u81ea\u5b9a\u4e49\u6807\u9898"})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"confirm"))),o.a.createElement(At,{onTap:function(){weui.toast("\u64cd\u4f5c\u6210\u529f",{duration:3e3,className:"bears"})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"toast"))),o.a.createElement(At,{onTap:function(){var e=weui.loading("loading");setTimeout(function(){e.hide()},3e3)}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"loading"))),o.a.createElement(At,{onTap:function(){var e=weui.loading("loading",{showMask:!0});setTimeout(function(){e.hide()},3e3)}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"loading with mask"))),o.a.createElement(At,{onTap:function(){weui.actionSheet([{label:"\u62cd\u7167",onClick:function(){console.log("\u62cd\u7167")}},{label:"\u4ece\u76f8\u518c\u9009\u62e9",onClick:function(){console.log("\u4ece\u76f8\u518c\u9009\u62e9")}},{label:"\u5176\u4ed6",onClick:function(){console.log("\u5176\u4ed6")}}],[{label:"\u53d6\u6d88",onClick:function(){console.log("\u53d6\u6d88")}}],{title:"actionTitle",className:"custom-classname",onClose:function(){console.log("\u5173\u95ed")}})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"actionSheet"))),o.a.createElement(At,{onTap:function(){weui.topTips("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u5b57\u6bb5",{duration:3e3,className:"custom-classname",callback:function(){console.log("close")}})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"topTips"))),o.a.createElement(At,{onTap:function(){weui.datePicker({start:"2016-12-29",end:"2030-12-29",cron:"* */2 0",defaultValue:[2017,7,9],onChange:function(e){console.log(e)},onConfirm:function(e){console.log(e)},id:"datePicker",title:"\u65e5\u671f\u9009\u62e9\u5668"})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"datePicker"))),o.a.createElement(At,{onTap:function(){weui.picker([{label:"\u98de\u673a\u7968",value:0},{label:"\u706b\u8f66\u7968(disabled)",disabled:!0,value:1},{label:"\u7684\u58eb\u7968",value:2},{label:"\u4f4f\u5bbf\u8d39",value:3},{label:"\u793c\u54c1\u8d39(disabled)",value:4,disabled:!0},{label:"\u6d3b\u52a8\u8d39",value:5},{label:"\u901a\u8baf\u8d39",value:6},{label:"\u8865\u52a9",value:7},{label:"\u901a\u8baf\u8d39",value:8},{label:"\u5176\u4ed6",value:9}],{defaultValue:[2],className:"custom-classname",onChange:function(e){console.log(e)},onConfirm:function(e){console.log("confirm"),console.log(e)},id:"picker",title:"\u5355\u5217\u9009\u62e9\u5668"})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"picker"))),o.a.createElement(At,{onTap:function(){weui.picker([{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"}],[{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"}],{defaultValue:["3","A"],onChange:function(e){console.log(e)},onConfirm:function(e){console.log(e)},id:"multiPickerBtn",onClose:function(){console.log("onClose")},title:"\u591a\u5217\u9009\u62e9\u5668"})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"\u591a\u5217\u9009\u62e9\u5668"))),o.a.createElement(At,{onTap:function(){weui.picker([{label:"\u5e7f\u4e1c",value:0,children:[{label:"\u5e7f\u5dde",value:0,children:[{label:"\u6d77\u73e0",value:0},{label:"\u756a\u79ba",value:1}]},{label:"\u4f5b\u5c71",value:1,children:[{label:"\u7985\u57ce",value:0},{label:"\u5357\u6d77",value:1}]}]},{label:"\u5e7f\u897f",value:1,children:[{label:"\u5357\u5b81",value:0,children:[{label:"\u9752\u79c0",value:0},{label:"\u5174\u5b81",value:1}]},{label:"\u6842\u6797",value:1,children:[{label:"\u8c61\u5c71",value:0},{label:"\u79c0\u5cf0",value:1}]}]}],{depth:3,defaultValue:[0,1,1],onChange:function(e){console.log(e)},onConfirm:function(e){console.log(e)},id:"cascadePicker",title:"\u5d4c\u5957\u9009\u62e9\u5668"})}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"\u5d4c\u5957\u9009\u62e9\u5668"))))),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"GroupHeader"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(Pt.GroupInner,null,o.a.createElement("p",null,"Use groups to contain content or lists. Where appropriate a Group should be accompanied by a GroupHeading and optionally a GroupFooter."),"GroupBody will apply the background for content inside groups."))))}}]),t}(n.Component);Mt.navigationBar="main",Mt.getNavigation=function(e,t){return{title:"Demo",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:home",{transition:"reveal-from-right"})}}};var Bt=a(23),Ft=a(66),Vt=a.n(Ft),Gt=function(e){function t(e){var a;return Object(se.a)(this,t),a=Object(le.a)(this,Object(ce.a)(t).call(this,e)),Object.assign(Object(Bt.a)(Object(Bt.a)(a)),Vt.a),a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"transitionTo",value:function(e,t){this.context.app.transitionTo(e,t)}}]),Object(ue.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setTimeout(function(){e.transitionTo("main:transitions",{transition:"fade"})},2e4)}},{key:"render",value:function(){return o.a.createElement(Le,{direction:"column",align:"center",justify:"center",className:"no-results"},o.a.createElement("div",{className:"no-results__icon ion-ios-photos"}),o.a.createElement("div",{className:"no-results__text"},"Hold on a sec..."))}}]),t}(n.Component);Gt.navigationBar="main",Gt.getNavigation=function(e,t){return{title:e.navbarTitle,leftArrow:!0,leftLabel:"Lists",leftAction:function(){t.transitionTo("main:demo",{transition:"reveal-from-right"})}}},Gt.contextTypes={app:be.a.object};var Ut=a(67),Ht=a.n(Ut),zt=a(178),qt=Le.initScrollable({left:0,top:44}),Wt=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return o.a.createElement(Pt.Item,null,o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.ItemTitle,null,o.a.createElement("span",null,"ion-",this.props.row)),o.a.createElement(Pt.ItemSubTitle,null,o.a.createElement("i",{style:{fontSize:24},className:"ion-"+this.props.row}))))}}]),t}(n.Component),Jt=function(e){function t(e){var a;return Object(se.a)(this,t),a=Object(le.a)(this,Object(ce.a)(t).call(this,e)),Object.assign(Object(Bt.a)(Object(Bt.a)(a)),Ht.a),a.state={searchString:"",icons:zt},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){}},{key:"clearSearch",value:function(){this.setState({searchString:""})}},{key:"updateSearch",value:function(e){this.setState({searchString:e})}},{key:"submitSearch",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this.state,t=e.icons,a=e.searchString,n=new RegExp(a);var i,r=t.filter(function(e){return n.test(e.toLowerCase())}).sort(function(e,t){return e.localeCompare(t)});return i=a&&!r.length?o.a.createElement(Le,{direction:"column",align:"center",justify:"center",className:"no-results"},o.a.createElement("div",{className:"no-results__icon ion-ios-search-strong"}),o.a.createElement("div",{className:"no-results__text"},'No results for "'+a+'"')):o.a.createElement(Pt.GroupBody,null,r.map(function(e,t){return o.a.createElement(Wt,{key:"person"+t,row:e})})),o.a.createElement(Le,{ref:"scrollContainer",scrollable:qt},o.a.createElement(Pt.SearchField,{type:"dark",value:this.state.searchString,onSubmit:this.submitSearch.bind(this),onChange:this.updateSearch.bind(this),onCancel:this.clearSearch.bind(this),onClear:this.clearSearch.bind(this),placeholder:"Search..."}),i)}}]),t}(n.Component);Jt.navigationBar="main",Jt.getNavigation=function(e,t){return{leftArrow:!0,leftLabel:"Lists",leftAction:function(){t.transitionTo("main:demo",{transition:"reveal-from-right"})},title:"Simple"}};var Yt=a(179),Qt=Le.initScrollable({left:0,top:44}),Zt=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return o.a.createElement(At,{to:"main:list-details",transition:"show-from-right",viewProps:{person:this.props.person,prevView:"list-simple"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.ItemTitle,null,this.props.person.name.full))))}}]),t}(n.Component),Kt=Yt.results.map(function(e){return e});Kt.forEach(function(e,t){e&&(e.id=t,e.name.first=e.name.first[0].toUpperCase()+e.name.first.slice(1),e.name.last=e.name.last[0].toUpperCase()+e.name.last.slice(1),e.name.initials=e.name.first[0]+e.name.last[0],e.name.full=e.name.first+" "+e.name.last,e.category=Math.random()>.5?"A":"B",e.github=e.name.first.toLowerCase()+e.name.last.toLowerCase(),e.picture=e.picture.medium,e.twitter="@"+e.name.first.toLowerCase()+Math.random().toString(32).slice(2,5))});var Xt=function(e){function t(e){var a;return Object(se.a)(this,t),a=Object(le.a)(this,Object(ce.a)(t).call(this,e)),Object.assign(Object(Bt.a)(Object(Bt.a)(a)),Ht.a),a.state={searchString:"",people:Kt},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){}},{key:"clearSearch",value:function(){this.setState({searchString:""})}},{key:"updateSearch",value:function(e){this.setState({searchString:e})}},{key:"submitSearch",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this.state,t=e.people,a=e.searchString,n=new RegExp(a);var i,r=t.filter(function(e){return n.test(e.name.full.toLowerCase())}).sort(function(e,t){return e.name.full.localeCompare(t.name.full)});return i=a&&!r.length?o.a.createElement(Le,{direction:"column",align:"center",justify:"center",className:"no-results"},o.a.createElement("div",{className:"no-results__icon ion-ios-search-strong"}),o.a.createElement("div",{className:"no-results__text"},'No results for "'+a+'"')):o.a.createElement(Pt.GroupBody,null,r.map(function(e,t){return o.a.createElement(Zt,{key:"person"+t,person:e})})),o.a.createElement(Le,{ref:"scrollContainer",scrollable:Qt},o.a.createElement(Pt.SearchField,{type:"dark",value:this.state.searchString,onSubmit:this.submitSearch.bind(this),onChange:this.updateSearch.bind(this),onCancel:this.clearSearch.bind(this),onClear:this.clearSearch.bind(this),placeholder:"Search..."}),i)}}]),t}(n.Component);Xt.navigationBar="main",Xt.getNavigation=function(e,t){return{leftArrow:!0,leftLabel:"Lists",leftAction:function(){t.transitionTo("main:demo",{transition:"reveal-from-right"})},title:"Simple"}};var $t=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=this.props.person;return o.a.createElement(Le,{direction:"column"},o.a.createElement(Le,{fill:!0,scrollable:!0,ref:"scrollContainer",className:"PersonDetails"},o.a.createElement("img",{src:e.picture,className:"PersonDetails__avatar"}),o.a.createElement("div",{className:"PersonDetails__heading"},e.name.full),o.a.createElement("div",{className:"PersonDetails__text text-block"},e.email||""),(e.twitter||e.github)&&o.a.createElement("div",{className:"PersonDetails__profiles"},e.twitter&&o.a.createElement("div",{className:"PersonDetails__profile"},o.a.createElement("span",{className:"PersonDetails__profile__icon ion-social-twitter"}),e.twitter),e.github&&o.a.createElement("div",{className:"PersonDetails__profile"},o.a.createElement("span",{className:"PersonDetails__profile__icon ion-social-github"}),e.github))))}}]),t}(n.Component);$t.navigationBar="main",$t.getNavigation=function(e,t){return{leftArrow:!0,leftLabel:"list-simple"===e.prevView?"Simple":"Complex",leftAction:function(){t.transitionTo("main:"+e.prevView,{transition:"reveal-from-right"})},title:"Person"}},$t.defaultProps={prevView:"home"};var ea=Le.initScrollable(),ta=["color","date","datetime","datetime-local","email","file","month","number","password","range","search","tel","text","time","url","week"],aa=[{label:"Vanilla",value:"vanilla"},{label:"Chocolate",value:"chocolate"},{label:"Caramel",value:"caramel"},{label:"Strawberry",value:"strawberry"}],na=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ce.a)(t).call(this,e))).state={flavourLabelSelect:"chocolate",flavourRadioList:"chocolate",switchValue:!0},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"handleRadioListChange",value:function(e,t){console.log("handleFlavourChange:",e,t);var a={};a[e]=t,this.setState(a)}},{key:"handleLabelSelectChange",value:function(e,t){console.log("handleFlavourChange:",e,t.target.value);var a={};a[e]=t.target.value,this.setState(a)}},{key:"handleSwitch",value:function(e,t){var a={};a[e]=!this.state[e],this.setState(a)}},{key:"alert",value:function(e){weui.alert(e)}},{key:"renderInputTypes",value:function(){return ta.map(function(e){return o.a.createElement(Pt.LabelInput,{key:e,type:e,label:e,placeholder:e})})}},{key:"showDatePicker",value:function(){this.setState({datePicker:!0})}},{key:"handleDatePickerChange",value:function(e){this.setState({datePicker:!1,date:e})}},{key:"formatDate",value:function(e){if(e)return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"render",value:function(){return o.a.createElement(Le,{fill:!0},o.a.createElement(Le,{scrollable:ea},o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Checkbox"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(Pt.Item,null,o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.FieldLabel,null,"Switch"),o.a.createElement(Pt.Switch,{onTap:this.handleSwitch.bind(this,"switchValue"),on:this.state.switchValue}))),o.a.createElement(Pt.Item,null,o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.FieldLabel,null,"Disabled"),o.a.createElement(Pt.Switch,{disabled:!0}))))),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Radio"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(Pt.RadioList,{value:this.state.flavourRadioList,onChange:this.handleRadioListChange.bind(this,"flavourRadioList"),options:aa}))),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Inputs"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(Pt.Input,{placeholder:"Default"}),o.a.createElement(Pt.Input,{defaultValue:"With Value",placeholder:"Placeholder"}),o.a.createElement(Pt.Textarea,{defaultValue:"Longtext is good for bios etc.",placeholder:"Longtext"}))),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Labelled Inputs"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(Pt.LabelInput,{type:"email",label:"Email",placeholder:"your.name@example.com"}),o.a.createElement(ke,{component:"label",onTap:this.showDatePicker.bind(this)},o.a.createElement(Pt.LabelValue,{label:"Date",value:this.formatDate(this.state.date),placeholder:"Select a date"})),o.a.createElement(Pt.LabelInput,{type:"url",label:"URL",placeholder:"http://www.yourwebsite.com"}),o.a.createElement(Pt.LabelInput,{noedit:!0,label:"No Edit",defaultValue:"Un-editable, scrollable, selectable content"}),o.a.createElement(Pt.LabelSelect,{label:"Flavour",value:this.state.flavourLabelSelect,onChange:this.handleLabelSelectChange.bind(this,"flavourLabelSelect"),options:aa}))),o.a.createElement(Pt.Button,{type:"primary",onTap:this.alert.bind(this,"You clicked the Primary Button")},"Primary Button"),o.a.createElement(Pt.Button,{onTap:this.alert.bind(this,"You clicked the Default Button")},"Default Button"),o.a.createElement(Pt.Button,{type:"danger",onTap:this.alert.bind(this,"You clicked the Danger Button")},"Danger Button"),o.a.createElement(Pt.Button,{type:"danger",onTap:this.alert.bind(this,"You clicked the Danger Button"),disabled:!0},"Disabled Button")),o.a.createElement(Pt.DatePickerPopup,{visible:this.state.datePicker,date:this.state.date,onChange:this.handleDatePickerChange.bind(this)}))}}]),t}(n.Component);na.navigationBar="main",na.getNavigation=function(e,t){return{title:"Forms",leftArrow:!0,leftLabel:"Lists",leftAction:function(){t.transitionTo("main:demo",{transition:"reveal-from-right"})}}};var oa=function(e){function t(e){var a;return Object(se.a)(this,t),a=Object(le.a)(this,Object(ce.a)(t).call(this,e)),Object.assign(Object(Bt.a)(Object(Bt.a)(a)),Vt.a),a.state={alertbar:{visible:!1,type:"",text:""},popup:{visible:!1}},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"showLoadingPopup",value:function(){var e=this;this.setState({popup:{visible:!0,loading:!0,header:"Loading",iconName:"ion-load-c",iconType:"default"}}),this.setTimeout(function(){e.setState({popup:{visible:!0,loading:!1,header:"Done!",iconName:"ion-ios-checkmark",iconType:"success"}})},2e3),this.setTimeout(function(){e.setState({popup:{visible:!1}})},3e3)}},{key:"showAlertbar",value:function(e,t){var a=this;this.setState({alertbar:{visible:!0,type:e,text:t}}),this.setTimeout(function(){a.setState({alertbar:{visible:!1}})},2e3)}},{key:"handleModeChange",value:function(e){var t=e;this.state.selectedMode===e&&(t=null),this.setState({selectedMode:t})}},{key:"render",value:function(){var e=this.state.alertbar;return o.a.createElement(Le,{scrollable:!0},o.a.createElement(Pt.Alertbar,{type:e.type||"default",visible:e.visible,animated:!0},e.text||""),o.a.createElement(Pt.Group,{hastopgutter:"true"},o.a.createElement(Pt.GroupHeader,null,"Segmented Control"),o.a.createElement(Pt.SegmentedControl,{value:this.state.selectedMode,onChange:this.handleModeChange.bind(this),hasGutter:!0,options:[{label:"One",value:"one"},{label:"Two",value:"two"},{label:"Three",value:"three"},{label:"Four",value:"four"}]})),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Alert Bar"),o.a.createElement(Pt.ButtonGroup,null,o.a.createElement(Pt.Button,{type:"primary",onTap:this.showAlertbar.bind(this,"danger","No Internet Connection"),disabled:this.state.alertbar.visible},"Danger"),o.a.createElement(Pt.Button,{type:"primary",onTap:this.showAlertbar.bind(this,"warning","Connecting..."),disabled:this.state.alertbar.visible},"Warning"),o.a.createElement(Pt.Button,{type:"primary",onTap:this.showAlertbar.bind(this,"success","Connected"),disabled:this.state.alertbar.visible},"Success"))),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Popup"),o.a.createElement(Pt.Button,{type:"primary",onTap:this.showLoadingPopup.bind(this),disabled:this.state.popup.visible},"Show Popup")),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Application State"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(At,{to:"tabs:non-existent",transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Invalid View"))))),o.a.createElement(Pt.Popup,{visible:this.state.popup.visible},o.a.createElement(Pt.PopupIcon,{name:this.state.popup.iconName,type:this.state.popup.iconType,spinning:this.state.popup.loading}),o.a.createElement("div",null,o.a.createElement("strong",null,this.state.popup.header))))}}]),t}(n.Component);oa.navigationBar="main",oa.getNavigation=function(e,t){return{title:"Controls",leftArrow:!0,leftLabel:"List",leftAction:function(){t.transitionTo("main:demo",{transition:"reveal-from-right"})}}};var ia=Le.initScrollable(),ra=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return o.a.createElement(Le,{scrollable:ia},o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Default"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(At,{to:"tabs:transitions-target",viewProps:{navbarTitle:"Instant"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Instant"))))),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Fade"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(At,{to:"tabs:transitions-target",transition:"fade",viewProps:{navbarTitle:"Fade"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Fade"))),o.a.createElement(At,{to:"tabs:transitions-target",transition:"fade-expand",viewProps:{navbarTitle:"Fade Expand"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,o.a.createElement("span",null,"Fade Expand ",o.a.createElement("span",{className:"text-muted"},"(non-standard)"))))),o.a.createElement(At,{to:"tabs:transitions-target",transition:"fade-contract",viewProps:{navbarTitle:"Fade Contract"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,o.a.createElement("span",null,"Fade Contract ",o.a.createElement("span",{className:"text-muted"},"(non-standard)"))))))),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Show"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(At,{to:"tabs:transitions-target",transition:"show-from-left",viewProps:{navbarTitle:"Show from Left"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,o.a.createElement("span",null,"Show from Left ",o.a.createElement("span",{className:"text-muted"},"(non-standard)"))))),o.a.createElement(At,{to:"tabs:transitions-target",transition:"show-from-right",viewProps:{navbarTitle:"Show from Right"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Show from Right"))),o.a.createElement(At,{to:"app:transitions-target-over",transition:"show-from-top",viewProps:{navbarTitle:"Show from Top"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,o.a.createElement("span",null,"Show from Top ",o.a.createElement("span",{className:"text-muted"},"(non-standard)"))))),o.a.createElement(At,{to:"app:transitions-target-over",transition:"show-from-bottom",viewProps:{navbarTitle:"Show from Bottom"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Show from Bottom"))))),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"Reveal"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(At,{to:"tabs:transitions-target",transition:"reveal-from-left",viewProps:{navbarTitle:"Reveal from Left"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,o.a.createElement("span",null,"Reveal from Left ",o.a.createElement("span",{className:"text-muted"},"(non-standard)"))))),o.a.createElement(At,{to:"tabs:transitions-target",transition:"reveal-from-right",viewProps:{navbarTitle:"Reveal from Right"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Reveal from Right"))),o.a.createElement(At,{to:"app:transitions-target-over",transition:"reveal-from-top",viewProps:{navbarTitle:"Reveal from Top"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,o.a.createElement("span",null,"Reveal from Top ",o.a.createElement("span",{className:"text-muted"},"(non-standard)"))))),o.a.createElement(At,{to:"app:transitions-target-over",transition:"reveal-from-bottom",viewProps:{navbarTitle:"Reveal from Bottom"}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,"Reveal from Bottom"))))))}}]),t}(n.Component);ra.navigationBar="main",ra.getNavigation=function(e,t){return{title:"Transitions",leftArrow:!0,leftLabel:"Lists",leftAction:function(){t.transitionTo("main:demo",{transition:"reveal-from-right"})}}};var sa=a(31),la=(a(115),Le.initScrollable()),ca=function(e){var t=e.action,a=e.avatar,n=e.time,i=e.hideTime,r=e.message;return o.a.createElement("div",{className:"direct-chat-msg "+t},!i&&o.a.createElement("div",{className:"direct-chat-infos"},o.a.createElement("span",{className:"direct-chat-timestamp float-right"},n)),o.a.createElement("div",{className:"content"},o.a.createElement("img",{className:"direct-chat-img",src:a,alt:""}),o.a.createElement("div",{className:"direct-chat-text"},r)))},ua=function(e){function t(){var e;return Object(se.a)(this,t),(e=Object(le.a)(this,Object(ce.a)(t).call(this))).startWs(),e.state={rows:[{avatar:"static/assets/dist/img/user1-128x128.jpg",message:" Is this template real!",f_cid:""}],msg:""},e}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"startWs",value:function(){var e=this,t=window.urlQuery.rid?window.urlQuery.rid:W(!1,6);console.log("roomid","http://localhost:3000/gcp.html#chat?rid=".concat(t));var a=W(!1,6);this.clientid=a;var n=new WebSocket("".concat(window.globalObject.constant.ws_host,"/ws"));this.ws=window.ws=n,n.onopen=function(){console.log("onopen");var e={cmd:"register",clientid:a,roomid:t};n.send(JSON.stringify(e)),console.log("send",e)},n.onmessage=function(t){var a=t.data;console.log("received_msg",a),a.indexOf("list_message")>0&&(e.setState({rows:[].concat(Object(sa.a)(e.state.rows),[JSON.parse(JSON.parse(a).msg)])}),setTimeout(function(){e.scrollToBottom()},100))},n.onclose=function(){}}}]),Object(ue.a)(t,[{key:"sendMsg",value:function(){var e=this;if(0!==this.state.msg.length){var t={list_message:!0,message:this.state.msg,created_at:"23 Jan 2:00 pm",name:"Tommy",f_cid:this.clientid,avatar:"static/assets/dist/img/user3-128x128.jpg"},a=JSON.stringify({cmd:"send",msg:JSON.stringify(t)});console.log(a),this.ws.send(a),this.setState({rows:[].concat(Object(sa.a)(this.state.rows),[t]),msg:""}),setTimeout(function(){e.scrollToBottom()},100)}}},{key:"scrollToBottom",value:function(){var e=document.querySelector(".messages").clientHeight;console.log("clientHeight",e),document.querySelector(".messages_main").scrollTop=e}},{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return o.a.createElement(Le,{fill:!0},o.a.createElement(Le,{className:"messages_main direct-chat-messages direct-chat-success",scrollable:la},o.a.createElement("div",{className:"messages"},this.state.rows.map(function(t,a){var n=t.avatar,i=t.f_cid,r=t.message,s=i===e.clientid?"right":"left";return o.a.createElement(ca,{key:a,action:s,hideTime:!1,avatar:n,message:r})}))),o.a.createElement("div",{className:"send_bot"},o.a.createElement("div",{className:"input"},o.a.createElement("form",{action:"javascript:return true"},o.a.createElement("input",{type:"text",onKeyDown:function(t){13===t.keyCode&&e.sendMsg()},autofocus:!0,value:this.state.msg,onChange:function(t){var a=t.target;e.setState({msg:a.value})}}))),o.a.createElement("div",{className:"button"},o.a.createElement("a",{onClick:this.sendMsg.bind(this),className:"hide weui-btn weui-btn_mini weui-btn_primary"},"\u6309\u94ae"))))}}]),t}(n.Component);ua.navigationBar="main",ua.getNavigation=function(e,t){return ne("Chat"),{title:"Chat",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:demo",{transition:"reveal-from-right"})}}};var da=Le.initScrollable(),ma=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return o.a.createElement(Le,{fill:!0,scrollable:da},o.a.createElement("div",{style:{padding:"16px 0"}},o.a.createElement("div",{className:"button-sp-area"},o.a.createElement("a",{className:"weui-btn weui-btn_primary"},"\u9875\u9762\u4e3b\u64cd\u4f5c"),o.a.createElement("a",{className:"weui-btn weui-btn_primary weui-btn_loading"},o.a.createElement("i",{className:"weui-loading"}),"\u9875\u9762\u4e3b\u64cd\u4f5c"),o.a.createElement("a",{className:"weui-btn weui-btn_disabled weui-btn_primary"},"\u9875\u9762\u4e3b\u64cd\u4f5c"),o.a.createElement("a",{className:"weui-btn weui-btn_default"},"\u9875\u9762\u6b21\u8981\u64cd\u4f5c"),o.a.createElement("a",{className:"weui-btn weui-btn_default weui-btn_loading"},o.a.createElement("i",{className:"weui-loading"}),"\u9875\u9762\u6b21\u64cd\u4f5c"),o.a.createElement("a",{className:"weui-btn weui-btn_disabled weui-btn_default"},"\u9875\u9762\u6b21\u8981\u64cd\u4f5c"),o.a.createElement("a",{className:"weui-btn weui-btn_warn"},"\u8b66\u544a\u7c7b\u64cd\u4f5c"),o.a.createElement("a",{className:"weui-btn weui-btn_warn weui-btn_loading"},o.a.createElement("i",{className:"weui-loading"}),"\u8b66\u544a\u7c7b\u64cd\u4f5c"),o.a.createElement("a",{className:"weui-btn weui-btn_disabled weui-btn_warn"},"\u8b66\u544a\u7c7b\u64cd\u4f5c")),o.a.createElement("div",{className:"button-sp-area cell"},o.a.createElement("a",{className:"weui-btn_cell weui-btn_cell-default"},"\u666e\u901a\u884c\u6309\u94ae"),o.a.createElement("a",{className:"weui-btn_cell weui-btn_cell-primary"},"\u5f3a\u8c03\u884c\u6309\u94ae"),o.a.createElement("a",{className:"weui-btn_cell weui-btn_cell-primary"},o.a.createElement("img",{className:"weui-btn_cell__icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAMAAABgZ9sFAAAAVFBMVEXx8fHMzMzr6+vn5+fv7+/t7e3d3d2+vr7W1tbHx8eysrKdnZ3p6enk5OTR0dG7u7u3t7ejo6PY2Njh4eHf39/T09PExMSvr6+goKCqqqqnp6e4uLgcLY/OAAAAnklEQVRIx+3RSRLDIAxE0QYhAbGZPNu5/z0zrXHiqiz5W72FqhqtVuuXAl3iOV7iPV/iSsAqZa9BS7YOmMXnNNX4TWGxRMn3R6SxRNgy0bzXOW8EBO8SAClsPdB3psqlvG+Lw7ONXg/pTld52BjgSSkA3PV2OOemjIDcZQWgVvONw60q7sIpR38EnHPSMDQ4MjDjLPozhAkGrVbr/z0ANjAF4AcbXmYAAAAASUVORK5CYII="}),"\u5f3a\u8c03\u884c\u6309\u94ae"),o.a.createElement("a",{className:"weui-btn_cell weui-btn_cell-warn"},"\u8b66\u544a\u884c\u6309\u94ae")),o.a.createElement("div",{className:"button-sp-area"},o.a.createElement("a",{className:"weui-btn weui-btn_mini weui-btn_primary"},"\u6309\u94ae"),o.a.createElement("a",{className:"weui-btn weui-btn_mini weui-btn_default"},"\u6309\u94ae"),o.a.createElement("a",{className:"weui-btn weui-btn_mini weui-btn_warn"},"\u6309\u94ae"))))}}]),t}(n.Component);function pa(e){return document.querySelector(e)}ma.navigationBar="main",ma.getNavigation=function(e,t){return ne("Buttons"),{title:"Buttons",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:demo",{transition:"reveal-from-right"})}}};function ha(e,t,a){return fa(e,t,!0,a)}function fa(e,t,a,n){return new Promise(function(o,i){var r,s=function(){200===r.status?o(r.responseText):i(Error("Status="+r.status+", response="+r.responseText))};r=new XMLHttpRequest,a&&(r.onreadystatechange=function(){4===r.readyState&&s()}),r.open(e,t,a),r.send(n),a||s()})}function va(e){try{return JSON.parse(e)}catch(t){console.log("Error parsing json: "+e)}return null}function ga(e){var t=[];e=e||5;for(;e--;)t.push("0123456789".charAt(Math.floor(Math.random()*"0123456789".length)));return t.join("")}function ba(){return"undefined"!==typeof chrome&&"undefined"!==typeof chrome.storage&&"undefined"!==typeof chrome.storage.local}function ya(e){if("\n"===e[e.length-1]&&(e=e.substring(0,e.length-1)),window.performance){var t=(window.performance.now()/1e3).toFixed(3);console.log(t+": "+e)}else console.log(e)}var _a="ws",wa="xhr",Ea="addToQueue",ka="clearQueue",Sa="send",Ta=function(e,t){this.wssUrl_=e,this.wssPostUrl_=t,this.roomId_=null,this.clientId_=null,this.websocket_=null,this.registered_=!1,this.onerror=null,this.onmessage=null};Ta.prototype.open=function(){if(!this.websocket_)return console.log("Opening signaling channel."),new Promise(function(e,t){ba()?this.websocket_=new RemoteWebSocket(this.wssUrl_,this.wssPostUrl_):this.websocket_=new WebSocket(this.wssUrl_),this.websocket_.onopen=function(){console.log("Signaling channel opened."),this.websocket_.onerror=function(){console.log("Signaling channel error.")},this.websocket_.onclose=function(e){console.log("Channel closed with code:"+e.code+" reason:"+e.reason),this.websocket_=null,this.registered_=!1},this.clientId_&&this.roomId_&&this.register(this.roomId_,this.clientId_),e()}.bind(this),this.websocket_.onmessage=function(e){console.log("WSS->C: "+e.data);var t=va(e.data);t?t.error?console.log("Signaling server error message: "+t.error):this.onmessage(t.msg):console.log("Failed to parse WSS message: "+e.data)}.bind(this),this.websocket_.onerror=function(){t(Error("WebSocket error."))}}.bind(this));console.log("ERROR: SignalingChannel has already opened.")},Ta.prototype.register=function(e,t){if(this.registered_)console.log("ERROR: SignalingChannel has already registered.");else if(this.roomId_=e,this.clientId_=t,this.roomId_||console.log("ERROR: missing roomId."),this.clientId_||console.log("ERROR: missing clientId."),this.websocket_&&this.websocket_.readyState===WebSocket.OPEN){console.log("Registering signaling channel.");var a={cmd:"register",roomid:this.roomId_,clientid:this.clientId_};this.websocket_.send(JSON.stringify(a)),this.registered_=!0,console.log("Signaling channel registered.")}else console.log("WebSocket not open yet; saving the IDs to register later.")},Ta.prototype.close=function(e){if(this.websocket_&&(this.websocket_.close(),this.websocket_=null),this.clientId_&&this.roomId_)return fa("DELETE",this.getWssPostUrl(),e).catch(function(e){console.log("Error deleting web socket connection: "+e.message)}).then(function(){this.clientId_=null,this.roomId_=null,this.registered_=!1}.bind(this))},Ta.prototype.send=function(e){if(this.roomId_&&this.clientId_){console.log("C->WSS: "+e);var t={cmd:"send",msg:e},a=JSON.stringify(t);if(this.websocket_&&this.websocket_.readyState===WebSocket.OPEN)this.websocket_.send(a);else{var n=this.getWssPostUrl(),o=new XMLHttpRequest;o.open("POST",n,!0),o.send(t.msg)}}else console.log("ERROR: SignalingChannel has not registered.")},Ta.prototype.getWssPostUrl=function(){return this.wssPostUrl_+"/"+this.roomId_+"/"+this.clientId_};var Ca=null,Oa="loopback_client_id";function ja(e){return e.split(" ")[7]}function Ia(e,t){return"true"===t.opusStereo?e=Da(e,"opus/48000","stereo","1"):"false"===t.opusStereo&&(e=xa(e,"opus/48000","stereo")),"true"===t.opusFec?e=Da(e,"opus/48000","useinbandfec","1"):"false"===t.opusFec&&(e=xa(e,"opus/48000","useinbandfec")),"true"===t.opusDtx?e=Da(e,"opus/48000","usedtx","1"):"false"===t.opusDtx&&(e=xa(e,"opus/48000","usedtx")),t.opusMaxPbr&&(e=Da(e,"opus/48000","maxplaybackrate",t.opusMaxPbr)),e}function Na(e,t,a){var n=e.split("\r\n"),o=Va(n,"m=",a);if(null===o)return console.log("Failed to add bandwidth line to sdp, as no m-line found"),e;var i=Ga(n,o+1,-1,"m=");null===i&&(i=n.length);var r=Ga(n,o+1,i,"c=");if(null===r)return console.log("Failed to add bandwidth line to sdp, as no c-line found"),e;var s=Ga(n,r+1,i,"b=AS");s&&n.splice(s,1);var l="b=AS:"+t;return n.splice(r+1,0,l),e=n.join("\r\n")}function Ra(e,t){e=e.split(" ");for(var a=0;a<e.length;++a)e[a]===t.toString()&&e.splice(a,1);return e.join(" ")}function La(e,t){var a=Va(e,"a=rtpmap",t.toString());if(null===a)return e;e.splice(a,1);var n=Va(e,"m=","video");return null===n?e:(e[n]=Ra(e[n],t),e)}function Aa(e,t){if("false"!==t.videoFec)return e;var a=e.split("\r\n"),n=Va(a,"a=rtpmap","red");if(null===n)return e;var o=Ua(a[n]);if(a=function(e,t){var a=Va(e,"a=rtpmap",t);if(null===a)return e;var n=Ua(e[a]);e.splice(a,1);var o=Va(e,"m=","video");return null===o?e:(e[o]=Ra(e[o],n),e)}(a=La(a,o),"ulpfec"),null===(n=Va(a,"a=fmtp",o.toString())))return e;var i=Ma(a[n]).pt;return null===i?e:(a.splice(n,1),(a=La(a,i)).join("\r\n"))}function Pa(e,t,a,n){var o=t+" "+a+" codec";if(!n)return console.log("No preference on "+o+"."),e;console.log("Prefer "+o+": "+n);var i=e.split("\r\n"),r=Va(i,"m=",t);if(null===r)return e;for(var s=null,l=i.length-1;l>=0;--l){var c=Ga(i,l,0,"a=rtpmap",n,"desc");if(null===c)break;l=c,(s=Ua(i[c]))&&(i[r]=Ha(i[r],s))}return e=i.join("\r\n")}function Da(e,t,a,n){var o=e.split("\r\n"),i=Fa(o,t),r={};if(null===i){var s=Va(o,"a=rtpmap",t);if(null===s)return e;var l=Ua(o[s]);r.pt=l.toString(),r.params={},r.params[a]=n,o.splice(s+1,0,Ba(r))}else(r=Ma(o[i])).params[a]=n,o[i]=Ba(r);return e=o.join("\r\n")}function xa(e,t,a){var n=e.split("\r\n"),o=Fa(n,t);if(null===o)return e;var i=Ma(n[o]);delete i.params[a];var r=Ba(i);return null===r?n.splice(o,1):n[o]=r,e=n.join("\r\n")}function Ma(e){var t={},a=e.indexOf(" "),n=e.substring(a+1).split(";"),o=new RegExp("a=fmtp:(\\d+)"),i=e.match(o);if(!i||2!==i.length)return null;t.pt=i[1];for(var r={},s=0;s<n.length;++s){var l=n[s].split("=");2===l.length&&(r[l[0]]=l[1])}return t.params=r,t}function Ba(e){if(!e.hasOwnProperty("pt")||!e.hasOwnProperty("params"))return null;var t=e.pt,a=e.params,n=[],o=0;for(var i in a)n[o]=i+"="+a[i],++o;return 0===o?null:"a=fmtp:"+t.toString()+" "+n.join(";")}function Fa(e,t){var a=function(e,t){var a=Va(e,"a=rtpmap",t);return a?Ua(e[a]):null}(e,t);return a?Va(e,"a=fmtp:"+a.toString()):null}function Va(e,t,a){return Ga(e,0,-1,t,a)}function Ga(e,t,a,n,o,i){if(void 0===i&&(i="asc"),"asc"===(i=i||"asc")){for(var r=-1!==a?a:e.length,s=t;s<r;++s)if(0===e[s].indexOf(n)&&(!o||-1!==e[s].toLowerCase().indexOf(o.toLowerCase())))return s}else for(var l=-1!==t?t:e.length-1;l>=0;--l)if(0===e[l].indexOf(n)&&(!o||-1!==e[l].toLowerCase().indexOf(o.toLowerCase())))return l;return null}function Ua(e){var t=new RegExp("a=rtpmap:(\\d+) [a-zA-Z0-9-]+\\/\\d+"),a=e.match(t);return a&&2===a.length?a[1]:null}function Ha(e,t){var a=e.split(" "),n=a.slice(0,3);n.push(t);for(var o=3;o<a.length;o++)a[o]!==t&&n.push(a[o]);return n.join(" ")}var za=function(e,t){this.params_=e,this.startTime_=t,console.log("Creating RTCPeerConnnection with:\n  config: '"+JSON.stringify(e.peerConnectionConfig)+"';\n  constraints: '"+JSON.stringify(e.peerConnectionConstraints)+"'."),this.pc_=new RTCPeerConnection(e.peerConnectionConfig,e.peerConnectionConstraints),this.pc_.onicecandidate=this.onIceCandidate_.bind(this),this.pc_.ontrack=this.onRemoteStreamAdded_.bind(this),this.pc_.onremovestream=console.log.bind(null,"Remote stream removed."),this.pc_.onsignalingstatechange=this.onSignalingStateChanged_.bind(this),this.pc_.oniceconnectionstatechange=this.onIceConnectionStateChanged_.bind(this),window.dispatchEvent(new CustomEvent("pccreated",{detail:{pc:this,time:new Date,userId:this.params_.roomId+(this.isInitiator_?"-0":"-1"),sessionId:this.params_.roomId}})),this.hasRemoteSdp_=!1,this.messageQueue_=[],this.isInitiator_=!1,this.started_=!1,this.onerror=null,this.oniceconnectionstatechange=null,this.onnewicecandidate=null,this.onremotehangup=null,this.onremotesdpset=null,this.onremotestreamadded=null,this.onsignalingmessage=null,this.onsignalingstatechange=null};za.DEFAULT_SDP_OFFER_OPTIONS_={offerToReceiveAudio:1,offerToReceiveVideo:1,voiceActivityDetection:!1},za.prototype.addStream=function(e){this.pc_&&this.pc_.addStream(e)},za.prototype.startAsCaller=function(e){if(!this.pc_)return!1;if(this.started_)return!1;this.isInitiator_=!0,this.started_=!0;var t=function(e,t){if(!e||!t)return e||t;var a=e;for(var n in t)a[n]=t[n];return a}(za.DEFAULT_SDP_OFFER_OPTIONS_,e);return console.log("Sending offer to peer, with constraints: \n'"+JSON.stringify(t)+"'."),this.pc_.createOffer(t).then(this.setLocalSdpAndNotify_.bind(this)).catch(this.onError_.bind(this,"createOffer")),!0},za.prototype.startAsCallee=function(e){if(!this.pc_)return!1;if(this.started_)return!1;if(this.isInitiator_=!1,this.started_=!0,e&&e.length>0){for(var t=0,a=e.length;t<a;t++)this.receiveSignalingMessage(e[t]);return!0}return this.messageQueue_.length>0&&this.drainMessageQueue_(),!0},za.prototype.receiveSignalingMessage=function(e){var t=va(e);t&&(this.isInitiator_&&"answer"===t.type||!this.isInitiator_&&"offer"===t.type?(this.hasRemoteSdp_=!0,this.messageQueue_.unshift(t)):"candidate"===t.type?this.messageQueue_.push(t):"bye"===t.type&&this.onremotehangup&&this.onremotehangup(),this.drainMessageQueue_())},za.prototype.close=function(){this.pc_&&(this.pc_.close(),window.dispatchEvent(new CustomEvent("pcclosed",{detail:{pc:this,time:new Date}})),this.pc_=null)},za.prototype.getPeerConnectionStates=function(){return this.pc_?{signalingState:this.pc_.signalingState,iceGatheringState:this.pc_.iceGatheringState,iceConnectionState:this.pc_.iceConnectionState}:null},za.prototype.getPeerConnectionStats=function(e){this.pc_&&this.pc_.getStats(null).then(e)},za.prototype.doAnswer_=function(){console.log("Sending answer to peer."),this.pc_.createAnswer().then(this.setLocalSdpAndNotify_.bind(this)).catch(this.onError_.bind(this,"createAnswer"))},za.prototype.setLocalSdpAndNotify_=function(e){var t,a;e.sdp=Ia(e.sdp,this.params_),e.sdp=(t=e.sdp,a=this.params_,Pa(t,"audio","receive",a.audioRecvCodec)),e.sdp=function(e,t){return Pa(e,"video","receive",t.videoRecvCodec)}(e.sdp,this.params_),e.sdp=function(e,t){return t.audioRecvBitrate?(console.log("Prefer audio receive bitrate: "+t.audioRecvBitrate),Na(e,t.audioRecvBitrate,"audio")):e}(e.sdp,this.params_),e.sdp=function(e,t){return t.videoRecvBitrate?(console.log("Prefer video receive bitrate: "+t.videoRecvBitrate),Na(e,t.videoRecvBitrate,"video")):e}(e.sdp,this.params_),e.sdp=Aa(e.sdp,this.params_),this.pc_.setLocalDescription(e).then(console.log.bind(null,"Set session description success.")).catch(this.onError_.bind(this,"setLocalDescription")),this.onsignalingmessage&&this.onsignalingmessage({sdp:e.sdp,type:e.type})},za.prototype.setRemoteSdp_=function(e){var t,a;e.sdp=Ia(e.sdp,this.params_),e.sdp=(t=e.sdp,a=this.params_,Pa(t,"audio","send",a.audioSendCodec)),e.sdp=function(e,t){return Pa(e,"video","send",t.videoSendCodec)}(e.sdp,this.params_),e.sdp=function(e,t){return t.audioSendBitrate?(console.log("Prefer audio send bitrate: "+t.audioSendBitrate),Na(e,t.audioSendBitrate,"audio")):e}(e.sdp,this.params_),e.sdp=function(e,t){return t.videoSendBitrate?(console.log("Prefer video send bitrate: "+t.videoSendBitrate),Na(e,t.videoSendBitrate,"video")):e}(e.sdp,this.params_),e.sdp=function(e,t){var a=parseInt(t.videoSendInitialBitrate);if(!a)return e;var n=parseInt(a),o=parseInt(t.videoSendBitrate);o&&(a>o&&(console.log("Clamping initial bitrate to max bitrate of "+o+" kbps."),a=o,t.videoSendInitialBitrate=a),n=o);var i=e.split("\r\n"),r=Va(i,"m=","video");if(null===r)return console.log("Failed to find video m-line"),e;var s=i[r],l=new RegExp("m=video\\s\\d+\\s[A-Z/]+\\s"),c=s.split(l)[1].split(" ")[0],u=i[Va(i,"a=rtpmap",c)].split("a=rtpmap:"+c)[1].split("/")[0],d=t.videoSendCodec||u;return e=Da(e,d,"x-google-min-bitrate",t.videoSendInitialBitrate.toString()),e=Da(e,d,"x-google-max-bitrate",n.toString())}(e.sdp,this.params_),e.sdp=Aa(e.sdp,this.params_),this.pc_.setRemoteDescription(new RTCSessionDescription(e)).then(this.onSetRemoteDescriptionSuccess_.bind(this)).catch(this.onError_.bind(this,"setRemoteDescription"))},za.prototype.onSetRemoteDescriptionSuccess_=function(){console.log("Set remote session description success.");var e=this.pc_.getRemoteStreams();this.onremotesdpset&&this.onremotesdpset(e.length>0&&e[0].getVideoTracks().length>0)},za.prototype.processSignalingMessage_=function(e){if("offer"!==e.type||this.isInitiator_)if("answer"===e.type&&this.isInitiator_){if("have-local-offer"!==this.pc_.signalingState)return void console.log("ERROR: remote answer received in unexpected state: "+this.pc_.signalingState);this.setRemoteSdp_(e)}else if("candidate"===e.type){var t=new RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate});this.recordIceCandidate_("Remote",t),this.pc_.addIceCandidate(t).then(console.log.bind(null,"Remote candidate added successfully.")).catch(this.onError_.bind(this,"addIceCandidate"))}else console.log("WARNING: unexpected message: "+JSON.stringify(e));else{if("stable"!==this.pc_.signalingState)return void console.log("ERROR: remote offer received in unexpected state: "+this.pc_.signalingState);this.setRemoteSdp_(e),this.doAnswer_()}},za.prototype.drainMessageQueue_=function(){if(this.pc_&&this.started_&&this.hasRemoteSdp_){for(var e=0,t=this.messageQueue_.length;e<t;e++)this.processSignalingMessage_(this.messageQueue_[e]);this.messageQueue_=[]}},za.prototype.onIceCandidate_=function(e){if(e.candidate){if(this.filterIceCandidate_(e.candidate)){var t={type:"candidate",label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate};this.onsignalingmessage&&this.onsignalingmessage(t),this.recordIceCandidate_("Local",e.candidate)}}else console.log("End of candidates.")},za.prototype.onSignalingStateChanged_=function(){this.pc_&&(console.log("Signaling state changed to: "+this.pc_.signalingState),this.onsignalingstatechange&&this.onsignalingstatechange())},za.prototype.onIceConnectionStateChanged_=function(){this.pc_&&(console.log("ICE connection state changed to: "+this.pc_.iceConnectionState),"completed"===this.pc_.iceConnectionState&&console.log("ICE complete time: "+(window.performance.now()-this.startTime_).toFixed(0)+"ms."),this.oniceconnectionstatechange&&this.oniceconnectionstatechange())},za.prototype.filterIceCandidate_=function(e){var t=e.candidate;return-1===t.indexOf("tcp")&&("relay"!==this.params_.peerConnectionConfig.iceTransports||"relay"===ja(t))},za.prototype.recordIceCandidate_=function(e,t){this.onnewicecandidate&&this.onnewicecandidate(e,t.candidate)},za.prototype.onRemoteStreamAdded_=function(e){this.onremotestreamadded&&this.onremotestreamadded(e.streams[0])},za.prototype.onError_=function(e,t){this.onerror&&this.onerror(e+": "+t.toString())};var qa=qa||{};qa.windowPort=qa.windowPort||{},function(){var e;qa.windowPort.sendMessage=function(e){var a=t();try{a.postMessage(e)}catch(n){console.log("Error sending message via port: "+n)}},qa.windowPort.addMessageListener=function(e){t().onMessage.addListener(e)};var t=function(){return e||(e=chrome.runtime.connect()),e}}();var Wa=function(e){this.params_=e,this.roomServer_=e.roomServer||"",this.channel_=new Ta(e.wssUrl,e.wssPostUrl),this.channel_.onmessage=this.onRecvSignalingChannelMessage_.bind(this),this.pcClient_=null,this.localStream_=null,this.errorMessageQueue_=[],this.startTime=null,this.oncallerstarted=null,this.onerror=null,this.oniceconnectionstatechange=null,this.onlocalstreamadded=null,this.onnewicecandidate=null,this.onremotehangup=null,this.onremotesdpset=null,this.onremotestreamadded=null,this.onsignalingstatechange=null,this.onstatusmessage=null,this.getMediaPromise_=null,this.getIceServersPromise_=null,this.requestMediaAndIceServers_()};Wa.prototype.requestMediaAndIceServers_=function(){this.getMediaPromise_=this.maybeGetMedia_(),this.getIceServersPromise_=this.maybeGetIceServers_()},Wa.prototype.isInitiator=function(){return this.params_.isInitiator},Wa.prototype.start=function(e){this.connectToRoom_(e),this.params_.isLoopback&&function(e,t){Ca&&Ca.close(),console.log("Setting up loopback WebSocket."),Ca=new WebSocket(e);var a=function(e){var t=JSON.stringify({cmd:"send",msg:JSON.stringify(e)});Ca.send(t)};Ca.onopen=function(){console.log("Loopback WebSocket opened.");var e={cmd:"register",roomid:t,clientid:Oa};Ca.send(JSON.stringify(e))},Ca.onmessage=function(e){var t,n;try{t=JSON.parse(e.data),n=JSON.parse(t.msg)}catch(i){return void console.log("Error parsing JSON: "+e.data)}if(t.error)console.log("WSS error: "+t.error);else if("offer"===n.type){var o=t.msg;o=(o=(o=o.replace('"offer"','"answer"')).replace("a=ice-options:google-ice\\r\\n","")).replace(/a=crypto:0 AES_CM_128_HMAC_SHA1_32\sinline:.{44}/,""),a(JSON.parse(o))}else"candidate"===n.type&&a(n)},Ca.onclose=function(e){console.log("Loopback WebSocket closed with code:"+e.code+" reason:"+e.reason)}}(this.params_.wssUrl,e)},Wa.prototype.queueCleanupMessages_=function(){qa.windowPort.sendMessage({action:Ea,queueMessage:{action:wa,method:"POST",url:this.getLeaveUrl_(),body:null}}),qa.windowPort.sendMessage({action:Ea,queueMessage:{action:_a,wsAction:Sa,data:JSON.stringify({cmd:"send",msg:JSON.stringify({type:"bye"})})}}),qa.windowPort.sendMessage({action:Ea,queueMessage:{action:wa,method:"DELETE",url:this.channel_.getWssPostUrl(),body:null}})},Wa.prototype.clearCleanupQueue_=function(){qa.windowPort.sendMessage({action:ka})},Wa.prototype.restart=function(){this.requestMediaAndIceServers_(),this.start(this.params_.previousRoomId)},Wa.prototype.hangup=function(e){if(this.startTime=null,ba()&&this.clearCleanupQueue_(),this.localStream_&&("undefined"===typeof this.localStream_.getTracks?this.localStream_.stop():this.localStream_.getTracks().forEach(function(e){e.stop()}),this.localStream_=null),this.params_.roomId){this.pcClient_&&(this.pcClient_.close(),this.pcClient_=null);var t=[];if(t.push({step:function(){return fa("POST",this.getLeaveUrl_(),e)}.bind(this),errorString:"Error sending /leave:"}),t.push({step:function(){this.channel_.send(JSON.stringify({type:"bye"}))}.bind(this),errorString:"Error sending bye:"}),t.push({step:function(){return this.channel_.close(e)}.bind(this),errorString:"Error closing signaling channel:"}),t.push({step:function(){this.params_.previousRoomId=this.params_.roomId,this.params_.roomId=null,this.params_.clientId=null}.bind(this),errorString:"Error setting params:"}),e){for(var a=function(e,t){console.log(e+" "+t.message)},n=Promise.resolve(),o=0;o<t.length;++o)n=n.then(t[o].step).catch(a.bind(this,t[o].errorString));return n}for(var i=function(e,t){try{e()}catch(a){console.log(t+" "+a)}},r=0;r<t.length;++r)i(t[r].step,t[r].errorString);return null!==this.params_.roomId||null!==this.params_.clientId?console.log("ERROR: sync cleanup tasks did not complete successfully."):console.log("Cleanup completed."),Promise.resolve()}},Wa.prototype.getLeaveUrl_=function(){return this.roomServer_+"/room/leave/"+this.params_.roomId+"/"+this.params_.clientId},Wa.prototype.onRemoteHangup=function(){this.startTime=null,this.params_.isInitiator=!0,this.pcClient_&&(this.pcClient_.close(),this.pcClient_=null),this.startSignaling_()},Wa.prototype.getPeerConnectionStates=function(){return this.pcClient_?this.pcClient_.getPeerConnectionStates():null},Wa.prototype.getPeerConnectionStats=function(e){this.pcClient_&&this.pcClient_.getPeerConnectionStats(e)},Wa.prototype.toggleVideoMute=function(){var e=this.localStream_.getVideoTracks();if(0!==e.length){console.log("Toggling video mute state.");for(var t=0;t<e.length;++t)e[t].enabled=!e[t].enabled;console.log("Video "+(e[0].enabled?"unmuted.":"muted."))}else console.log("No local video available.")},Wa.prototype.toggleAudioMute=function(){var e=this.localStream_.getAudioTracks();if(0!==e.length){console.log("Toggling audio mute state.");for(var t=0;t<e.length;++t)e[t].enabled=!e[t].enabled;console.log("Audio "+(e[0].enabled?"unmuted.":"muted."))}else console.log("No local audio available.")},Wa.prototype.connectToRoom_=function(e){this.params_.roomId=e;var t=this.channel_.open().catch(function(e){return this.onError_("WebSocket open error: "+e.message),Promise.reject(e)}.bind(this)),a=this.joinRoom_().then(function(e){var t;this.params_.clientId=e.client_id,this.params_.roomId=e.room_id,this.params_.roomLink=0===(t=e.room_link).indexOf("?")?"".concat(window.location.origin).concat(window.location.pathname).concat(window.location.hash).concat(t):t,this.params_.isInitiator="true"===e.is_initiator,this.params_.messages=e.messages}.bind(this)).catch(function(e){return this.onError_("Room server join error: "+e.message),Promise.reject(e)}.bind(this));Promise.all([t,a]).then(function(){this.channel_.register(this.params_.roomId,this.params_.clientId),Promise.all([this.getIceServersPromise_,this.getMediaPromise_]).then(function(){this.startSignaling_(),ba()&&this.queueCleanupMessages_()}.bind(this)).catch(function(e){this.onError_("Failed to start signaling: "+e.message)}.bind(this))}.bind(this)).catch(function(e){this.onError_("WebSocket register error: "+e.message)}.bind(this))},Wa.prototype.maybeGetMedia_=function(){var e=null;if(!1!==this.params_.mediaConstraints.audio||!1!==this.params_.mediaConstraints.video){var t=this.params_.mediaConstraints;e=navigator.mediaDevices.getUserMedia(t).catch(function(e){if("NotFoundError"!==e.name)throw e;return navigator.mediaDevices.enumerateDevices().then(function(e){var a=e.find(function(e){return"videoinput"===e.kind}),n=e.find(function(e){return"audioinput"===e.kind}),o={video:a&&t.video,audio:n&&t.audio};return navigator.mediaDevices.getUserMedia(o)})}).then(function(e){console.log("Got access to local media with mediaConstraints:\n  '"+JSON.stringify(t)+"'"),this.onUserMediaSuccess_(e)}.bind(this)).catch(function(e){this.onError_("Error getting user media: "+e.message),this.onUserMediaError_(e)}.bind(this))}else e=Promise.resolve();return e},Wa.prototype.maybeGetIceServers_=function(){var e,t,a=null;if(this.params_.iceServerRequestUrl&&this.params_.iceServerRequestUrl.length>0&&this.params_.peerConnectionConfig.iceServers&&0===this.params_.peerConnectionConfig.iceServers.length){var n=this.params_.iceServerRequestUrl;a=(e=n,t=this.params_.iceServerTransports,new Promise(function(a,n){ha("POST",e).then(function(e){var o=va(e);o?(""!==t&&function(e,t){for(var a="transport="+t,n=[],o=0;o<e.iceServers.length;++o){for(var i=e.iceServers[o],r=[],s=0;s<i.urls.length;++s){var l=i.urls[s];-1!==l.indexOf(a)?r.push(l):-1===l.indexOf("?transport=")&&r.push(l+"?"+a)}0!==r.length&&(i.urls=r,n.push(i))}e.iceServers=n}(o,t),console.log("Retrieved ICE server information."),a(o.iceServers)):n(Error("Error parsing response JSON: "+e))}).catch(function(e){n(Error("ICE server request error: "+e.message))})})).then(function(e){var t=this.params_.peerConnectionConfig.iceServers;this.params_.peerConnectionConfig.iceServers=t.concat(e)}.bind(this)).catch(function(e){if(this.onstatusmessage){var t=encodeURIComponent("AppRTC demo ICE servers not working");this.onstatusmessage('No TURN server; unlikely that media will traverse networks. If this persists please <a href="mailto:discuss-webrtc@googlegroups.com?subject='+t+'">report it to discuss-webrtc@googlegroups.com</a>.')}console.log(e.message)}.bind(this))}else a=Promise.resolve();return a},Wa.prototype.onUserMediaSuccess_=function(e){this.localStream_=e,this.onlocalstreamadded&&this.onlocalstreamadded(e)},Wa.prototype.onUserMediaError_=function(e){var t="Failed to get access to local media. Error name was "+e.name+". Continuing without sending a stream.";this.onError_("getUserMedia error: "+t),this.errorMessageQueue_.push(e),alert(t)},Wa.prototype.maybeCreatePcClientAsync_=function(){return new Promise(function(e,t){if(this.pcClient_)e();else if("function"===typeof RTCPeerConnection.generateCertificate){RTCPeerConnection.generateCertificate({name:"ECDSA",namedCurve:"P-256"}).then(function(t){console.log("ECDSA certificate generated successfully."),this.params_.peerConnectionConfig.certificates=[t],this.createPcClient_(),e()}.bind(this)).catch(function(e){console.log("ECDSA certificate generation failed."),t(e)})}else this.createPcClient_(),e()}.bind(this))},Wa.prototype.createPcClient_=function(){this.pcClient_=new za(this.params_,this.startTime),this.pcClient_.onsignalingmessage=this.sendSignalingMessage_.bind(this),this.pcClient_.onremotehangup=this.onremotehangup,this.pcClient_.onremotesdpset=this.onremotesdpset,this.pcClient_.onremotestreamadded=this.onremotestreamadded,this.pcClient_.onsignalingstatechange=this.onsignalingstatechange,this.pcClient_.oniceconnectionstatechange=this.oniceconnectionstatechange,this.pcClient_.onnewicecandidate=this.onnewicecandidate,this.pcClient_.onerror=this.onerror,console.log("Created PeerConnectionClient")},Wa.prototype.startSignaling_=function(){console.log("Starting signaling."),this.isInitiator()&&this.oncallerstarted&&this.oncallerstarted(this.params_.roomId,this.params_.roomLink),this.startTime=window.performance.now(),this.maybeCreatePcClientAsync_().then(function(){this.localStream_&&(console.log("Adding local stream."),this.pcClient_.addStream(this.localStream_)),this.params_.isInitiator?this.pcClient_.startAsCaller(this.params_.offerOptions):this.pcClient_.startAsCallee(this.params_.messages)}.bind(this)).catch(function(e){this.onError_("Create PeerConnection exception: "+e),alert("Cannot create RTCPeerConnection: "+e.message)}.bind(this))},Wa.prototype.joinRoom_=function(){return new Promise(function(e,t){this.params_.roomId||t(Error("Missing room id.")),ha("POST",this.roomServer_+"/room/join/"+this.params_.roomId+window.location.search).then(function(a){console.log("sendAsyncUrlRequest rsult",a);var n=va(a);if(n){if("SUCCESS"===n.result)console.log("Joined the room."),e(n.params);else if(t(Error("Registration error: "+n.result)),"FULL"===n.result){var o=this.roomServer_+"/r/"+this.params_.roomId+window.location.search;window.location.assign(o)}}else t(Error("Error parsing response JSON."))}.bind(this)).catch(function(e){t(Error("Failed to join the room: "+e.message))})}.bind(this))},Wa.prototype.onRecvSignalingChannelMessage_=function(e){this.maybeCreatePcClientAsync_().then(this.pcClient_.receiveSignalingMessage(e))},Wa.prototype.sendSignalingMessage_=function(e){var t=JSON.stringify(e);if(this.params_.isInitiator){var a=this.roomServer_+"/message/"+this.params_.roomId+"/"+this.params_.clientId+window.location.search,n=new XMLHttpRequest;n.open("POST",a,!0),n.send(t),console.log("C->GAE: "+t)}else this.channel_.send(t)},Wa.prototype.onError_=function(e){this.onerror&&this.onerror(e)};var Ja=function(){},Ya=function e(t,a,n,o){this.roomSelectionDiv_=t,this.setupCompletedCallback_=o,this.roomIdInput_=this.roomSelectionDiv_.querySelector(a.roomSelectionInput),this.roomIdInputLabel_=this.roomSelectionDiv_.querySelector(a.roomSelectionInputLabel),this.roomJoinButton_=this.roomSelectionDiv_.querySelector(a.roomSelectionJoinButton),this.roomRandomButton_=this.roomSelectionDiv_.querySelector(a.roomSelectionRandomButton),this.roomRecentList_=this.roomSelectionDiv_.querySelector(a.roomSelectionRecentList),this.roomIdInput_.value=ga(9),this.onRoomIdInput_(),this.roomIdInputListener_=this.onRoomIdInput_.bind(this),this.roomIdInput_.addEventListener("input",this.roomIdInputListener_,!1),this.roomIdKeyupListener_=this.onRoomIdKeyPress_.bind(this),this.roomIdInput_.addEventListener("keyup",this.roomIdKeyupListener_,!1),this.roomRandomButtonListener_=this.onRandomButton_.bind(this),this.roomRandomButton_.addEventListener("click",this.roomRandomButtonListener_,!1),this.roomJoinButtonListener_=this.onJoinButton_.bind(this),this.roomJoinButton_.addEventListener("click",this.roomJoinButtonListener_,!1),this.onRoomSelected=null,this.recentlyUsedList_=new e.RecentlyUsedList(n),this.startBuildingRecentRoomList_()};function Qa(e,t,a){var n={audio:{local:{audioLevel:0,bytesSent:0,clockRate:0,codecId:"",mimeType:"",packetsSent:0,payloadType:0,timestamp:0,trackId:"",transportId:""},remote:{audioLevel:0,bytesReceived:0,clockRate:0,codecId:"",fractionLost:0,jitter:0,mimeType:"",packetsLost:0,packetsReceived:0,payloadType:0,timestamp:0,trackId:"",transportId:""}},video:{local:{bytesSent:0,clockRate:0,codecId:"",firCount:0,framesEncoded:0,frameHeight:0,framesSent:0,frameWidth:0,nackCount:0,packetsSent:0,payloadType:0,pliCount:0,qpSum:0,timestamp:0,trackId:"",transportId:""},remote:{bytesReceived:0,clockRate:0,codecId:"",firCount:0,fractionLost:0,frameHeight:0,framesDecoded:0,framesDropped:0,framesReceived:0,frameWidth:0,nackCount:0,packetsLost:0,packetsReceived:0,payloadType:0,pliCount:0,qpSum:0,timestamp:0,trackId:"",transportId:""}},connection:{availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,localCandidateId:"",localCandidateType:"",localIp:"",localPort:0,localPriority:0,localProtocol:"",localRelayProtocol:void 0,remoteCandidateId:"",remoteCandidateType:"",remoteIp:"",remotePort:0,remotePriority:0,remoteProtocol:"",requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,timestamp:0,totalRoundTripTime:0}};return e&&(e.forEach(function(e,o){switch(e.type){case"outbound-rtp":e.hasOwnProperty("trackId")&&(-1!==e.trackId.indexOf(t.audio)&&(n.audio.local.bytesSent=e.bytesSent,n.audio.local.codecId=e.codecId,n.audio.local.packetsSent=e.packetsSent,n.audio.local.timestamp=e.timestamp,n.audio.local.trackId=e.trackId,n.audio.local.transportId=e.transportId),-1!==e.trackId.indexOf(t.video)&&(n.video.local.bytesSent=e.bytesSent,n.video.local.codecId=e.codecId,n.video.local.firCount=e.firCount,n.video.local.framesEncoded=e.frameEncoded,n.video.local.framesSent=e.framesSent,n.video.local.packetsSent=e.packetsSent,n.video.local.pliCount=e.pliCount,n.video.local.qpSum=e.qpSum,n.video.local.timestamp=e.timestamp,n.video.local.trackId=e.trackId,n.video.local.transportId=e.transportId));break;case"inbound-rtp":e.hasOwnProperty("trackId")&&(-1!==e.trackId.indexOf(a.audio)&&(n.audio.remote.bytesReceived=e.bytesReceived,n.audio.remote.codecId=e.codecId,n.audio.remote.fractionLost=e.fractionLost,n.audio.remote.jitter=e.jitter,n.audio.remote.packetsLost=e.packetsLost,n.audio.remote.packetsReceived=e.packetsReceived,n.audio.remote.timestamp=e.timestamp,n.audio.remote.trackId=e.trackId,n.audio.remote.transportId=e.transportId),-1!==e.trackId.indexOf(a.video)&&(n.video.remote.bytesReceived=e.bytesReceived,n.video.remote.codecId=e.codecId,n.video.remote.firCount=e.firCount,n.video.remote.fractionLost=e.fractionLost,n.video.remote.nackCount=e.nackCount,n.video.remote.packetsLost=e.patsLost,n.video.remote.packetsReceived=e.packetsReceived,n.video.remote.pliCount=e.pliCount,n.video.remote.qpSum=e.qpSum,n.video.remote.timestamp=e.timestamp,n.video.remote.trackId=e.trackId,n.video.remote.transportId=e.transportId));break;case"candidate-pair":e.hasOwnProperty("availableOutgoingBitrate")&&(n.connection.availableOutgoingBitrate=e.availableOutgoingBitrate,n.connection.bytesReceived=e.bytesReceived,n.connection.bytesSent=e.bytesSent,n.connection.consentRequestsSent=e.consentRequestsSent,n.connection.currentRoundTripTime=e.currentRoundTripTime,n.connection.localCandidateId=e.localCandidateId,n.connection.remoteCandidateId=e.remoteCandidateId,n.connection.requestsReceived=e.requestsReceived,n.connection.requestsSent=e.requestsSent,n.connection.responsesReceived=e.responsesReceived,n.connection.responsesSent=e.responsesSent,n.connection.timestamp=e.timestamp,n.connection.totalRoundTripTime=e.totalRoundTripTime);break;default:return}}.bind()),e.forEach(function(e){switch(e.type){case"track":e.hasOwnProperty("trackIdentifier")&&(-1!==e.trackIdentifier.indexOf(t.video)&&(n.video.local.frameHeight=e.frameHeight,n.video.local.framesSent=e.framesSent,n.video.local.frameWidth=e.frameWidth),-1!==e.trackIdentifier.indexOf(a.video)&&(n.video.remote.frameHeight=e.frameHeight,n.video.remote.framesDecoded=e.framesDecoded,n.video.remote.framesDropped=e.framesDropped,n.video.remote.framesReceived=e.framesReceived,n.video.remote.frameWidth=e.frameWidth),-1!==e.trackIdentifier.indexOf(t.audio)&&(n.audio.local.audioLevel=e.audioLevel),-1!==e.trackIdentifier.indexOf(a.audio)&&(n.audio.remote.audioLevel=e.audioLevel));break;case"codec":e.hasOwnProperty("id")&&(-1!==e.id.indexOf(n.audio.local.codecId)&&(n.audio.local.clockRate=e.clockRate,n.audio.local.mimeType=e.mimeType,n.audio.local.payloadType=e.payloadType),-1!==e.id.indexOf(n.audio.remote.codecId)&&(n.audio.remote.clockRate=e.clockRate,n.audio.remote.mimeType=e.mimeType,n.audio.remote.payloadType=e.payloadType),-1!==e.id.indexOf(n.video.local.codecId)&&(n.video.local.clockRate=e.clockRate,n.video.local.mimeType=e.mimeType,n.video.local.payloadType=e.payloadType),-1!==e.id.indexOf(n.video.remote.codecId)&&(n.video.remote.clockRate=e.clockRate,n.video.remote.mimeType=e.mimeType,n.video.remote.payloadType=e.payloadType));break;case"local-candidate":e.hasOwnProperty("id")&&-1!==e.id.indexOf(n.connection.localCandidateId)&&(n.connection.localIp=e.ip,n.connection.localPort=e.port,n.connection.localPriority=e.priority,n.connection.localProtocol=e.protocol,n.connection.localType=e.candidateType,n.connection.localRelayProtocol=e.relayProtocol);break;case"remote-candidate":e.hasOwnProperty("id")&&-1!==e.id.indexOf(n.connection.remoteCandidateId)&&(n.connection.remoteIp=e.ip,n.connection.remotePort=e.port,n.connection.remotePriority=e.priority,n.connection.remoteProtocol=e.protocol,n.connection.remoteType=e.candidateType);break;default:return}}.bind())),n}Ya.matchRandomRoomPattern=function(e){return null!==e.match(/^\d{9}$/)},Ya.prototype.removeEventListeners=function(){this.roomIdInput_.removeEventListener("input",this.roomIdInputListener_),this.roomIdInput_.removeEventListener("keyup",this.roomIdKeyupListener_),this.roomRandomButton_.removeEventListener("click",this.roomRandomButtonListener_),this.roomJoinButton_.removeEventListener("click",this.roomJoinButtonListener_)},Ya.prototype.startBuildingRecentRoomList_=function(){this.recentlyUsedList_.getRecentRooms().then(function(e){this.buildRecentRoomList_(e),this.setupCompletedCallback_&&this.setupCompletedCallback_()}.bind(this)).catch(function(e){console.log("Error building recent rooms list: "+e.message)})},Ya.prototype.buildRecentRoomList_=function(e){for(var t=this.roomRecentList_.lastChild;t;)this.roomRecentList_.removeChild(t),t=this.roomRecentList_.lastChild;for(var a=0;a<e.length;++a){var n=document.createElement("li"),o=document.createElement("a"),i=document.createTextNode(e[a]);o.appendChild(i),o.href=window.location.origin+"/r/"+encodeURIComponent(e[a]),n.appendChild(o),this.roomRecentList_.appendChild(n),o.addEventListener("click",this.makeRecentlyUsedClickHandler_(e[a]).bind(this),!1)}},Ya.prototype.onRoomIdInput_=function(){var e=this.roomIdInput_.value,t=e.length>=5;(t=t&&/^([a-zA-Z0-9-_]+)+$/.exec(e))?(this.roomJoinButton_.disabled=!1,this.roomIdInput_.classList.remove("invalid"),this.roomIdInputLabel_.classList.add("hidden")):(this.roomJoinButton_.disabled=!0,this.roomIdInput_.classList.add("invalid"),this.roomIdInputLabel_.classList.remove("hidden"))},Ya.prototype.onRoomIdKeyPress_=function(e){13!==e.which||this.roomJoinButton_.disabled||this.onJoinButton_()},Ya.prototype.onRandomButton_=function(){this.roomIdInput_.value=ga(9),this.onRoomIdInput_()},Ya.prototype.onJoinButton_=function(){this.loadRoom_(this.roomIdInput_.value)},Ya.prototype.makeRecentlyUsedClickHandler_=function(e){return function(t){t.preventDefault(),this.loadRoom_(e)}},Ya.prototype.loadRoom_=function(e){this.recentlyUsedList_.pushRecentRoom(e),this.onRoomSelected&&this.onRoomSelected(e)},(Ya.RecentlyUsedList=function(e){this.LISTLENGTH_=10,this.RECENTROOMSKEY_=e||"recentRooms",this.storage_=new Ja}).prototype.pushRecentRoom=function(e){return new Promise(function(t,a){e?this.getRecentRooms().then(function(t){t=(t=(t=[e].concat(t)).filter(function(e,t,a){return a.indexOf(e)===t})).slice(0,this.LISTLENGTH_)}.bind(this)).catch(function(e){a(e)}):t()}.bind(this))},Ya.RecentlyUsedList.prototype.getRecentRooms=function(){return new Promise(function(e){e([])})};var Za=function(e,t,a){this.infoDiv_=e,this.remoteVideo_=document.getElementById("remote-video"),this.localVideo_=document.getElementById("mini-video"),this.call_=t,this.versionInfo_=a,this.errorMessages_=[],this.warningMessages_=[],this.startTime_=null,this.connectTime_=null,this.stats_=null,this.prevStats_=null,this.getStatsTimer_=null,this.localTrackIds_={video:"",audio:""},this.remoteTrackIds_={video:"",audio:""},this.iceCandidateTypes_={Local:{},Remote:{}},this.localDecodedFrames_=0,this.localStartTime_=0,this.localVideo_.addEventListener("playing",function(e){this.localDecodedFrames_=e.target.webkitDecodedFrameCount,this.localStartTime_=(new Date).getTime()}.bind(this)),this.remoteDecodedFrames_=0,this.remoteStartTime_=0,this.remoteVideo_.addEventListener("playing",function(e){this.remoteDecodedFrames_=e.target.webkitDecodedFrameCount,this.remoteStartTime_=(new Date).getTime()}.bind(this))};Za.prototype.getLocalTrackIds=function(e){e.getTracks().forEach(function(e){"audio"===e.kind?this.localTrackIds_.audio=e.id:"video"===e.kind&&(this.localTrackIds_.video=e.id)}.bind(this))},Za.prototype.getRemoteTrackIds=function(e){e.getTracks().forEach(function(e){"audio"===e.kind?this.remoteTrackIds_.audio=e.id:"video"===e.kind&&(this.remoteTrackIds_.video=e.id)}.bind(this))},Za.prototype.recordIceCandidateTypes=function(e,t){var a=ja(t),n=this.iceCandidateTypes_[e];n[a]?++n[a]:n[a]=1,this.updateInfoDiv()},Za.prototype.pushErrorMessage=function(e){this.errorMessages_.push(e),this.updateInfoDiv(),this.showInfoDiv()},Za.prototype.pushWarningMessage=function(e){this.warningMessages_.push(e),this.updateInfoDiv(),this.showInfoDiv()},Za.prototype.setSetupTimes=function(e,t){this.startTime_=e,this.connectTime_=t},Za.prototype.showInfoDiv=function(){this.getStatsTimer_=setInterval(this.refreshStats_.bind(this),1e3),this.refreshStats_(),this.infoDiv_.classList.add("active")},Za.prototype.toggleInfoDiv=function(){this.infoDiv_.classList.contains("active")?(clearInterval(this.getStatsTimer_),this.infoDiv_.classList.remove("active")):this.showInfoDiv()},Za.prototype.refreshStats_=function(){this.call_.getPeerConnectionStats(function(e){this.prevStats_=this.stats_,this.stats_=e,this.updateInfoDiv()}.bind(this))},Za.prototype.updateInfoDiv=function(){var e='<pre id="info-box-stats" style="line-height: initial">';if(this.stats_){var t=this.call_.getPeerConnectionStates();if(!t)return;for(var a in e+=this.buildLine_("States"),e+=this.buildLine_("Signaling",t.signalingState),e+=this.buildLine_("Gathering",t.iceGatheringState),e+=this.buildLine_("Connection",t.iceConnectionState),this.iceCandidateTypes_){var n=[];for(var o in this.iceCandidateTypes_[a])n.push(o+":"+this.iceCandidateTypes_[a][o]);e+=this.buildLine_(a,n.join(" "))}var i,r,s,l,c,u,d=Qa(this.stats_,this.localTrackIds_,this.remoteTrackIds_).connection;if(d&&(i=d.localIp,r=d.remoteIp,s=d.localType,l=d.remoteType,c=d.localPort,u=d.remotePort),i&&r){var m=d.localRelayProtocol;e+=this.buildLine_("LocalAddr",i+" ("+s+(void 0!==typeof m?"TURN/"+m.toUpperCase():"")+")"),e+=this.buildLine_("LocalPort",c),e+=this.buildLine_("RemoteAddr",r+" ("+l+")"),e+=this.buildLine_("RemotePort",u)}e+=this.buildLine_(),e+=this.buildStatsSection_()}if(this.errorMessages_.length>0||this.warningMessages_.length>0)if(e+=this.buildLine_("\nMessages"),this.errorMessages_.length){this.infoDiv_.classList.add("warning");for(var p=0;p!==this.errorMessages_.length;++p)e+=this.errorMessages_[p]+"\n"}else{this.infoDiv_.classList.add("active");for(var h=0;h!==this.warningMessages_.length;++h)e+=this.warningMessages_[h]+"\n"}else this.infoDiv_.classList.remove("warning");if(this.versionInfo_)for(var f in e+=this.buildLine_(),e+=this.buildLine_("Version"),this.versionInfo_)e+=this.buildLine_(f,this.versionInfo_[f]);e+="</pre>",this.infoDiv_.innerHTML!==e&&(this.infoDiv_.innerHTML=e)},Za.prototype.buildStatsSection_=function(){var e=this.buildLine_("Stats"),t=Qa(this.stats_,this.localTrackIds_,this.remoteTrackIds_),a=Qa(this.prevStats_,this.localTrackIds_,this.remoteTrackIds_),n=1e3*t.connection.totalRoundTripTime,o=1e3*t.connection.currentRoundTripTime;null!==this.endTime_&&(e+=this.buildLine_("Call time",Za.formatInterval_(window.performance.now()-this.connectTime_)),e+=this.buildLine_("Setup time",Za.formatMsec_(this.connectTime_-this.startTime_))),""!==t.connection.remoteIp&&(e+=this.buildLine_("TotalRtt",Za.formatMsec_(n)),e+=this.buildLine_("CurrentRtt",Za.formatMsec_(o)));var i,r,s,l,c,u,d,m,p,h,f,v,g,b,y,_,w,E,k,S,T,C,O,j,I,N,R,L,A,P,D,x,M=t.audio.remote,B=a.audio.remote,F=a.video.remote,V=t.video.remote,G=t.audio.local,U=a.audio.local,H=a.video.local,z=t.video.local;return""!==G.codecId&&0!==G.payloadType&&(S=G.mimeType,T=parseFloat(G.audioLevel).toFixed(3),k=G.clockRate,O=G.payloadType,E=computeBitrate(G,U,"bytesSent"),C=computeRate(G,U,"packetsSent"),e+=this.buildLine_("Audio Tx",S+"/"+O+", rate "+k+", "+Za.formatBitrate_(E)+", "+Za.formatPacketRate_(C)+", inputLevel "+T)),""!==M.codecId&&0!==M.payloadType&&(s=M.mimeType,c=parseFloat(M.audioLevel).toFixed(3),l=parseFloat(M.jitter).toFixed(3),r=M.clockRate,d=M.payloadType,i=computeBitrate(M,B,"bytesReceived"),u=computeRate(M,B,"packetsReceived"),e+=this.buildLine_("Audio Rx",s+"/"+d+", rate "+r+", jitter "+l+", "+Za.formatBitrate_(i)+", "+Za.formatPacketRate_(u)+", outputLevel "+c)),""!==z.codecId&&0!==z.payloadType&&0!==z.frameHeight&&(I=z.mimeType,L=z.frameHeight,x=z.payloadType,D=z.pliCount,N=z.firCount,A=z.nackCount,R=calculateFps(this.remoteVideo_,this.remoteDecodedFrames_,this.remoteStartTime_,"local",this.updateDecodedFramesCallback_),j=computeBitrate(z,H,"bytesSent"),P=computeRate(z,H,"packetsSent"),e+=this.buildLine_("Video Tx",I+"/"+x+", "+L.toString()+"p"+R.toString()+", firCount "+N+", pliCount "+D+", nackCount "+A+", "+Za.formatBitrate_(j)+", "+Za.formatPacketRate_(P))),""!==V.codecId&&0!==V.payloadType&&0!==z.frameHeight&&(p=V.mimeType,g=V.frameHeight,w=V.payloadType,h=V.framesDropped,_=V.pliCount,f=V.firCount,b=V.nackCount,v=calculateFps(this.remoteVideo_,this.remoteDecodedFrames_,this.remoteStartTime_,"remote",this.updateDecodedFramesCallback_),m=computeBitrate(V,F,"bytesReceived"),y=computeRate(V,F,"packetsReceived"),e+=this.buildLine_("Video Rx",p+"/"+w+", "+g.toString()+"p"+v.toString()+", firCount "+f+", pliCount "+_+", nackCount "+b+", droppedFrames "+h+", "+Za.formatBitrate_(m)+", "+Za.formatPacketRate_(y))),e},Za.prototype.updateDecodedFramesCallback_=function(e,t,a){"local"===a?(this.localDecodedFrames_=e,this.localStartTime_=t):"remote"===a&&(this.remoteDecodedFrames_=e,this.remoteStartTime_=t)},Za.prototype.buildLine_=function(e,t){var a="";if(e){for(a+=e+":";a.length<12;)a+=" ";t&&(a+=t)}return a+="\n"},Za.formatInterval_=function(e){var t="",a=Math.floor(e/1e3),n=Math.floor(a/60),o=Math.floor(n/60),i=function(e){return(e<10?"0":"")+e.toString()};return o>0&&(t+=i(o)+":"),t+=i(n-60*o)+":",t+=i(a-60*n)},Za.formatMsec_=function(e){return e.toFixed(0).toString()+" ms"},Za.formatBitrate_=function(e){return e?(e<1e3?t="bps":e<1e6?(t="kbps",e/=1e3):(t="Mbps",e/=1e6),e.toPrecision(3)+" "+t):"- bps";var t},Za.formatPacketRate_=function(e){return e?e.toPrecision(3)+" pps":"- pps"};a(237);var Ka={confirmJoinButton:"#confirm-join-button",confirmJoinDiv:"#confirm-join-div",confirmJoinRoomSpan:"#confirm-join-room-span",fullscreenSvg:"#fullscreen",hangupSvg:"#hangup",icons:"#icons",infoDiv:"#info-div",localVideo:"#local-video",miniVideo:"#mini-video",muteAudioSvg:"#mute-audio",muteVideoSvg:"#mute-video",newRoomButton:"#new-room-button",newRoomLink:"#new-room-link",privacyLinks:"#privacy",remoteVideo:"#remote-video",rejoinButton:"#rejoin-button",rejoinDiv:"#rejoin-div",rejoinLink:"#rejoin-link",roomLinkHref:"#room-link-href",roomSelectionDiv:"#room-selection",roomSelectionInput:"#room-id-input",roomSelectionInputLabel:"#room-id-input-label",roomSelectionJoinButton:"#join-button",roomSelectionRandomButton:"#random-button",roomSelectionRecentList:"#recent-rooms-list",sharingDiv:"#sharing-div",statusDiv:"#status-div",videosDiv:"#videos"},Xa=function e(t){console.log("Initializing; server= "+t.roomServer+"."),console.log("Initializing; room="+t.roomId+"."),this.hangupSvg_=pa(Ka.hangupSvg),this.icons_=pa(Ka.icons),this.localVideo_=pa(Ka.localVideo),this.miniVideo_=pa(Ka.miniVideo),this.sharingDiv_=pa(Ka.sharingDiv),this.statusDiv_=pa(Ka.statusDiv),this.remoteVideo_=pa(Ka.remoteVideo),this.videosDiv_=pa(Ka.videosDiv),this.roomLinkHref_=pa(Ka.roomLinkHref),this.rejoinDiv_=pa(Ka.rejoinDiv),this.rejoinLink_=pa(Ka.rejoinLink),this.newRoomLink_=pa(Ka.newRoomLink),this.rejoinButton_=pa(Ka.rejoinButton),this.newRoomButton_=pa(Ka.newRoomButton),this.newRoomButton_.addEventListener("click",this.onNewRoomClick_.bind(this),!1),this.rejoinButton_.addEventListener("click",this.onRejoinClick_.bind(this),!1),this.muteAudioIconSet_=new e.IconSet_(Ka.muteAudioSvg),this.muteVideoIconSet_=new e.IconSet_(Ka.muteVideoSvg),this.fullscreenIconSet_=new e.IconSet_(Ka.fullscreenSvg),this.loadingParams_=t,this.loadUrlParams_();var a=Promise.resolve({});this.loadingParams_.paramsFunction&&(a=this.loadingParams_.paramsFunction()),Promise.resolve(a).then(function(e){if(e&&Object.keys(e).forEach(function(t){this.loadingParams_[t]=e[t]}.bind(this)),this.roomLink_="",this.roomSelection_=null,this.localStream_=null,this.remoteVideoResetTimer_=null,this.loadingParams_.roomId){this.createCall_(),Ya.matchRandomRoomPattern(this.loadingParams_.roomId)||(pa(Ka.confirmJoinRoomSpan).textContent=' "'+this.loadingParams_.roomId+'"');var t=pa(Ka.confirmJoinDiv);this.show_(t),pa(Ka.confirmJoinButton).onclick=function(){this.hide_(t),(new Ya.RecentlyUsedList).pushRecentRoom(this.loadingParams_.roomId),this.finishCallSetup_(this.loadingParams_.roomId)}.bind(this),this.loadingParams_.bypassJoinConfirmation&&pa(Ka.confirmJoinButton).onclick()}else this.showRoomSelection_()}.bind(this)).catch(function(e){console.log("Error initializing: "+e.message,e)})};Xa.prototype.createCall_=function(){var e=pa(Ka.privacyLinks);this.hide_(e),this.call_=new Wa(this.loadingParams_),this.infoBox_=new Za(pa(Ka.infoDiv),this.call_,this.loadingParams_.versionInfo);var t=this.loadingParams_.errorMessages,a=this.loadingParams_.warningMessages;if(t&&t.length>0)for(var n=0;n<t.length;++n)this.infoBox_.pushErrorMessage(t[n]);else{if(a&&a.length>0)for(var o=0;o<a.length;++o)this.infoBox_.pushWarningMessage(a[o]);this.call_.onremotehangup=this.onRemoteHangup_.bind(this),this.call_.onremotesdpset=this.onRemoteSdpSet_.bind(this),this.call_.onremotestreamadded=this.onRemoteStreamAdded_.bind(this),this.call_.onlocalstreamadded=this.onLocalStreamAdded_.bind(this),this.call_.onsignalingstatechange=this.infoBox_.updateInfoDiv.bind(this.infoBox_),this.call_.oniceconnectionstatechange=this.infoBox_.updateInfoDiv.bind(this.infoBox_),this.call_.onnewicecandidate=this.infoBox_.recordIceCandidateTypes.bind(this.infoBox_),this.call_.onerror=this.displayError_.bind(this),this.call_.onstatusmessage=this.displayStatus_.bind(this),this.call_.oncallerstarted=this.displaySharingInfo_.bind(this)}},Xa.prototype.showRoomSelection_=function(){var e=pa(Ka.roomSelectionDiv);this.roomSelection_=new Ya(e,Ka),this.show_(e),this.roomSelection_.onRoomSelected=function(t){this.hide_(e),this.createCall_(),this.finishCallSetup_(t),this.roomSelection_.removeEventListeners(),this.roomSelection_=null,this.localStream_&&this.attachLocalStream_()}.bind(this)},Xa.prototype.setupUi_=function(){this.iconEventSetup_(),document.onkeypress=this.onKeyPress_.bind(this),window.onmousemove=this.showIcons_.bind(this),pa(Ka.muteAudioSvg).onclick=this.toggleAudioMute_.bind(this),pa(Ka.muteVideoSvg).onclick=this.toggleVideoMute_.bind(this),pa(Ka.fullscreenSvg).onclick=this.toggleFullScreen_.bind(this),pa(Ka.hangupSvg).onclick=this.hangup_.bind(this),ba()?document.cancelFullScreen=function(){chrome.app.window.current().restore()}:document.cancelFullScreen=document.webkitCancelFullScreen||document.mozCancelFullScreen||document.cancelFullScreen,ba()?document.body.requestFullScreen=function(){chrome.app.window.current().fullscreen()}:document.body.requestFullScreen=document.body.webkitRequestFullScreen||document.body.mozRequestFullScreen||document.body.requestFullScreen,document.onfullscreenchange=document.onfullscreenchange||document.onwebkitfullscreenchange||document.onmozfullscreenchange},Xa.prototype.finishCallSetup_=function(e){this.call_.start(e),this.setupUi_(),ba()||(window.onbeforeunload=function(){this.call_.hangup(!1)}.bind(this),window.onpopstate=function(e){e.state?e.state.roomLink&&(window.location.href=e.state.roomLink):(console.log("Reloading main page."),window.location.href=window.location.origin)})},Xa.prototype.hangup_=function(){console.log("Hanging up."),this.hide_(this.icons_),this.displayStatus_("Hanging up"),this.transitionToDone_(),this.call_.hangup(!0),document.onkeypress=null,window.onmousemove=null},Xa.prototype.onRemoteHangup_=function(){this.displayStatus_("The remote side hung up."),this.transitionToWaiting_(),this.call_.onRemoteHangup()},Xa.prototype.onRemoteSdpSet_=function(e){e?(console.log("Waiting for remote video."),this.waitForRemoteVideo_()):(console.log("No remote video stream; not waiting for media to arrive."),this.transitionToActive_())},Xa.prototype.waitForRemoteVideo_=function(){this.remoteVideo_.readyState>=2?(console.log("Remote video started; currentTime: "+this.remoteVideo_.currentTime),this.transitionToActive_()):this.remoteVideo_.oncanplay=this.waitForRemoteVideo_.bind(this)},Xa.prototype.onRemoteStreamAdded_=function(e){this.deactivate_(this.sharingDiv_),console.log("Remote stream added."),this.remoteVideo_.srcObject=e,this.infoBox_.getRemoteTrackIds(e),this.remoteVideoResetTimer_&&(clearTimeout(this.remoteVideoResetTimer_),this.remoteVideoResetTimer_=null)},Xa.prototype.onLocalStreamAdded_=function(e){console.log("User has granted access to local media."),this.localStream_=e,this.infoBox_.getLocalTrackIds(this.localStream_),this.roomSelection_||this.attachLocalStream_()},Xa.prototype.attachLocalStream_=function(){console.log("Attaching local stream."),this.localVideo_.srcObject=this.localStream_,this.displayStatus_(""),this.activate_(this.localVideo_),this.show_(this.icons_),0===this.localStream_.getVideoTracks().length&&this.hide_(pa(Ka.muteVideoSvg)),0===this.localStream_.getAudioTracks().length&&this.hide_(pa(Ka.muteAudioSvg))},Xa.prototype.transitionToActive_=function(){this.remoteVideo_.oncanplay=void 0;var e=window.performance.now();this.infoBox_.setSetupTimes(this.call_.startTime,e),this.infoBox_.updateInfoDiv(),console.log("Call setup time: "+(e-this.call_.startTime).toFixed(0)+"ms."),console.log("reattachMediaStream: "+this.localVideo_.srcObject),this.miniVideo_.srcObject=this.localVideo_.srcObject,this.activate_(this.remoteVideo_),this.activate_(this.miniVideo_),this.deactivate_(this.localVideo_),this.localVideo_.srcObject=null,this.activate_(this.videosDiv_),this.show_(this.hangupSvg_),this.displayStatus_("")},Xa.prototype.transitionToWaiting_=function(){this.remoteVideo_.oncanplay=void 0,this.hide_(this.hangupSvg_),this.deactivate_(this.videosDiv_),this.remoteVideoResetTimer_||(this.remoteVideoResetTimer_=setTimeout(function(){this.remoteVideoResetTimer_=null,console.log("Resetting remoteVideo src after transitioning to waiting."),this.remoteVideo_.srcObject=null}.bind(this),800)),this.localVideo_.srcObject=this.miniVideo_.srcObject,this.activate_(this.localVideo_),this.deactivate_(this.remoteVideo_),this.deactivate_(this.miniVideo_)},Xa.prototype.transitionToDone_=function(){this.remoteVideo_.oncanplay=void 0,this.deactivate_(this.localVideo_),this.deactivate_(this.remoteVideo_),this.deactivate_(this.miniVideo_),this.hide_(this.hangupSvg_),this.activate_(this.rejoinDiv_),this.show_(this.rejoinDiv_),this.displayStatus_("")},Xa.prototype.onRejoinClick_=function(){this.deactivate_(this.rejoinDiv_),this.hide_(this.rejoinDiv_),this.call_.restart(),this.setupUi_()},Xa.prototype.onNewRoomClick_=function(){this.deactivate_(this.rejoinDiv_),this.hide_(this.rejoinDiv_),this.showRoomSelection_()},Xa.prototype.onKeyPress_=function(e){switch(String.fromCharCode(e.charCode)){case" ":case"m":return this.call_&&(this.call_.toggleAudioMute(),this.muteAudioIconSet_.toggle()),!1;case"c":return this.call_&&(this.call_.toggleVideoMute(),this.muteVideoIconSet_.toggle()),!1;case"f":return this.toggleFullScreen_(),!1;case"i":return this.infoBox_.toggleInfoDiv(),!1;case"q":return this.hangup_(),!1;case"l":return this.toggleMiniVideo_(),!1;default:return}},Xa.prototype.pushCallNavigation_=function(e,t){ba()||window.history.pushState({roomId:e,roomLink:t},e,t)},Xa.prototype.displaySharingInfo_=function(e,t){this.roomLinkHref_.href=t,this.roomLinkHref_.text=t,this.roomLink_=t,this.pushCallNavigation_(e,t),this.activate_(this.sharingDiv_)},Xa.prototype.displayStatus_=function(e){""===e?this.deactivate_(this.statusDiv_):this.activate_(this.statusDiv_),this.statusDiv_.innerHTML=e},Xa.prototype.displayError_=function(e){console.log(e),this.infoBox_.pushErrorMessage(e)},Xa.prototype.toggleAudioMute_=function(){this.call_.toggleAudioMute(),this.muteAudioIconSet_.toggle()},Xa.prototype.toggleVideoMute_=function(){this.call_.toggleVideoMute(),this.muteVideoIconSet_.toggle()},Xa.prototype.toggleFullScreen_=function(){(ba()?chrome.app.window.current().isFullscreen():document.webkitIsFullScreen||document.mozFullScreen||document.isFullScreen)?(console.log("Exiting fullscreen."),document.querySelector("svg#fullscreen title").textContent="Enter fullscreen",document.cancelFullScreen()):(console.log("Entering fullscreen."),document.querySelector("svg#fullscreen title").textContent="Exit fullscreen",document.body.requestFullScreen()),this.fullscreenIconSet_.toggle()},Xa.prototype.toggleMiniVideo_=function(){this.miniVideo_.classList.contains("active")?this.deactivate_(this.miniVideo_):this.activate_(this.miniVideo_)},Xa.prototype.hide_=function(e){e&&e.classList.add("hidden")},Xa.prototype.show_=function(e){e.classList.remove("hidden")},Xa.prototype.activate_=function(e){e.classList.add("active")},Xa.prototype.deactivate_=function(e){e.classList.remove("active")},Xa.prototype.showIcons_=function(){this.icons_.classList.contains("active")||(this.activate_(this.icons_),this.setIconTimeout_())},Xa.prototype.hideIcons_=function(){this.icons_.classList.contains("active")&&this.deactivate_(this.icons_)},Xa.prototype.setIconTimeout_=function(){this.hideIconsAfterTimeout&&window.clearTimeout.bind(this,this.hideIconsAfterTimeout),this.hideIconsAfterTimeout=window.setTimeout(function(){this.hideIcons_()}.bind(this),5e3)},Xa.prototype.iconEventSetup_=function(){this.icons_.onmouseenter=function(){window.clearTimeout(this.hideIconsAfterTimeout)}.bind(this),this.icons_.onmouseleave=function(){this.setIconTimeout_()}.bind(this)},Xa.prototype.loadUrlParams_=function(){var e=function(e){var t=e.slice(1).split("&"),a={};return t.forEach(function(e){e&&(e=e.split("="))[0]&&(a[e[0]]=decodeURIComponent(e[1]||""))}),a}(window.window.location.search);this.loadingParams_.audioSendBitrate=e.asbr,this.loadingParams_.audioSendCodec=e.asc,this.loadingParams_.audioRecvBitrate=e.arbr,this.loadingParams_.audioRecvCodec=e.arc,this.loadingParams_.opusMaxPbr=e.opusmaxpbr,this.loadingParams_.opusFec=e.opusfec,this.loadingParams_.opusDtx=e.opusdtx,this.loadingParams_.opusStereo=e.stereo,this.loadingParams_.videoSendBitrate=e.vsbr,this.loadingParams_.videoSendInitialBitrate=e.vsibr,this.loadingParams_.videoSendCodec=e.vsc,this.loadingParams_.videoRecvBitrate=e.vrbr,this.loadingParams_.videoRecvCodec=e.vrc||"VP9",this.loadingParams_.videoFec=e.videofec},(Xa.IconSet_=function(e){this.iconElement=document.querySelector(e)}).prototype.toggle=function(){this.iconElement.classList.contains("on")?this.iconElement.classList.remove("on"):this.iconElement.classList.add("on")};var $a=Le.initScrollable(),en=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){var e="https://jie8.cc/api/rtc",t={errorMessages:[],warningMessages:[],suggestedRoomId:ga(9),roomServer:e,connect:!1,paramsFunction:function(){return new Promise(function(t,a){ya("Initializing; retrieving params from: "+e+"/params");var n=function(e){var t={};if(e.indexOf("?")>-1){var a=e.split("?")[1].split("&");for(var n in a){var o=a[n];o.indexOf("=")&&(t[o.split("=")[0]]=decodeURIComponent(o.split("=")[1]))}}return t}(window.location.href),o=n.room_id?"?room_id="+n.room_id:"",i=e+"/params"+o;console.log("===>>>>sendAsyncUrlRequest url:",i),ha("GET",i).then(function(e){var a=va(e);console.log("===>>sendAsyncUrlRequest result",a);var n={};a?(n.isLoopback="true"===a.is_loopback,n.mediaConstraints=va(a.media_constraints),n.offerOptions=va(a.offer_options),n.peerConnectionConfig=va(a.pc_config),n.peerConnectionConstraints=va(a.pc_constraints),n.iceServerRequestUrl=a.ice_server_url,n.iceServerTransports=a.ice_server_transports,n.wssUrl=a.wss_url,n.wssPostUrl=a.wss_post_url,n.versionInfo=va(a.version_info),n.messages=a.messages,n.roomId=a.room_id,n.room_link=a.room_link,ya("Initializing; parameters from server: "),ya(JSON.stringify(n)),t(n)):t(n)}).catch(function(e){ya("Initializing; error getting params from server: "+e.message),a(e)})})}};new Xa(t)}},{key:"render",value:function(){return o.a.createElement(Le,{fill:!0,scrollable:$a},o.a.createElement("div",{className:"rtc",style:{padding:"16px 0"}},o.a.createElement("div",{id:"videos"},o.a.createElement("video",{id:"mini-video",autoPlay:!0,playsInline:!0,muted:!0}),o.a.createElement("video",{id:"remote-video",autoPlay:!0,playsInline:!0}),o.a.createElement("video",{id:"local-video",autoPlay:!0,playsInline:!0,muted:!0})),o.a.createElement("div",{id:"room-selection",className:"hidden"},o.a.createElement("h1",null,"PtRTC"),o.a.createElement("p",{id:"instructions"},"Please enter a room name."),o.a.createElement("div",null,o.a.createElement("div",{id:"room-id-input-div"},o.a.createElement("input",{type:"text",id:"room-id-input",autoFocus:!0}),o.a.createElement("label",{className:"error-label hidden",htmlFor:"room-id-input",id:"room-id-input-label"},"Room name must be 5 or more characters and include only letters, numbers, underscore and hyphen.")),o.a.createElement("div",{id:"room-id-input-buttons"},o.a.createElement("button",{id:"join-button"},"JOIN"),o.a.createElement("button",{className:"hide",id:"random-button"}))),o.a.createElement("div",{id:"recent-rooms"},o.a.createElement("ul",{id:"recent-rooms-list"}))),o.a.createElement("div",{id:"confirm-join-div",className:"hidden"},o.a.createElement("div",null,"Ready to join",o.a.createElement("span",{id:"confirm-join-room-span"}),"?"),o.a.createElement("button",{id:"confirm-join-button"},"JOIN")),o.a.createElement("footer",null,o.a.createElement("div",{id:"sharing-div"},o.a.createElement("div",{id:"room-link"},"Waiting for someone to join this room: ",o.a.createElement("a",{id:"room-link-href",href:"",target:"_blank"}))),o.a.createElement("div",{id:"info-div"},"Code for PtRTC is available from ",o.a.createElement("a",{href:"http://github.com/webrtc/PtRTC",title:"GitHub repo for PtRTC"},"github.com/webrtc/PtRTC")),o.a.createElement("div",{id:"status-div"}),o.a.createElement("div",{id:"rejoin-div",className:"hidden"},o.a.createElement("span",null,"You have left the call."),o.a.createElement("button",{id:"rejoin-button"},"REJOIN"),o.a.createElement("button",{id:"new-room-button"},"NEW ROOM"))),o.a.createElement("div",{id:"icons",className:"hidden"},o.a.createElement("svg",{id:"mute-audio",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"-10 -10 68 68"},o.a.createElement("title",null,"title"),o.a.createElement("circle",{cx:"24",cy:"24",r:"34"},o.a.createElement("title",null,"Mute audio")),o.a.createElement("path",{className:"on",transform:"scale(0.6), translate(17,18)",d:"M38 22h-3.4c0 1.49-.31 2.87-.87 4.1l2.46 2.46C37.33 26.61 38 24.38 38 22zm-8.03.33c0-.11.03-.22.03-.33V10c0-3.32-2.69-6-6-6s-6 2.68-6 6v.37l11.97 11.96zM8.55 6L6 8.55l12.02 12.02v1.44c0 3.31 2.67 6 5.98 6 .45 0 .88-.06 1.3-.15l3.32 3.32c-1.43.66-3 1.03-4.62 1.03-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c1.81-.27 3.53-.9 5.08-1.81L39.45 42 42 39.46 8.55 6z",fill:"white"}),o.a.createElement("path",{className:"off",transform:"scale(0.6), translate(17,18)",d:"M24 28c3.31 0 5.98-2.69 5.98-6L30 10c0-3.32-2.68-6-6-6-3.31 0-6 2.68-6 6v12c0 3.31 2.69 6 6 6zm10.6-6c0 6-5.07 10.2-10.6 10.2-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c6.56-.97 12-6.61 12-13.44h-3.4z",fill:"white"})),o.a.createElement("svg",{id:"mute-video",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"-10 -10 68 68"},o.a.createElement("circle",{cx:"24",cy:"24",r:"34"},o.a.createElement("title",null,"Mute video")),o.a.createElement("path",{className:"on",transform:"scale(0.6), translate(17,16)",d:"M40 8H15.64l8 8H28v4.36l1.13 1.13L36 16v12.36l7.97 7.97L44 36V12c0-2.21-1.79-4-4-4zM4.55 2L2 4.55l4.01 4.01C4.81 9.24 4 10.52 4 12v24c0 2.21 1.79 4 4 4h29.45l4 4L44 41.46 4.55 2zM12 16h1.45L28 30.55V32H12V16z",fill:"white"}),o.a.createElement("path",{className:"off",transform:"scale(0.6), translate(17,16)",d:"M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm-4 24l-8-6.4V32H12V16h16v6.4l8-6.4v16z",fill:"white"})),o.a.createElement("svg",{id:"fullscreen",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"-10 -10 68 68"},o.a.createElement("circle",{cx:"24",cy:"24",r:"34"},o.a.createElement("title",null,"Enter fullscreen")),o.a.createElement("path",{className:"on",transform:"scale(0.8), translate(7,6)",d:"M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z",fill:"white"}),o.a.createElement("path",{className:"off",transform:"scale(0.8), translate(7,6)",d:"M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z",fill:"white"})),o.a.createElement("svg",{id:"hangup",className:"hidden",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"-10 -10 68 68"},o.a.createElement("circle",{cx:"24",cy:"24",r:"34"},o.a.createElement("title",null,"Hangup")),o.a.createElement("path",{transform:"scale(0.7), translate(11,10)",d:"M24 18c-3.21 0-6.3.5-9.2 1.44v6.21c0 .79-.46 1.47-1.12 1.8-1.95.98-3.74 2.23-5.33 3.7-.36.35-.85.57-1.4.57-.55 0-1.05-.22-1.41-.59L.59 26.18c-.37-.37-.59-.87-.59-1.42 0-.55.22-1.05.59-1.42C6.68 17.55 14.93 14 24 14s17.32 3.55 23.41 9.34c.37.36.59.87.59 1.42 0 .55-.22 1.05-.59 1.41l-4.95 4.95c-.36.36-.86.59-1.41.59-.54 0-1.04-.22-1.4-.57-1.59-1.47-3.38-2.72-5.33-3.7-.66-.33-1.12-1.01-1.12-1.8v-6.21C30.3 18.5 27.21 18 24 18z",fill:"white"})))))}}]),t}(n.Component);en.navigationBar="main",en.getNavigation=function(e,t){return ne("WebRtc"),{title:"WebRtc",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:demo",{transition:"reveal-from-right"})}}};var tn=a(69),an={FULL:0,HALF_LEFT:1,HALF_RIGHT:2},nn=0,on=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ce.a)(t).call(this,e)))._containerId=nn++,a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return o.a.createElement("div",this.props,this.props.children,o.a.createElement("div",null,"Cell Id: ",this._containerId))}}]),t}(o.a.Component),rn=function(e){function t(){var e;Object(se.a)(this,t),e=Object(le.a)(this,Object(ce.a)(t).call(this));var a=window.innerWidth,n=new tn.DataProvider(function(e,t){return e!==t});return e._layoutProvider=new tn.LayoutProvider(function(e){return e%3===0?an.FULL:e%3===1?an.HALF_LEFT:an.HALF_RIGHT},function(e,t){switch(e){case an.HALF_LEFT:t.width=a/2-1e-4,t.height=160;break;case an.HALF_RIGHT:t.width=a/2,t.height=160;break;case an.FULL:t.width=a,t.height=140;break;default:t.width=0,t.height=0}}),e._rowRenderer=e._rowRenderer.bind(Object(Bt.a)(Object(Bt.a)(e))),e.state={dataProvider:n.cloneWithRows(e._generateArray(300))},e}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"_generateArray",value:function(e){for(var t=new Array(e),a=0;a<e;a++)t[a]=a;return t}}]),Object(ue.a)(t,[{key:"_rowRenderer",value:function(e,t){switch(e){case an.HALF_LEFT:return o.a.createElement(on,{style:sn.containerGridLeft},o.a.createElement("div",null,"Data: ",t));case an.HALF_RIGHT:return o.a.createElement(on,{style:sn.containerGridRight},o.a.createElement("div",null,"Data: ",t));case an.FULL:return o.a.createElement(on,{style:sn.container},o.a.createElement("div",null,"Data: ",t));default:return null}}},{key:"render",value:function(){return o.a.createElement(Le,{fill:!0},o.a.createElement(tn.RecyclerListView,{style:{height:"calc(100vh - 90px)"},useWindowScroll:!1,layoutProvider:this._layoutProvider,dataProvider:this.state.dataProvider,rowRenderer:this._rowRenderer}))}}]),t}(n.Component);rn.navigationBar="RecyclerListView",rn.getNavigation=function(e,t){return ne("RecyclerListView"),{title:"Chat",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:demo",{transition:"reveal-from-right"})}}};var sn={container:{justifyContent:"space-around",alignItems:"center",flex:1,display:"flex",flexDirection:"column",height:"100%",width:"100%",border:"0.5px solid black"},containerGridLeft:{justifyContent:"space-around",alignItems:"center",flex:1,display:"flex",flexDirection:"column",height:"100%",width:"100%",border:"0.5px solid black"},containerGridRight:{justifyContent:"space-around",alignItems:"center",flex:1,display:"flex",flexDirection:"column",height:"100%",width:"100%",border:"0.5px solid black"}},ln=a(22);a(62);function cn(){return o.a.createElement("div",{className:"icons icons_ss",alt:""})}function un(){return o.a.createElement("div",{className:"icons icons_ovpn",alt:""})}a(155);var dn=a(180);function mn(){return o.a.createElement("div",{className:"empty_record",style:{height:"70vh",display:"flex",alignItems:"center",justifyContent:"center"}},o.a.createElement(dn.a,{style:{color:"#d8d8d8"},size:"5em"}))}a(393);var pn=function(){return o.a.createElement("div",{className:"loading-wrap",style:{justifyContent:"center",alignItems:"center",height:"100vh",display:"flex"}},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",style:{width:50,height:50,transformOrigin:"25px 25px 25px"}},o.a.createElement("path",{fill:"none",strokeWidth:"5",strokeLinecap:"square",d:"M25,2.5A22.5,22.5 0 1 1 2.5,25",strokeDasharray:"106.02875205865553",strokeDashoffset:"110.58577780439585",transform:"rotate(-180 25 25)"})))},hn=Le.initScrollable({left:0,top:0});function fn(e){return"STAGING"===e?o.a.createElement("span",{style:{color:"steelblue"}},"\u542f\u52a8\u4e2d"):"OK"===e?o.a.createElement("span",{style:{color:"green"}},"\u8fd0\u884c\u4e2d"):"TERMINATED"===e?o.a.createElement("span",{style:{color:"orange"}},"\u5df2\u505c\u6b62"):"-"}var vn=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).state={visiblePort:!1,titlePort:null},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"transitionTo",value:function(e,t){this.context.app.transitionTo(e,t)}},{key:"componentDidMount",value:function(){this.props.dispatch(k())}},{key:"componentWillUnmount",value:function(){E()}},{key:"onSelectCell",value:function(e){var t=this,a=e.id;"openvpn"===e.server_type?(this.onSelectCell1(e),this.props.dispatch(w(a,function(e){var a=e.body;t.props.dispatch({type:"instance/setState",payload:{row:a}})}))):this.onSelectCell1(e)}},{key:"onSelectCell1",value:function(e){var t=this,a=e.id,n=e.note,o=e.status,i=e.ip,r=e.port,s=[];"TERMINATED"===o&&(s=[{label:"\u542f\u52a8",onClick:function(){weui.confirm("\u786e\u5b9a\u8981\u542f\u52a8\u4e48",function(){var e,n;t.props.dispatch((e=a,n=function(){t.props.dispatch(k())},function(t){E();var a=weui.loading("\u542f\u52a8\u4e2d...",{showMask:!0});return u.a.post("/compute/instance/status/".concat(e,"/start"),null).then(function(e){var o=e.data;a.hide(),200===o.code?(t(w(o.body.id)),n&&n()):weui.toast("\u542f\u52a8\u5931\u8d25")}).catch(function(e){a.hide(),n&&n()})}))})}}]),"RUNNING"!==o&&"OK"!==o||(s=[{label:"\u505c\u6b62",onClick:function(){weui.confirm("\u786e\u5b9a\u8981\u505c\u6b62\u4e48",function(){var e,n;t.props.dispatch((e=a,n=function(){t.props.dispatch(k())},function(t){E();var a=weui.loading("\u505c\u6b62\u4e2d...",{showMask:!0});return u.a.post("/compute/instance/status/".concat(e,"/stop"),null).then(function(e){var t=e.data;a.hide(),200===t.code?n&&n():weui.toast("\u505c\u6b62\u5931\u8d25")}).catch(function(e){a.hide(),n&&n()})}))})}},{label:"\u91cd\u542f(\u66f4\u6362IP)",onClick:function(){var e="\u91cd\u542f\u5c06\u4f1a\u5220\u9664\u6b64\u7ebf\u8def,\u521b\u5efa\u4e00\u6761\u65b0\u7684\u7ebf\u8def";window.location.host==="".concat(i,":").concat(r)&&(e+=",\u5f53\u524d\u7f51\u5740\u6240\u5728\u7ebf\u8def\u8ddf\u9700\u8981\u91cd\u542f\u7684\u7ebf\u8def\u5728\u540c\u4e00\u4e2a\u670d\u52a1\u5668,\u91cd\u542f\u4e4b\u540e\u6b64\u7f51\u5740\u4e0d\u80fd\u518d\u8bbf\u95ee,\u56e0\u6b64,\u8bf7\u5173\u6ce8\u60a8\u7684\u90ae\u7bb1\u65b0\u83b7\u53d6\u8bbf\u95ee\u5730\u5740"),weui.confirm(e,function(){var e,n;t.props.dispatch((e=a,n=function(){t.props.dispatch(k())},function(t){E();var a=weui.loading("\u91cd\u542f\u4e2d...",{showMask:!0});return u.a.post("/compute/instance/status/".concat(e,"/restart"),null).then(function(e){var o=e.data;a.hide(),200===o.code?(t(w(o.body.id)),n&&n()):weui.toast("\u91cd\u542f\u5931\u8d25")}).catch(function(e){a.hide(),n&&n()})}))})}}]),s.unshift({label:"\u5907\u6ce8",onClick:function(){weui.prompt("\u8bf7\u8f93\u5165",function(e){var n,o,i,r;t.props.dispatch((n=a,o="note",i=e,r=function(){t.props.dispatch(k())},function(e){E();var t=weui.loading("\u4fdd\u5b58\u4e2d...",{showMask:!0});return u.a.put("/compute/instance/change/".concat(n),{value:{field:o,value:i}}).then(function(e){var a=e.data;t.hide(),200===a.code?r&&r():weui.toast("\u4fdd\u5b58\u5931\u8d25")}).catch(function(e){t.hide(),r&&r()})}))},function(){},{title:"\u5907\u6ce8",value:n||""})}}),i&&"cordova"!==ae()&&s.unshift({label:"\u6d4b\u901f",onClick:function(){ee("http://ping.chinaz.com/"+i,"_blank")}}),s.unshift({label:"\u7ba1\u7406\u7aef\u53e3",onClick:function(){t.transitionTo("main:instance/detail",{query:{id:a},params:e,transition:"show-from-right"})}});var l=[{label:"\u5220\u9664\u6b64\u7ebf\u8def",onClick:function(){var e;e=window.location.host==="".concat(i,":").concat(r)?",\u5f53\u524d\u7f51\u5740\u6240\u5728\u7ebf\u8def\u8ddf\u9700\u8981\u5220\u9664\u7684\u7ebf\u8def\u5728\u540c\u4e00\u4e2a\u670d\u52a1\u5668,\u5220\u9664\u4e4b\u540e\u6b64\u7f51\u5740\u4e0d\u80fd\u518d\u8bbf\u95ee,\u56e0\u6b64,\u8bf7\u5173\u6ce8\u60a8\u7684\u90ae\u7bb1\u65b0\u83b7\u53d6\u8bbf\u95ee\u5730\u5740":"\u786e\u8ba4\u8981\u5220\u9664\u6b64\u7ebf\u8def?",weui.confirm(e,function(){t.props.dispatch(y(a,function(){t.props.dispatch(y(a,function(){t.props.dispatch(k())}))}))})}}];weui.actionSheet([].concat(Object(sa.a)(s),l),[],{title:""})}},{key:"render",value:function(){var e=this,t=this.props,a=t.items;return t.firstLoading?o.a.createElement(pn,null):o.a.createElement(Le,{className:"VipLines",ref:"scrollContainer",scrollable:hn},o.a.createElement("div",{style:{margin:"0 2px"}},a.length>0?a.map(function(t,a){var n=t.name,i=t.status,r=t.port_status,s=t.note,l=t.server_type,c=t.id,u=t.zone,d=n.split("-"),m=d[d.length-1],p=$(u);return o.a.createElement(ln.Cell,{key:c,onClick:e.onSelectCell.bind(e,t),access:!0},o.a.createElement(ln.CellHeader,null,"TERMINATED"!==i&&"UP"!==r&&o.a.createElement("i",{className:"weui-loading"}),o.a.createElement("span",null,m," ",p)),o.a.createElement(ln.CellBody,{style:{fontSize:12,marginLeft:12}},o.a.createElement("span",null,fn(i))),o.a.createElement(ln.CellFooter,null,o.a.createElement("span",{style:{fontSize:12,marginRight:12}},s),"openvpn"===l?o.a.createElement(un,null):o.a.createElement(cn,null)))}):o.a.createElement(mn,null)))}}]),t}(n.Component);vn.navigationBar="main",vn.getNavigation=function(e,t){return ne(),{title:window.globalObject.constant.y_deng.title,rightLabel:o.a.createElement("i",{style:{fontSize:24},className:"ion-ios-plus"}),rightAction:function(){window.weui.picker(window.globalObject.constant.zones,{className:"weui-custom",container:"body",title:"\u9009\u62e9\u533a\u57df",defaultValue:window.globalObject.constant.default_zone,onChange:function(e){},onConfirm:function(t){var a="".concat(t[0].value,"-").concat(t[1].value,"-").concat(t[2].value);e.dispatch(function(e,t){var a=e.zone,n=e.server_type;return function(e){var o=weui.loading("\u521b\u5efa\u4e2d...",{showMask:!0});return u.a.post("/compute/instance/".concat(a,"/").concat(n),null).then(function(a){var n=a.data,i=n.body,r=n.code,s=n.msg;o.hide(),200===r?(e({type:g+"/setState",payload:{item:i}}),e(w(i.id)),t&&t()):5001===r?weui.actionSheet([{label:"\u5145\u503c\u4e2d\u5fc3",onClick:function(){window.current_app.viewManagers.main.context.app.transitionTo("main:plan",{viewProps:{from_view:"main:home"},transition:"show-from-right"})}}],[],{title:s}):(o.hide(),weui.topTips(s),501===r&&setTimeout(function(){window.location.href="#plan",window.location.reload()},1e3))}).catch(function(e){o.hide(),t&&t()})}}({zone:a,server_type:"shadowsocks"},function(){e.dispatch(k())}))}})},leftArrow:!1,leftLabel:o.a.createElement("i",{style:{fontSize:24},className:"ion-android-menu"}),leftAction:function(){weui.drawer([{label:"<i style='font-size:16px' class='ion-cash' /></i> \u5145\u503c\u4e2d\u5fc3",onClick:function(){t.transitionTo("main:plan",{transition:"show-from-right"})}},{label:"<i style='font-size:16px' class='ion-ios-cart' /></i> \u6211\u7684\u8ba2\u5355",onClick:function(){t.transitionTo("main:orders",{transition:"show-from-right"})}},{label:"<i style='font-size:16px' class='ion-help-buoy' /></i> \u5e2e\u52a9\u4e2d\u5fc3",onClick:function(){t.transitionTo("main:helps",{transition:"show-from-right"})}},{label:"<i style='font-size:16px' class='ion-ios-person' /></i> \u6211",onClick:function(){t.transitionTo("main:account",{transition:"show-from-right"})}},{label:"<i style='font-size:16px' class='ion-log-out' /></i> \u9000\u51fa",onClick:function(){weui.confirm("\u786e\u5b9a\u8981\u9000\u51fa\u4e48?",function(){localStorage.removeItem("access_token"),u.a.defaults.headers.common.Authorization=null,e.dispatch({type:"app/setState",payload:{access_token:null}}),t.transitionTo("main:login",{transition:"show-from-right"})})}}])}}},vn.contextTypes={app:be.a.object};var gn=Object(G.b)(function(e){var t=e.app,a=e.user,n=e.instance;return{selectedVipType:n.selectedVipType,items:n.items,firstLoading:n.firstLoading,instance:n.item,timestamp:t.timestamp,me:a.me,showVipLinesActionSheet:n.showVipLinesActionSheet}})(vn),bn=a(51),yn=a(181),_n=a.n(yn),wn=ae(),En={servs:{},init:function(e){var t=e.host,a=e.port,n=e.method,o=e.password,i=e.name,r=e.accessKey,s=e.id;En.servs[s]={config:{host:t,port:a,method:n,password:o,name:i,accessKey:r,id:s},serv:null}},connect:function(e,t){var a=En.servs[e].config;En.servs[e].serv=new cordova.plugins.outline.Connection(a,e),En.servs[e].serv.onStatusChange(function(a){switch(a){case 0:console.log("CONNECTED"),t({id:e,status:"CONNECTED"});break;case 1:console.log("DISCONNECTED"),t({id:e,status:"DISCONNECTED"});break;case 2:console.log("RECONNECTING"),t({id:e,status:"RECONNECTING"});break;default:return t({id:e,status:"ERROR"}),void console.warn("Received unknown connection status "+a)}})},start:function(e,t,a){"cordova"===wn?(En.connect(e,a),En.servs[e].serv.start().catch(function(t){console.error(t.message),a({id:e,status:"ERROR",msg:t.message})})):kn(e,t,a)},stop:function(e,t,a){"cordova"===wn?En.servs[e].serv.stop().catch(function(t){console.error(t.message),a({id:e,status:"ERROR",msg:t.message})}):Sn(e,function(){t({type:"shadowsocks/setState",payload:{current_connect_status:"DISCONNECTED"}}),a({status:"DISCONNECTED"})})},check:function(e,t){En.servs[e].serv.isRunning().then(function(a){if(!a)return console.log("DISCONNECTED"),void t({id:e,status:"DISCONNECTED"});En.servs[e].serv.isReachable().then(function(a){a?(console.log("CONNECTED"),t({id:e,status:"CONNECTED"})):(console.log("RECONNECTING"),t({id:e,status:"RECONNECTING"}))})}).catch(function(a){console.error("Failed to sync server connectivity state",a),t({id:e,status:"ERROR"})})}},kn=function(e,t,a){console.log("connect_yd_server: ".concat(e)),Tn(e,function(n){window.localStorage.setItem("current_connect_id",e),t({type:"shadowsocks/setState",payload:{current_connect_status:"CONNECTED",current_connect_id:n[0]}}),a&&a({status:"CONNECTED"})},function(){a&&a({status:"ERROR"})})},Sn=function(e,t,a){var n=window.globalObject.constant.y_deng.local_server;u.a.delete("http://".concat(n,"/shadowsocks?ss=")+encodeURIComponent(e),null).then(function(e){var n=e.data;console.log("yd_server_delete result: ".concat(JSON.stringify(n))),!0===n.ok?t&&t(n.body):a&&a(n)}).catch(function(e){console.log("yd_server_delete error: ".concat(e)),weui.toast("\u8fde\u63a5\u5931\u8d25"),a&&a(e)})},Tn=function(e,t,a){var n=window.globalObject.constant.y_deng.local_server,o=_n.a.stringify({ss:e});u.a.post("http://".concat(n,"/shadowsocks?clean=1"),o).then(function(e){var n=e.data;if(console.log("yd_server_post result: ".concat(JSON.stringify(n))),n.ok){var o=n.data;t&&t(o)}else a&&a(n)}).catch(function(e){console.error("yd_server_post error: ".concat(e)),weui.toast("\u8fde\u63a5\u5931\u8d25"),a&&a(e)})},Cn=function(e,t){var a=window.globalObject.constant.y_deng.local_server;u.a.get("http://".concat(a,"/shadowsocks"),{timeout:1e3}).then(function(t){var a=t.data;if(console.log("yd_server_get result: ".concat(JSON.stringify(a))),a.ok){window.globalObject.constant.y_deng.data=a.data;var n=a.data;e&&e(n)}}).catch(function(e){console.log("yd_server_get result: ".concat(e)),t&&t(e)})},On=function(e,t,a){var n=e.ip,o=[];return"UP"===e.port_status&&o.unshift({label:"\u8fde\u63a5",onClick:function(){!function(e,t){var a=e.port,n=e.pwd,o=e.name,i=e.ip,r=(e.id,"ss://"+Object(bn.base64encode)("".concat("aes-256-cfb",":").concat(n,"@").concat(i,":").concat(a))),s=o+"_"+a;if("cordova"===wn){En.init({host:i,port:a,method:"aes-256-cfb",password:n,name:o,accessKey:r,id:s}),t({type:"shadowsocks/setState",payload:{current_connect_status:null,current_connect_id:s}});var l=weui.loading("\u8fde\u63a5\u4e2d...");En.start(s,function(e){var a=e.status,n=e.msg;l.hide(),console.log(JSON.stringify({status:a,msg:n})),"ERROR"===a?weui.toast(n):t({type:"shadowsocks/setState",payload:{current_connect_status:a,current_connect_id:s}})})}else{var c="ss://".concat("aes-256-cfb",":").concat(n,"@").concat(i,":").concat(a);kn(c,t)}}(e,a)}}),o.push({label:"\u6d4b\u901f",onClick:function(){ee("http://ping.chinaz.com/"+n,"_blank")}}),"cordova"!==wn&&o.push({label:"\u4e0b\u8f7d\u5ba2\u6237\u7aef",onClick:function(){var e=window.globalObject.constant.download_help_id;window.current_app.viewManagers.main.context.app.transitionTo("main:help",{query:{id:e},transition:"show-from-right"})}}),weui.actionSheet([].concat(o,Object(sa.a)(t)),[],{title:""})},jn=Le.initScrollable({left:0,top:0}),In=a(40),Nn=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.instance,n=t.current_connect_id,i=t.service,r=i.port,s=a.ip;return o.a.createElement(At,{onTap:function(){return e.props.onSelectedRow(i,a)}},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.ItemTitle,null,s+":"+r,n&&n.split("@")[1]==="".concat(s,":").concat(r)&&o.a.createElement("i",{style:{color:"green"},className:"ml8 ion-checkmark"})))))}}]),t}(n.Component),Rn=null,Ln=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).state={port:"",pwd:"",is_public:!1,name:""},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"showQrCode",value:function(e){var t=e.pwd,a=e.ip,n=e.port,o="ss://"+Object(bn.base64encode)("aes-256-cfb:".concat(t,"@").concat(a,":").concat(n));In.toDataURL(o,function(e,o){weui.alert("<div style='flex-direction:column;margin-bottom:16px;display: flex;justify-content: center;align-items: center'>"+"<h4 style='margin-bottom: 8px'>".concat(a," : ").concat(n,"</h4>")+"<h4 style='margin-bottom: 8px'>\u5bc6\u7801: ".concat(t,"</h4>")+"<h4 style='margin-bottom: 8px'>\u7b97\u6cd5: aes-256-cfb</h4>"+"<img style='height: 180px;width: 180px' src='".concat(o,"' />")+"</div>")})}},{key:"onRemove",value:function(e,t,a){var n=this;weui.confirm("\u786e\u5b9a\u8981\u5220\u9664\u4e48?",function(){var o=[];e.map(function(e){return e.port!==t&&o.push(e),e}),a.services=o;var i=weui.loading("\u4fdd\u5b58\u4e2d...");n.props.dispatch(_(a,function(){i.hide(),n.props.dispatch(k()),n.props.dispatch({type:"instance/setState",payload:{item:a}})}))})}},{key:"onSelectedRow",value:function(e,t){var a=this,n=e.port,o=e.flag,i=e.pwd,r=t.services,s=t.server_type,c=[];if(t.ip&&"shadowsocks"===s){var u=[];return 1!==o&&u.push({label:"\u5220\u9664",onClick:function(){a.onRemove(r,n,t)}}),On(Object(l.a)({},t,{port:n,pwd:i}),u,this.props.dispatch)}1!==o&&c.push({label:"\u5220\u9664",onClick:function(){a.onRemove(r,n,t)}}),weui.actionSheet(c,[{label:"\u53d6\u6d88",onClick:function(){console.log("\u53d6\u6d88")}}],{title:"",className:"custom-classname",onClose:function(){}})}},{key:"onChangeInput",value:function(e,t){var a=t.target,n={};n[e]="is_public"===e?a.checked:a.value,this.setState(Object(l.a)({},n))}},{key:"componentDidMount",value:function(){var e=this,t=window.urlQuery;if(t&&t.id){var a=weui.loading("\u52a0\u8f7d\u4e2d...");this.props.dispatch(w(t.id,function(t){e.props.dispatch({type:"instance/setState",payload:{item:t.body}}),a.hide()}))}else window.location.href="#";Cn(function(t){e.props.dispatch({type:"shadowsocks/setState",payload:{current_connect_id:t[0]}})},function(){})}},{key:"render",value:function(){var e=this,t=this.props,a=t.instance,n=t.services;return Rn=a,a?o.a.createElement(Le,{className:"InstanceView",ref:"scrollContainer",scrollable:jn},o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null),o.a.createElement(Pt.GroupBody,null,o.a.createElement(Pt.Item,null,o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.ItemTitle,null,"\u533a\u57df"),o.a.createElement(Pt.ItemSubTitle,null,$(a.zone)))),o.a.createElement(Pt.Item,null,o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.ItemTitle,null,"\u72b6\u6001"),o.a.createElement(Pt.ItemSubTitle,null,fn(a.status),"TERMINATED"!==a.status&&"UP"!==a.port_status&&o.a.createElement("i",{className:"ml8 weui-loading"})))),o.a.createElement(Pt.Item,null,o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.ItemTitle,null,"\u7c7b\u578b"),o.a.createElement(Pt.ItemSubTitle,null,o.a.createElement("span",{className:"user_select_text"},a.server_type)))),a.ip&&a.ip.length>0&&o.a.createElement(Pt.Item,null,o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.ItemTitle,null,"IP"),o.a.createElement(Pt.ItemSubTitle,null,o.a.createElement("span",{className:"user_select_text"},a.ip))))),"openvpn"===a.server_type&&a.ovpn_config&&"UP"===a.port_status&&a.ovpn_config.length>0&&o.a.createElement(Pt.Button,{style:{marginTop:24},onTap:function(){!function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}(a.name+".ovpn",a.ovpn_config)}},"\u4e0b\u8f7dOVPN\u6587\u4ef6")),a.ip&&"shadowsocks"===a.server_type&&o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null),o.a.createElement(Pt.GroupBody,null,[{port:a.port,pwd:a.pwd,flag:1}].concat(Object(sa.a)(n)).map(function(t,n){return o.a.createElement(Nn,{key:n,current_connect_id:e.props.current_connect_id,onSelectedRow:e.onSelectedRow.bind(e),service:t,instance:a})})))):null}}]),t}(n.Component);Ln.navigationBar="main",Ln.getNavigation=function(e,t){return ne("\u7ba1\u7406\u7aef\u53e3"),{title:"\u7ba1\u7406\u7aef\u53e3",rightLabel:o.a.createElement("i",{style:{fontSize:24},className:"ion-ios-plus"}),rightAction:function(){"openvpn"!==Rn.server_type&&weui.confirm("\u786e\u5b9a\u8981\u65b0\u52a0\u4e00\u4e2a\u7aef\u53e3?",function(){Rn.services=function(e,t){var a=9e3;e.map(function(e){return e.port>a&&(a=e.port),e});var n={port:a+1===t?t+1:a+1,is_public:!1,pwd:W(!1,6).toLowerCase()};return e.push(n),e.map(function(e){var t=e.is_public;return Object(l.a)({is_public:!!t},e)})}(Rn.services,Rn.port),e.dispatch(_(Rn,function(t){var a=t.body;e.dispatch({type:"instance/setState",payload:{item:a}})}))})},leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:home",{transition:"reveal-from-right"})}}};var An,Pn,Dn,xn,Mn=Object(G.b)(function(e){var t=e.instance,a=e.route,n=e.shadowsocks;return{instance:t.item,services:t.item?t.item.services:[],page:a.page,showAddService:t.showAddService,current_connect_id:n.current_connect_id}})(Ln),Bn=a(182),Fn=a.n(Bn),Vn=(a(169),Le.initScrollable({left:0,top:0})),Gn=Object(G.b)(function(e){var t=e.content.item;return t&&t.title?{title:t.title}:{title:""}})(function(e){var t=e.title;return ne(t),o.a.createElement("span",null,t)}),Un=Object(G.b)(function(e){return{item:e[N].item,loadingDetail:e[N].loadingDetail}})((Pn=An=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){this.setState({qr_code_data_url:null});var e,t,a=window.urlQuery;if(a&&a.id){var n=weui.loading("\u52a0\u8f7d\u4e2d...");this.props.dispatch((e=a.id,t=function(e){n.hide()},function(a){return a({type:N+"/setState",payload:{item:null,loadingDetail:!0}}),u.a.get("/content/"+e).then(function(e){var n=e.data;t&&t(n.body),a({type:N+"/setState",payload:{item:n.body,loadingDetail:!1}})}).catch(function(e){a({type:N+"/setState",payload:{item:null,loadingDetail:!1}}),weui.topTips(e),t&&t({error:e})})}))}}},{key:"render",value:function(){if(this.props.loadingDetail||!this.props.item)return null;var e=this.props.item;return o.a.createElement(Le,{fill:!0,scrollable:Vn,className:"Content"},o.a.createElement("article",{className:"weui-article"},o.a.createElement(Fn.a,{linkTarget:"_blank",escapeHtml:!1,source:e.data})))}}]),t}(n.Component),An.navigationBar="main",An.getNavigation=function(e,t){return{title:o.a.createElement(Gn,null),leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:helps",{transition:"reveal-from-right"})}}},Pn)),Hn=Le.initScrollable({left:0,top:0}),zn=Object(G.b)(function(e){return{items:e[N].items,firstLoading:e[N].firstLoading}})((xn=Dn=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){var e;this.props.dispatch(function(t){return u.a.get("/contents").then(function(a){var n=a.data;e&&e(n),t({type:N+"/setState",payload:{items:n.body.rows,firstLoading:!1}})}).catch(function(a){e&&e({error:a}),t({type:N+"/setState",payload:{firstLoading:!1}})})})}},{key:"transitionTo",value:function(e,t){this.context.app.transitionTo(e,t)}},{key:"onSelectCell",value:function(e){var t=e.id,a=e.title;this.transitionTo("main:help",{query:{id:t},viewProps:{title:a},transition:"show-from-right"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.items;return t.firstLoading?o.a.createElement(pn,null):o.a.createElement(Le,{className:"Contents",ref:"scrollContainer",scrollable:Hn},o.a.createElement("div",{style:{margin:"0 2px"}},a.length>0?a.map(function(t,a){return o.a.createElement(ln.Cell,{key:a,onClick:e.onSelectCell.bind(e,t),access:!0},o.a.createElement(ln.CellHeader,null,t.title),o.a.createElement(ln.CellBody,null),o.a.createElement(ln.CellFooter,null))}):o.a.createElement(mn,null)))}}]),t}(n.Component),Dn.navigationBar="main",Dn.getNavigation=function(e,t){return ne("\u5e2e\u52a9\u4e2d\u5fc3"),{title:"\u5e2e\u52a9\u4e2d\u5fc3",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:home",{transition:"reveal-from-right"})}}},Dn.contextTypes={app:be.a.object},xn)),qn=(a(98),a(102)),Wn=function(e){var t=e.tips,a=e.unit,n=e.payment_type,i=e.btnPaymentDisabled,r=e.onPayBtnClicked,s=e.selected_payment_type,l=e.amount,c=e.title,u=e.icon,d=e.onClick;return o.a.createElement("div",{className:"payment_type"},o.a.createElement("div",{onClick:d,className:"header "+(n.length>0&&n===s&&"bottom_line")},n.length>0&&n===s?o.a.createElement(qn.a,null):o.a.createElement(qn.b,null),o.a.createElement("b",{className:"title"},c)," ",u),n.length>0&&n===s&&o.a.createElement("div",{className:"body slideIn"},o.a.createElement("div",null,"\u70b9\u51fb\u4e0b\u9762\u6309\u94ae\u5b8c\u6210\u652f\u4ed8,"),o.a.createElement("div",{style:{marginTop:16,marginBottom:16}},o.a.createElement("b",null,"\u652f\u4ed8\u91d1\u989d:")," ",o.a.createElement("b",{style:{marginLeft:8,color:"green",fontSize:28}},l)," ",a),o.a.createElement("div",null,t),o.a.createElement("div",{style:{marginTop:24,marginBottom:24}},o.a.createElement("button",{disabled:i,onClick:r,className:i?"weui-btn weui-btn_primary weui-btn_disabled":"weui-btn weui-btn_primary"},"\u652f\u4ed8"))))};function Jn(){return o.a.createElement("div",{className:"icons icons_paypal",alt:""})}function Yn(){return o.a.createElement("div",{className:"icons icons_eth",alt:""})}var Qn=a(183),Zn=Le.initScrollable({left:0,top:0}),Kn=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).state={paymentEth:null,btnPaymentDisabled:!1,payment_type:"",eth:!1,selectedPlan:0},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"onPayBtnClicked",value:function(e,t){var a=this,n=t.id;this.setState({btnPaymentDisabled:!0});var o=weui.loading("\u652f\u4ed8\u4e2d...",{showMask:!0}),i=window.location.href.replace("#plan","#orders");this.props.dispatch(function(e,t){var a=e.payment_type,n=e.flag,o=(e.redirect_url,e.plan_id);return function(e){return u.a.get("/payment/"+a+"?"+S.stringify({plan_id:o,flag:n})).then(function(e){var a=e.data;t(a)}).catch(function(e){t({error:e})})}}({plan_id:n,payment_type:e,flag:"plans_d"},function(e){var t=e.body,n=e.code,r=e.msg;if(200===n){var s=t.url;if("paypal"===a.state.payment_type)weui.confirm("\u652f\u4ed8\u6210\u529f?",function(){a.context.app.transitionTo("main:orders",{transition:"show-from-right"})},function(){a.setState({btnPaymentDisabled:!1})}),ee(s+"&redirect_url="+encodeURIComponent(i),"_blank");"eth"===a.state.payment_type&&a.context.app.transitionTo("main:eth-confirm",{viewProps:{from_view:"main:plan"},query:{payment_id:t.payment_id},transition:"show-from-right"})}else weui.topTips(r),a.setState({btnPaymentDisabled:!1});o.hide()}))}},{key:"onTogglePayment",value:function(e){var t=this.state.payment_type===e?"":e;this.setState({payment_type:t})}},{key:"componentDidMount",value:function(){var e=window.globalObject.constant.payment;1===e.length&&this.setState({payment_type:e[0]})}},{key:"render",value:function(){var e=this,t=window.globalObject.constant,a=t.plans_d,n=t.payment,i=100*Math.floor(a.length/3)+26,r=a[this.state.selectedPlan];return o.a.createElement(Le,{className:"Payment",ref:"scrollContainer",scrollable:Zn},o.a.createElement(Pt.Group,{style:{marginTop:8}},o.a.createElement(Pt.GroupHeader,null,"\u9009\u62e9\u5145\u503c\u9762\u989d"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(Pt.GroupInner,{style:{height:i}},o.a.createElement("div",{className:"square"},o.a.createElement("ul",{className:"square-inner flex"},a.map(function(t,a){var n=t.amount,i=t.activity,s=t.id,l=t.usd;return i?o.a.createElement("li",{onClick:function(){e.context.app.transitionTo("main:task",{transition:"show-from-right"})},key:a},o.a.createElement("div",{className:"p0"},o.a.createElement("span",{className:"p1"},i))):o.a.createElement("li",{onClick:function(){e.setState({selectedPlan:a})},className:r.id===s?"active":"",key:a},o.a.createElement("div",{className:"check"},o.a.createElement(Qn.a,{size:"2em"})),o.a.createElement("div",{className:"p0"},o.a.createElement("span",{className:"p1"},n)," \u94f6\u5e01"),o.a.createElement("div",{className:"p2"},"\u552e\u4ef7  $ ",l))})))))),o.a.createElement(Pt.Group,{style:{marginTop:8}},o.a.createElement(Pt.GroupHeader,null,"\u9009\u62e9\u652f\u4ed8\u65b9\u5f0f"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(Pt.GroupInner,null,o.a.createElement("div",{className:"payments"},n.includes("paypal")&&o.a.createElement(Wn,{btnPaymentDisabled:this.state.btnPaymentDisabled,onPayBtnClicked:this.onPayBtnClicked.bind(this,"paypal",r),payment_type:"paypal",unit:"$",tips:"\u9762\u989d "+r.amount+" \u94f6\u5e01",onClick:this.onTogglePayment.bind(this,"paypal"),title:"Paypal",selected_payment_type:this.state.payment_type,icon:o.a.createElement(Jn,null),amount:r.usd}),n.includes("eth")&&o.a.createElement(Wn,{btnPaymentDisabled:this.state.btnPaymentDisabled,onPayBtnClicked:this.onPayBtnClicked.bind(this,"eth",r),payment_type:"eth",unit:"$",tips:"\u9762\u989d "+r.amount+" \u94f6\u5e01",onClick:this.onTogglePayment.bind(this,"eth"),title:"Eth",selected_payment_type:this.state.payment_type,icon:o.a.createElement(Yn,null),amount:r.usd}))))))}}]),t}(n.Component);Kn.navigationBar="main",Kn.getNavigation=function(e,t){return{title:"\u5145\u503c\u4e2d\u5fc3",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo(e.from_view?e.from_view:"main:home",{transition:"reveal-from-right"})}}},Kn.contextTypes={app:be.a.object};var Xn=Object(G.b)(function(e){return{page:e.route.page}})(Kn),$n=a(40),eo=a.n($n),to=a(103),ao=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).state={qr_code_data_url:null,left_time:0,loading:!0},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentWillUnmount",value:function(){window.time_id&&clearInterval(window.time_id)}},{key:"componentDidMount",value:function(){var e=this,t=window.urlQuery.payment_id,a=weui.loading("\u52a0\u8f7d\u4e2d...");this.props.dispatch(function(e,t){var a=e.payment_id;return function(e){return u.a.get("/payment/eth/"+a).then(function(a){var n=a.data;e({type:"eth/setState",payload:{payment:n.body}}),t(n.body)}).catch(function(e){t({error:e})})}}({payment_id:t},function(t){e.prepare(t),e.setState({loading:!1}),a.hide()}))}},{key:"prepare",value:function(e){var t=this,a=e.address,n=e.created_at,o=e.payment_id;window.time_id&&clearInterval(window.time_id),window.time_id=setInterval(function(){if(console.log(window.time_id),t.state.left_time>=0){var e=900-parseInt(+new Date/1e3-n);t.setState({left_time:e}),document.querySelector("#min_left")&&(document.querySelector("#min_left").innerHTML=t.getLeftTimeCountDown(e))}else document.querySelector("#min_left")&&(document.querySelector("#min_left").innerHTML="\u8d85\u65f6"),clearInterval(window.time_id),t.timeout()},1e3),eo.a.toDataURL(a,function(e,a){t.setState({qr_code_data_url:a})}),window.stop_checking=!1,this.getPaymentStatus(o)}},{key:"timeout",value:function(){var e=this;weui.alert("\u4ed8\u6b3e\u8d85\u65f6,\u8bf7\u91cd\u65b0\u4e0b\u5355",function(){e.context.app.transitionTo("main:plan",{transition:"show-from-right"})})}},{key:"getPaymentStatus",value:function(e){var t=this;window.stop_checking||this.props.dispatch(O({payment_type:"eth",payment_id:e},function(a){var n=a.body,o=a.code,i=a.error;if(200!==o||i)setTimeout(function(){t.getPaymentStatus(e)},2e3);else{var r=n.status;r&&"approved"!==r?setTimeout(function(){t.getPaymentStatus(e)},1e3):weui.alert("\u652f\u4ed8\u6210\u529f",function(){t.context.app.transitionTo("main:orders",{transition:"reveal-from-right"})})}}))}},{key:"onSelectQrCode",value:function(e){var t=e.address;weui.toast("\u81ea\u52a8\u590d\u5236\u6210\u529f"),setTimeout(function(){weui.alert("\u8bf7\u5c06ETH \u53d1\u9001\u5230: <span><b>".concat(t,"</b></span>"),function(){te.copy(t)})},3400)}},{key:"getLeftTimeCountDown",value:function(e){var t=Math.floor(e%3600/60),a=Math.floor(e%60);return e>0?t+":"+a:"\u8d85\u65f6"}},{key:"showInfo",value:function(e){var t=e.amount_eth,a=e.amount_usd,n=e.exchange_price;weui.actionSheet([{label:"\u603b\u4ef7: ".concat(a," USD"),onClick:function(){}},{label:"\u6c47\u7387: ".concat(n," USD"),onClick:function(){}},{label:"\u5e94\u4ed8\u91d1\u989d: ".concat(t," ETH"),onClick:function(){}}],[{label:"\u53d6\u6d88",onClick:function(){}}],{title:'\u8bf7\u5728\u89c4\u5b9a\u65f6\u95f4\u5185\u4ed8\u6b3e <b id="min_left"></b>',className:"weui-custom",onClose:function(){}})}},{key:"render",value:function(){if(this.state.loading)return null;var e=this.props.paymentEth,t=e.amount_eth,a=this.state.qr_code_data_url;return o.a.createElement("div",{className:"eth_payment"},o.a.createElement("div",{className:"tips"},"\u626b\u63cf QR \u7801\u6216\u5c06\u4ed8\u6b3e\u8be6\u7ec6\u4fe1\u606f\u590d\u5236\u7c98\u8d34\u5230\u60a8\u7684\u94b1\u5305"),o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"header"},o.a.createElement("div",null,o.a.createElement(to.a,{onClick:this.onSelectQrCode.bind(this,e),size:"2em"})),o.a.createElement("div",{className:"title"},o.a.createElement("b",null," ",t," ETH")),o.a.createElement("div",null,o.a.createElement(to.b,{onClick:this.showInfo.bind(this,e),size:"2em"}))),o.a.createElement("div",{id:"qr-container"},a&&o.a.createElement("img",{onClick:this.onSelectQrCode.bind(this,e),src:a,alt:""}))))}}]),t}(n.Component);ao.navigationBar="main",ao.getNavigation=function(e,t){return{title:"Eth",leftArrow:!0,leftLabel:"",leftAction:function(){window.stop_checking=!0,t.transitionTo(e.from_view?e.from_view:"main:orders",{transition:"reveal-from-right"})}}},ao.contextTypes={app:be.a.object};var no=Object(G.b)(function(e){return{paymentEth:e.eth.payment}})(ao),oo=Le.initScrollable({left:0,top:0}),io=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(function(e){return u.a.get("/compute/lines").then(function(t){var a=t.data;e({type:j+"/setState",payload:{items:a.body.rows}}),window.__time_id_fetch_instance=setInterval(function(){},3e3)}).catch(function(e){})}),Cn(function(t){e.props.dispatch({type:"shadowsocks/setState",payload:{current_connect_id:t[0]}})})}},{key:"componentWillUnmount",value:function(){}},{key:"onSelectCell",value:function(e){On(Object(l.a)({},e,{port_status:"UP",name:e.id}),[],this.props.dispatch)}},{key:"showQrCode",value:function(e){var t=e.server_type,a=e.pwd,n=e.ip,o=e.port;if("shadowsocks"===t){var i="ss://"+Object(bn.base64encode)("aes-256-cfb:".concat(a,"@").concat(n,":").concat(o));console.log(i),eo.a.toDataURL(i,function(e,t){weui.alert("<div style='flex-direction:column;margin-bottom:16px;display: flex;justify-content: center;align-items: center'>"+"<h4 style='margin-bottom: 8px'>".concat(n," : ").concat(o,"</h4>")+"<h4 style='margin-bottom: 8px'>\u5bc6\u7801: ".concat(a,"</h4>")+"<h4 style='margin-bottom: 8px'>\u7b97\u6cd5: aes-256-cfb</h4>"+"<img style='height: 180px;width: 180px' src='".concat(t,"' />")+"</div>")})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.items,n=t.timestamp,i=t.current_connect_id;return o.a.createElement(Le,{className:"FreeLines",ref:"scrollContainer",scrollable:oo},o.a.createElement("div",{style:{margin:"0 2px"}},a.length>0&&a.map(function(t,a){var r=t.server_type,s=t.ip,l=t.port,c=$(t.zone);return o.a.createElement(ln.Cell,{key:a,t:n,onClick:e.onSelectCell.bind(e,t),access:!0},o.a.createElement(ln.CellHeader,null,s,":",l,i&&i.split("@")[1]==="".concat(s,":").concat(l)&&o.a.createElement("i",{style:{color:"green"},className:"ml8 ion-checkmark"})),o.a.createElement(ln.CellBody,null),o.a.createElement(ln.CellFooter,null,o.a.createElement("span",{style:{fontSize:12,marginRight:12}},c),"openvpn"===r?o.a.createElement(un,null):o.a.createElement(cn,null)))})))}}]),t}(n.Component);io.navigationBar="main",io.getNavigation=function(e,t){return{title:"\u5171\u4eab\u7ebf\u8def",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:home",{transition:"reveal-from-right"})}}};var ro=Object(G.b)(function(e){var t=e.app,a=e.shadowsocks;return{items:e.line.items,timestamp:t.timestamp,current_connect_id:a.current_connect_id}})(io),so=(a(170),Le.initScrollable({left:0,top:0})),lo=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){var e;this.props.dispatch(function(t){return u.a.get("/orders").then(function(a){var n=a.data;e&&e(n),t({type:h+"/setState",payload:{items:n.body.rows,firstLoading:!1}})}).catch(function(a){t({type:h+"/setState",payload:{firstLoading:!1}}),e&&e({error:a})})})}},{key:"transitionTo",value:function(e,t){this.context.app.transitionTo(e,t)}},{key:"onSelectCell",value:function(e){var t=e.id;this.transitionTo("main:order/detail",{query:{id:t},transition:"show-from-right"})}},{key:"getStatus",value:function(e){return"approved"===e?o.a.createElement("span",{style:{color:"green"}},"\u5df2\u652f\u4ed8"):"cancel"===e?o.a.createElement("span",{style:{color:"gray"}},"\u5df2\u53d6\u6d88"):"timeout"===e?o.a.createElement("span",{style:{color:"firebrick"}},"\u8d85\u65f6"):"created"===e?o.a.createElement("span",{style:{color:"dodgerblue"}},"\u652f\u4ed8\u4e2d"):"-"}},{key:"render",value:function(){var e=this,t=this.props,a=t.items;return t.firstLoading?o.a.createElement(pn,null):o.a.createElement(Le,{className:"Order",ref:"scrollContainer",scrollable:so},o.a.createElement("div",{style:{margin:"0 2px"}},a.length>0?a.map(function(t,a){return o.a.createElement(ln.Cell,{key:a,onClick:e.onSelectCell.bind(e,t),access:!0},o.a.createElement(ln.CellHeader,{style:{display:"block"}},o.a.createElement("p",null,t.desc),o.a.createElement("p",{style:{fontSize:10}},q(1e3*t.created_at)," ",t.pay_type)),o.a.createElement(ln.CellBody,null),o.a.createElement(ln.CellFooter,null,o.a.createElement("span",null,e.getStatus(t.status))))}):o.a.createElement(mn,null)))}}]),t}(n.Component);lo.navigationBar="main",lo.getNavigation=function(e,t){return{title:"Orders",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:home",{transition:"reveal-from-right"})}}},lo.contextTypes={app:be.a.object};var co=Object(G.b)(function(e){var t=e.order;return{items:t.items,showDetail:t.showDetail,order_no:t.order_no,firstLoading:t.firstLoading}})(lo),uo=Le.initScrollable({left:0,top:0}),mo=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).state={qr_code_data_url:null},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({qr_code_data_url:null});var t=window.urlQuery;if(t&&t.id){var a=weui.loading("\u52a0\u8f7d\u4e2d...");this.props.dispatch(v(t.id,function(t){a.hide(),"eth"===t.pay_type&&(eo.a.toDataURL(t.payments[0].address,function(t,a){e.setState({qr_code_data_url:a})}),window.stop_checking=!1,"created"===t.payments[0]&&e.getPaymentStatus(t.payments[0].id))}))}}},{key:"getPaymentStatus",value:function(e){var t=this;window.stop_checking||this.props.dispatch(O({payment_type:"eth",payment_id:e},function(a){var n=a.body,o=a.code,i=a.error;if(200!==o||i)setTimeout(function(){t.getPaymentStatus(e)},2e3);else{var r=n.status;r&&"approved"!==r?setTimeout(function(){t.getPaymentStatus(e)},1e3):weui.alert("\u652f\u4ed8\u6210\u529f",function(){t.props.dispatch(v(window.urlQuery.id))})}}))}},{key:"onSelectQrCode",value:function(e){weui.toast("\u81ea\u52a8\u590d\u5236\u6210\u529f"),setTimeout(function(){weui.alert("\u8bf7\u5c06ETH \u53d1\u9001\u5230: <span>".concat(e,"</span>"),function(){te.copy(e)})},3400)}},{key:"render",value:function(){if(this.props.loadingDetail||!this.props.item)return null;var e=this.props.item;return o.a.createElement(Le,{fill:!0,scrollable:uo,className:"OrderDetail"},o.a.createElement("div",null,o.a.createElement("div",{className:"weui-form-preview"},o.a.createElement("div",{className:"weui-form-preview__hd"},o.a.createElement("div",{className:"weui-form-preview__item"},o.a.createElement("label",{className:"weui-form-preview__label"},"\u4ed8\u6b3e\u91d1\u989d"),o.a.createElement("em",{className:"weui-form-preview__value"},"$ ",e.amount))),o.a.createElement("div",{className:"weui-form-preview__bd"},o.a.createElement("div",{className:"weui-form-preview__item"},o.a.createElement("label",{className:"weui-form-preview__label"},"\u8ba2\u5355\u53f7"),o.a.createElement("span",{className:"weui-form-preview__value"},e.order_no)),o.a.createElement("div",{className:"weui-form-preview__item"},o.a.createElement("label",{className:"weui-form-preview__label"},"\u72b6\u6001"),o.a.createElement("span",{className:"weui-form-preview__value"},e.status)),o.a.createElement("div",{className:"weui-form-preview__item"},o.a.createElement("label",{className:"weui-form-preview__label"},"\u63cf\u8ff0"),o.a.createElement("span",{className:"weui-form-preview__value"},e.desc)),o.a.createElement("div",{className:"weui-form-preview__item"},o.a.createElement("label",{className:"weui-form-preview__label"},"\u4ed8\u6b3e\u65b9\u5f0f"),o.a.createElement("span",{className:"weui-form-preview__value"},e.pay_type)),o.a.createElement("div",{className:"weui-form-preview__item"},o.a.createElement("label",{className:"weui-form-preview__label"},"\u4ea4\u6613\u65f6\u95f4"),o.a.createElement("span",{className:"weui-form-preview__value"},q(1e3*e.created_at))),o.a.createElement("div",{className:"weui-form-preview__item"},o.a.createElement("label",{className:"weui-form-preview__label"},"\u66f4\u65b0\u65f6\u95f4"),o.a.createElement("span",{className:"weui-form-preview__value"},q(1e3*e.updated_at))))),"eth"===e.pay_type&&"created"===e.payments[0].status&&o.a.createElement("div",{className:"flex_justify_content_center flex_direction_column flex_align_items_center",style:{marginTop:16,height:260}},o.a.createElement("div",{style:{marginTop:16}},o.a.createElement("span",{style:{fontSize:14}},o.a.createElement("b",null,e.payments[0].address))),o.a.createElement("div",{style:{marginTop:16}},"\u4ed8\u6b3e ",o.a.createElement("span",{style:{fontSize:24}},o.a.createElement("b",null,e.payments[0].amount_eth))," eth"),o.a.createElement("div",{className:"mb16 text_align_center",style:{width:280,marginTop:16}},"\u626b\u63cf QR \u7801\u6216\u5c06\u4ed8\u6b3e\u8be6\u7ec6\u4fe1\u606f\u590d\u5236\u7c98\u8d34\u5230\u60a8\u7684\u94b1\u5305"),this.state.qr_code_data_url&&o.a.createElement("img",{onClick:this.onSelectQrCode.bind(this,e.payments[0].address),src:this.state.qr_code_data_url,alt:""}))))}}]),t}(n.Component);mo.navigationBar="main",mo.getNavigation=function(e,t){return{title:"Order",leftArrow:!0,leftLabel:"",leftAction:function(){window.stop_checking=!0,t.transitionTo("main:orders",{transition:"reveal-from-right"})}}};var po=Object(G.b)(function(e){var t=e.order;return{item:t.item,order_id:t.order_id,loadingDetail:t.loadingDetail}})(mo),ho=(a(497),function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(p())}},{key:"render",value:function(){var e=this.props.me;return e?o.a.createElement("div",{className:"Account"},o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupBody,null,o.a.createElement(Pt.Item,null,o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.ItemTitle,null,"Email: "),o.a.createElement(Pt.ItemSubTitle,{style:{marginRight:16}},e.email))))),o.a.createElement(Pt.Group,null,o.a.createElement(Pt.GroupHeader,null,"\u5e10\u6237\u91d1\u989d"),o.a.createElement(Pt.GroupBody,null,o.a.createElement(At,{to:"main:plan",viewProps:{from_view:"main:account"},transition:"show-from-right"},o.a.createElement(Pt.Item,{showDisclosureArrow:!0},o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.ItemTitle,null,"\u94f6\u5e01: ",e.balance_silver.toFixed(2)),o.a.createElement(Pt.ItemSubTitle,{style:{marginRight:16}},"\u5145\u503c"))))))):null}}]),t}(n.Component));ho.navigationBar="main",ho.getNavigation=function(e,t){return{title:"\u6211",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:home",{transition:"reveal-from-right"})}}};var fo=Object(G.b)(function(e){return{me:e.user.me}})(ho),vo=(a(498),a(184)),go=a.n(vo),bo=function(e){function t(){var e,a;Object(se.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(le.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(o)))).state={email:localStorage.getItem("login_email"),code:"",sendTxt:"\u83b7\u53d6\u9a8c\u8bc1\u7801",sendBtnDisabled:!1,agree:!0,pass:!1,selectedMode:"password",password:""},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"onSendCaptcha",value:function(){var e=this;if(!Q(this.state.email))return weui.topTips("\u8bf7\u8f93\u5165\u6b63\u786e\u7684Email\u5730\u5740");var t=weui.loading("\u83b7\u53d6\u4e2d...",{showMask:!0});u.a.post("/auth/email/captcha",{email:this.state.email}).then(function(a){var n=a.data,o=n.code,i=n.msg;t.hide(),200===o?(weui.toast("\u53d1\u9001\u6210\u529f"),e.setState({sendBtnDisabled:!0,sendTxt:"60"}),window.___t_id=setInterval(function(){var t=e.state.sendTxt;(t=parseInt(t)-1)<=0?(e.setState({sendTxt:"\u83b7\u53d6\u9a8c\u8bc1\u7801",sendBtnDisabled:!1}),clearInterval(window.___t_id)):e.setState({sendTxt:t})},1e3)):weui.topTips(i)}).catch(function(){return t.hide()})}},{key:"onChangeInput",value:function(e,t){var a=this,n=t.target,o={};o[e]=n.value,this.setState(Object(l.a)({},o),function(){a.onCheckInput()})}},{key:"onLoginWIthCaptcha",value:function(){var e=this;this.onCheckInput(),localStorage.setItem("login_email",this.state.email);var t=weui.loading("\u767b\u5f55\u4e2d...",{showMask:!0}),a=function(a){var n=a.data,o=n.code,i=n.body,r=n.msg;if(t.hide(),200===o){var s=i.access_token;Z(s),e.props.dispatch({type:"app/setState",payload:{access_token:s}}),weui.alert(r,function(){e.context.app.transitionTo("main:home",{transition:"show-from-right"})})}else weui.topTips(r)};"password"===this.state.selectedMode?u.a.post("/auth/email/verify",{email:this.state.email,password:go()(this.state.password)}).then(a).catch(function(){return t.hide()}):u.a.post("/auth/email/captcha/verify",{email:this.state.email,code:this.state.code}).then(a).catch(function(){return t.hide()})}},{key:"onCheckInput",value:function(){var e=this.state,t=e.email,a=e.code,n=e.password,o=e.selectedMode,i=e.agree;"password"===o?i&&Q(t)&&n.length>5?this.setState({pass:!0}):this.setState({pass:!1}):i&&Q(t)&&4===a.length?this.setState({pass:!0}):this.setState({pass:!1})}},{key:"onChangeAgree",value:function(e){var t=this,a=e.target;this.setState({agree:a.checked},function(){t.onCheckInput()})}},{key:"handleModeChange",value:function(e){var t=e;this.state.selectedMode===e&&(t=null),this.setState({selectedMode:t})}},{key:"render",value:function(){var e=window.globalObject.constant.google_login_url;return o.a.createElement("div",{className:"Login"},o.a.createElement("div",{style:{margin:"0 48px"}},o.a.createElement(Pt.Group,{hastopgutter:"true",style:{margin:"16px 0"}},o.a.createElement(Pt.SegmentedControl,{value:this.state.selectedMode,onChange:this.handleModeChange.bind(this),hasGutter:!0,options:[{label:"\u5feb\u6377",value:"captcha"},{label:"\u5bc6\u7801",value:"password"}]}))),o.a.createElement("div",{style:{paddingTop:0,backgroundColor:"inherit"}},o.a.createElement("div",{className:"weui-form__control-area",style:{marginTop:16}},o.a.createElement("div",{className:"weui-cells__group weui-cells__group_form"},o.a.createElement("div",{className:"weui-cells weui-cells_form"},o.a.createElement("div",{className:"weui-cell weui-cell_active"},o.a.createElement("div",{className:"weui-cell__hd"},o.a.createElement("label",{className:"weui-label"},"Email")),o.a.createElement("div",{className:"weui-cell__bd"},o.a.createElement("input",{className:"weui-input",type:"text",onChange:this.onChangeInput.bind(this,"email"),placeholder:"\u8bf7\u8f93\u5165Email",value:this.state.email}))),"password"===this.state.selectedMode?o.a.createElement("div",{className:"weui-cell weui-cell_active weui-cell_vcode"},o.a.createElement("div",{className:"weui-cell__hd"},o.a.createElement("label",{className:"weui-label"},"\u5bc6\u7801")),o.a.createElement("div",{className:"weui-cell__bd"},o.a.createElement("input",{onChange:this.onChangeInput.bind(this,"password"),autoFocus:"",value:this.state.password,className:"weui-input",type:"password",pattern:"[\\w]*",placeholder:"\u8f93\u5165\u5bc6\u7801(\u81f3\u5c116\u4f4d)",minLength:"6"}))):o.a.createElement("div",{className:"weui-cell weui-cell_active weui-cell_vcode"},o.a.createElement("div",{className:"weui-cell__hd"},o.a.createElement("label",{className:"weui-label"},"\u9a8c\u8bc1\u7801")),o.a.createElement("div",{className:"weui-cell__bd"},o.a.createElement("input",{onChange:this.onChangeInput.bind(this,"code"),autoFocus:"",value:this.state.code,className:"weui-input",type:"number",pattern:"[0-9]*",placeholder:"\u8f93\u5165\u9a8c\u8bc1\u7801",maxLength:"6"})),o.a.createElement("div",{className:"weui-cell__ft"},o.a.createElement("button",{disabled:this.state.sendBtnDisabled,onClick:this.onSendCaptcha.bind(this),className:"weui-btn weui-btn_default weui-vcode-btn"},this.state.sendTxt)))))),o.a.createElement("div",{className:"weui-form__tips-area hide"},o.a.createElement("label",{id:"weuiAgree",htmlFor:"weuiAgreeCheckbox",className:"weui-agree"},o.a.createElement("input",{id:"weuiAgreeCheckbox",type:"checkbox",onChange:this.onChangeAgree.bind(this),className:"weui-agree__checkbox"}),o.a.createElement("span",{className:"weui-agree__text"},"\u9605\u8bfb\u5e76\u540c\u610f",o.a.createElement("button",{href:"#"},"\u300a\u76f8\u5173\u6761\u6b3e\u300b")))),o.a.createElement("div",{className:"weui-form__opr-area"},o.a.createElement("button",{disabled:!this.state.pass,onClick:this.onLoginWIthCaptcha.bind(this),className:this.state.pass?"weui-btn weui-btn_primary":"weui-btn weui-btn_primary weui-btn_disabled"},"\u786e\u5b9a")),"cordova"!==ae()&&e&&e.length>0&&o.a.createElement("div",{className:"oauth"},o.a.createElement("div",{className:"google",onClick:function(){return function(){var e=window.location.pathname,t=e.split("/"),a=e.substring(0,e.length-t[t.length-1].length),n=J(window.location.href),o="".concat(n.protocol,"//").concat(n.host).concat(a);ee(window.globalObject.constant.google_login_url+"?redirect_url="+encodeURIComponent(o),"_blank")}()}}))))}}]),t}(n.Component);bo.navigationBar="main",bo.getNavigation=function(e,t){return ne("\u767b\u5f55"),{title:"\u767b\u5f55",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo("main:home",{transition:"reveal-from-right"})}}},bo.contextTypes={app:be.a.object};var yo,_o,wo=Object(G.b)(function(e){return{}})(bo),Eo=(a(500),Object(G.b)(function(e){return{me:e.user.me}})((_o=yo=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=window.globalObject.constant.task_sign_amount_copper;return o.a.createElement("div",{className:""},o.a.createElement(Pt.Group,{style:{marginTop:16}},o.a.createElement(Pt.GroupBody,null,o.a.createElement(Pt.Item,null,o.a.createElement(Pt.ItemInner,null,o.a.createElement(Pt.ItemTitle,null," ",e||2e3," \u94dc\u5e01 "),o.a.createElement(Pt.ItemSubTitle,{style:{marginRight:16}},o.a.createElement("a",{className:" weui-btn weui-btn_mini weui-btn_default"},"\u7b7e\u5230")))))))}}]),t}(n.Component),yo.navigationBar="main",yo.getNavigation=function(e,t){return{title:"\u4efb\u52a1\u4e2d\u5fc3",leftArrow:!0,leftLabel:"",leftAction:function(){t.transitionTo(e.from_view?e.from_view:"main:home",{transition:"reveal-from-right"})}}},_o))),ko=function(){var e=window.page_id;return o.a.createElement(Le,null,o.a.createElement(Pt.NavigationBar,{name:"main"}),o.a.createElement(Dt,{name:"main",defaultView:e},o.a.createElement(xt,{name:"home",component:gn}),o.a.createElement(xt,{name:"task",component:Eo}),o.a.createElement(xt,{name:"instance/detail",component:Mn}),o.a.createElement(xt,{name:"line",component:ro}),o.a.createElement(xt,{name:"plan",component:Xn}),o.a.createElement(xt,{name:"eth-confirm",component:no}),o.a.createElement(xt,{name:"account",component:fo}),o.a.createElement(xt,{name:"login",component:wo}),o.a.createElement(xt,{name:"orders",component:co}),o.a.createElement(xt,{name:"helps",component:zn}),o.a.createElement(xt,{name:"help",component:Un}),o.a.createElement(xt,{name:"order/detail",component:po}),o.a.createElement(xt,{name:"demo",component:Mt}),o.a.createElement(xt,{name:"icons",component:Jt}),o.a.createElement(xt,{name:"list-simple",component:Xt}),o.a.createElement(xt,{name:"list-details",component:$t}),o.a.createElement(xt,{name:"chat",component:ua}),o.a.createElement(xt,{name:"form",component:na}),o.a.createElement(xt,{name:"control",component:oa}),o.a.createElement(xt,{name:"rtc",component:en}),o.a.createElement(xt,{name:"transitions",component:ra}),o.a.createElement(xt,{name:"buttons",component:ma}),o.a.createElement(xt,{name:"recyclerlistview",component:rn}),o.a.createElement(xt,{name:"transitions-target",component:Gt})))},So=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){return o.a.createElement(Dt,{name:"app",defaultView:"main"},o.a.createElement(xt,{name:"main",component:ko}))}}]),t}(n.Component),To=a(99),Co=a.n(To),Oo=(a(172),a(501),{navigationBars:{},viewManagers:{},transitionTo:function(e,t){window.globalObject.constant.y_deng.version!==window.__version__&&weui.confirm("\u8bf7\u66f4\u65b0\u60a8\u7684\u7248\u672c",function(){ee(function(){var e=ae();return window.globalObject.constant.download_urls[e]}(),"_blank")}),console.log(e,t),window.urlQuery=t.query?t.query:{},window.location.href="#"+e.replace("main:","")+(t.query?"?"+Co.a.stringify(window.urlQuery):"");var a="__default";(e=e.split(":")).length>1&&(a=e.shift()),e=e[0],Oo.viewManagers[a].transitionTo(e,t)}});window.current_app=Oo;var jo=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ce.a)(t).call(this,e))).state={isActive:!1,touchActive:!1,pinchActive:!1,loading:!0},a}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"getChildContext",value:function(){return{app:Oo}}}]),Object(ue.a)(t,[{key:"handlePageId",value:function(e){var t="404",a=e.hash.replace("#","");a.indexOf("?")>0?(window.urlQuery=J(a).query,a=a.split("?")[0]):window.urlQuery=e.query,t=0===a.length?"home":a;var n=window.pages_history.length;return n>0&&window.pages_history[n-1]===t?(console.log("go -1"),window.go_1=!0):(window.go_1=!1,window.pages_history.push(t)),window.page_id=t,this.props.dispatch({type:"route/setState",payload:{page_id:t,pages_history:window.pages_history,go_1:window.go_1}}),t}},{key:"handleUrl",value:function(e){var t=this,a=J(e);if(window.urlObject=a,console.log(a),a.query.jwt)Z("JWT "+a.query.jwt),this.props.dispatch({type:"app/logged",payload:{access_token:"JWT "+a.query.jwt}}),window.location.href="".concat(a.protocol,"//").concat(a.host).concat(a.pathname).concat(a.hash);else{var n=this.handlePageId(a),o=Y();o&&this.props.dispatch({type:"app/logged",payload:{access_token:o}}),0===Object.keys(window.globalObject.constant).length&&this.getConstants(),me.includes(n.split("/")[0])?null===o?K():this.props.dispatch(p(function(){t.finishLoading()})):this.finishLoading()}}},{key:"finishLoading",value:function(){this.setState({loading:!1}),setTimeout(function(){document.querySelector(".global-loading").style.display="none"},700)}},{key:"getSsServerInfo",value:function(e){var t=this;Cn(function(a){a.length>0?t.set_shadowsocks_status(a[0],"CONNECTED"):t.set_shadowsocks_status(null,"DISCONNECTED"),e&&e()},function(){t.set_shadowsocks_status(null,"DISCONNECTED"),e&&e()})}},{key:"set_shadowsocks_status",value:function(e,t){this.props.dispatch({type:"shadowsocks/setState",payload:{current_connect_status:t,current_connect_id:e}})}},{key:"setConstants",value:function(){this.props.dispatch({type:"app/setState",payload:{constant:window.globalObject.constant}})}},{key:"getConstants",value:function(){var e=this;u.a.get("/constant").then(function(t){var a=t.data,n=a.default_zone,o=a.zones,i=a.download_urls,r=a.y_deng,s=a.plans,c=a.payment,u=a.zone_names;window.globalObject.constant=Object(l.a)({},a,{zones:X(o,u),default_zone:n,payment:c,y_deng:r,zone_names:u,plans:s,download_urls:i}),["window","mac"].includes(ae())?e.getSsServerInfo(function(){e.setConstants()}):e.setConstants()}).catch(function(){})}},{key:"componentDidMount",value:function(){navigator.splashscreen&&navigator.splashscreen.hide(),this.handleUrl(window.location.href)}},{key:"render",value:function(){if(this.state.loading)return null;if(!this.props.constant)return null;var e="app-wrapper device--"+(window.device||{}).platform;return o.a.createElement("div",{className:e},o.a.createElement("div",{className:"device-silhouette"},o.a.createElement(So,null)))}}]),t}(n.Component);jo.childContextTypes={app:be.a.object};var Io=Object(G.b)(function(e){var t=e.app,a=e.route;return{page:a.page,page_id:a.page_id,index:a.index,constant:t.constant}})(jo);a(502),a(503),a(504);window.__version__="1.0.2",re();var No=Object(s.d)(F,Object(s.a)(V.a)),Ro=function(){window.pages_history=[],window.login_reload=!0,window.StatusBar&&window.StatusBar.styleDefault(),r.a.render(o.a.createElement(G.a,{store:No},o.a.createElement(Io,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})};window.cordova?document.addEventListener("deviceready",function(){var e=window.chcp;e.fetchUpdate(function(t,a){t?console.log("--fetchUpdate error--, "+JSON.stringify([t.code,t.description])):(console.log("--fetchUpdate--"+JSON.stringify([a,a.config])),e.isUpdateAvailableForInstallation(function(t,a){t?console.log("No update was loaded => nothing to install"):(window.weui.confirm("\u68c0\u6d4b\u5230\u65b0\u7248\u672c\uff0c\u662f\u5426\u66f4\u65b0",function(){e.installUpdate(function(e){e?(console.log("Failed to install the update with error code: "+e.code),console.log(e.description)):console.log("Update installed!")})},function(){window.weui.alert("\u60a8\u5df2\u62d2\u7edd\u66f4\u65b0")}),console.log("Current content version: "+a.currentVersion),console.log("Ready to be installed:"+a.readyToInstallVersion))}))}),Ro()},!1):Ro()},62:function(e,t,a){},98:function(e,t,a){}},[[191,3,0,5]]]);
//# sourceMappingURL=gcp.0fb003753e5e5789a031.chunk.js.map